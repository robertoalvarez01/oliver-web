{"ast":null,"code":"import { response } from '../../../api/server/routes/usuario';\nimport { API } from '../../config/index';\nimport { VERIFICAR_SESION, LOGIN, LOGOUT, LOADING, ERROR } from '../types/usuarioTypes';\nexport const login = data => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    if (data.email.trim() === '' || data.password.trim() === '') {\n      return dispatch({\n        type: ERROR,\n        payload: 'Es necesario completar todos los campos'\n      });\n    }\n\n    let headers = new Headers();\n    headers.append(\"Content-Type\", \"application/json\");\n    return fetch(`${API}/login`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers\n    }).then(res => res.json()).then(response => {\n      if (response.ok) {\n        let objUsuario = {\n          nombre: response.usuario.nombre,\n          email: response.usuario.email,\n          foto: response.usuario.foto,\n          token: response.token,\n          address: response.usuario.ubicacion,\n          idUsuario: response.usuario.idUsuario\n        };\n        localStorage.setItem('oliverpetshop_usuario', JSON.stringify(objUsuario));\n        dispatch({\n          type: LOGIN,\n          payload: localStorage.getItem('oliverpetshop_usuario')\n        });\n      } else {\n        return dispatch({\n          type: ERROR,\n          payload: response.info\n        });\n      }\n    });\n  } catch (error) {\n    console.log(error);\n    return dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const logout = () => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    localStorage.removeItem('oliverpetshop_usuario');\n    return dispatch({\n      type: LOGOUT\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const verificarSesion = () => async dispatch => {\n  try {\n    let dataUsuario = JSON.parse(localStorage.getItem('oliverpetshop_usuario'));\n\n    if (dataUsuario) {\n      return dispatch({\n        type: VERIFICAR_SESION,\n        payload: {\n          data: dataUsuario,\n          logueado: true\n        }\n      });\n    }\n\n    return dispatch({\n      type: VERIFICAR_SESION,\n      payload: {\n        data: null,\n        logueado: false\n      }\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const register = data => dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    let headers = new Headers();\n    headers.append(\"Content-Type\", \"application/json\");\n    return fetch(`${API}register`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers\n    }).then(res => res.json()).then(response => {\n      if (response.ok) {\n        let objUsuario = {\n          nombre: response.usuario.nombre,\n          email: response.usuario.email,\n          foto: response.usuario.foto,\n          token: response.token,\n          address: response.usuario.address,\n          idUsuario: response.usuario.idUsuario\n        };\n        localStorage.setItem('oliverpetshop_usuario', JSON.stringify(objUsuario));\n        dispatch({\n          type: LOGIN,\n          payload: localStorage.getItem('oliverpetshop_usuario')\n        });\n      } else {\n        dispatch({\n          type: ERROR,\n          payload: response.info\n        });\n      }\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const singInWithGoogle = tokenId => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    let headers = new Headers();\n    headers.append(\"Content-Type\", \"application/json\");\n    return fetch(`${API}google/tokensignin`, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify({\n        token: tokenId\n      })\n    }).then(res => res.json()).then(response => {\n      if (!response.ok) {\n        return dispatch({\n          type: ERROR,\n          payload: response.info\n        });\n      }\n\n      ;\n      let objUsuario = {\n        nombre: response.usuario.nombre,\n        email: response.usuario.email,\n        foto: response.usuario.foto,\n        token: response.token,\n        address: response.usuario.address,\n        idUsuario: response.usuario.idUsuario\n      };\n      localStorage.setItem('oliverpetshop_usuario', JSON.stringify(objUsuario));\n      dispatch({\n        type: LOGIN,\n        payload: localStorage.getItem('oliverpetshop_usuario')\n      });\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const actualizarFoto = (data, id) => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    let headers = new Headers();\n    let token = JSON.parse(localStorage.getItem('oliverpetshop_usuario')).token;\n    headers.append(\"token\", token);\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};","map":{"version":3,"sources":["/home/franco/desarrollo/proyecto_oliver/oliver-web-next/store/actions/usuarioActions.js"],"names":["response","API","VERIFICAR_SESION","LOGIN","LOGOUT","LOADING","ERROR","login","data","dispatch","type","email","trim","password","payload","headers","Headers","append","fetch","method","body","JSON","stringify","then","res","json","ok","objUsuario","nombre","usuario","foto","token","address","ubicacion","idUsuario","localStorage","setItem","getItem","info","error","console","log","logout","removeItem","verificarSesion","dataUsuario","parse","logueado","register","singInWithGoogle","tokenId","actualizarFoto","id"],"mappings":"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","sourcesContent":["import { response } from '../../../api/server/routes/usuario';\nimport {API} from '../../config/index';\nimport {VERIFICAR_SESION,LOGIN,LOGOUT,LOADING,ERROR} from '../types/usuarioTypes';\n\nexport const login = (data)=>async(dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        if(data.email.trim() === '' || data.password.trim() === ''){\n            return dispatch({\n                type:ERROR,\n                payload:'Es necesario completar todos los campos'\n            })\n        }\n        let headers = new Headers();\n        headers.append(\"Content-Type\", \"application/json\");\n        return fetch(`${API}/login`,{\n            method:'POST',\n            body:JSON.stringify(data),\n            headers\n        }).then(res=>res.json()).then(response=>{\n            if(response.ok){\n                let objUsuario = {\n                    nombre:response.usuario.nombre,\n                    email:response.usuario.email,\n                    foto:response.usuario.foto,\n                    token:response.token,\n                    address:response.usuario.ubicacion,\n                    idUsuario:response.usuario.idUsuario\n                }\n                localStorage.setItem('oliverpetshop_usuario',JSON.stringify(objUsuario));\n                dispatch({\n                    type:LOGIN,\n                    payload:localStorage.getItem('oliverpetshop_usuario')\n                })\n            }else{\n                return dispatch({\n                    type:ERROR,\n                    payload:response.info\n                })\n            }\n        })\n    } catch (error) {\n        console.log(error);\n        return dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const logout = ()=>async(dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        localStorage.removeItem('oliverpetshop_usuario');\n        return dispatch({\n            type:LOGOUT\n        })\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const verificarSesion=()=>async(dispatch)=>{\n    try {\n        let dataUsuario = JSON.parse(localStorage.getItem('oliverpetshop_usuario'));\n        if(dataUsuario){\n            return dispatch({\n                type:VERIFICAR_SESION,\n                payload:{data:dataUsuario,logueado:true}\n            })\n        }\n        return dispatch({\n            type:VERIFICAR_SESION,\n            payload:{data:null,logueado:false}\n        })\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const register=(data)=>(dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        let headers = new Headers();\n        headers.append(\"Content-Type\", \"application/json\");\n        return fetch(`${API}register`,{\n            method:'POST',\n            body:JSON.stringify(data),\n            headers\n        }).then(res=>res.json()).then(response=>{\n            if(response.ok){\n                let objUsuario = {\n                    nombre:response.usuario.nombre,\n                    email:response.usuario.email,\n                    foto:response.usuario.foto,\n                    token:response.token,\n                    address:response.usuario.address,\n                    idUsuario:response.usuario.idUsuario\n                }\n                localStorage.setItem('oliverpetshop_usuario',JSON.stringify(objUsuario));\n                dispatch({\n                    type:LOGIN,\n                    payload:localStorage.getItem('oliverpetshop_usuario')\n                });\n            }else{\n                dispatch({\n                    type:ERROR,\n                    payload:response.info\n                })\n            }\n        })\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const singInWithGoogle = tokenId => async(dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        let headers = new Headers();\n        headers.append(\"Content-Type\", \"application/json\");\n        return fetch(`${API}google/tokensignin`,{\n            method:'POST',\n            headers,\n            body:JSON.stringify({token:tokenId})\n        }).then(res=>res.json()).then(response=>{\n            if(!response.ok){\n                return dispatch({\n                    type:ERROR,\n                    payload:response.info\n                })\n            };\n            let objUsuario = {\n                nombre:response.usuario.nombre,\n                email:response.usuario.email,\n                foto:response.usuario.foto,\n                token:response.token,\n                address:response.usuario.address,\n                idUsuario:response.usuario.idUsuario\n            }\n            localStorage.setItem('oliverpetshop_usuario',JSON.stringify(objUsuario));\n            dispatch({\n                type:LOGIN,\n                payload:localStorage.getItem('oliverpetshop_usuario')\n            });\n        })\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const actualizarFoto = (data,id) =>async(dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        let headers = new Headers();\n        let token = JSON.parse(localStorage.getItem('oliverpetshop_usuario')).token;\n        headers.append(\"token\", token);\n        \n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}"]},"metadata":{},"sourceType":"module"}