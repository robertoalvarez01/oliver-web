{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from 'react';\nimport { connect } from 'react-redux';\nimport Loader from '../Loader/index';\nimport { API } from '../../../config/index';\n\nconst FormModificarPw = props => {\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const {\n    0: actionSuccess,\n    1: setActionSuccess\n  } = useState(null);\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n\n  const sendEmail = async () => {\n    let headers = new Headers();\n    let dataToSend;\n\n    if (props.usuarioReducer.logueado) {\n      const {\n        idUsuario,\n        token\n      } = props.usuarioReducer.usuario;\n      if (!token) return setError('Ups.. ha ocurrido un error.');\n      headers.append('token', token);\n      dataToSend = {\n        idUsuario\n      };\n    } else {\n      if (email == '') return setError('Ups.. ha ocurrido un error.');\n      dataToSend = {\n        email\n      };\n    }\n\n    setLoading(true);\n    headers.append(\"Content-Type\", \"application/json\");\n    console.log(dataToSend);\n    const request = await fetch(`${API}/resetPassword`, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(dataToSend)\n    });\n\n    if (request.status != 200) {\n      setLoading(false);\n      return setError('Ups.. ha ocurrido un error.');\n    }\n\n    const dataRequest = await request.json();\n    setLoading(false);\n\n    if (dataRequest.ok) {\n      return setActionSuccess(dataRequest.info);\n    }\n\n    return setError('Ups.. ha ocurrido un error.');\n  };\n\n  const handleChangeEmail = event => {\n    setEmail(event.target.value);\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-204570501\" + \" \" + \"containerResetPass\"\n  }, __jsx(\"div\", {\n    className: \"jsx-204570501\" + \" \" + \"text-center\"\n  }, error ? __jsx(\"div\", {\n    className: \"jsx-204570501\" + \" \" + \"alert alert-danger text-center\"\n  }, error) : null), __jsx(\"div\", {\n    className: \"jsx-204570501\" + \" \" + `alert alert-${actionSuccess ? `info` : `warning`} text-center`\n  }, actionSuccess ? __jsx(\"b\", {\n    className: \"jsx-204570501\"\n  }, actionSuccess) : `Estaremos enviando un email con los pasos para poder realizar el proceso de modificación de contraseña`), __jsx(\"div\", {\n    className: \"jsx-204570501\" + \" \" + \"col-12 text-center\"\n  }, loading ? __jsx(Loader, null) : null, props.withEmail ? __jsx(\"input\", {\n    type: \"email\",\n    value: email,\n    onChange: handleChangeEmail,\n    required: true,\n    placeholder: \"Ingrese su email\",\n    className: \"jsx-204570501\" + \" \" + \"form-control mb-3\"\n  }) : null, !actionSuccess && !loading ? __jsx(\"button\", {\n    onClick: sendEmail,\n    type: \"button\",\n    className: \"jsx-204570501\" + \" \" + \"boton bg-yellow\"\n  }, \"Enviar email\") : null), __jsx(_JSXStyle, {\n    id: \"204570501\"\n  }, [\".containerResetPass.jsx-204570501{font-family:'Quicksand',sans-serif!important;}\"]));\n};\n\nconst mapStateToProps = ({\n  usuarioReducer\n}) => {\n  return {\n    usuarioReducer\n  };\n};\n\nexport default connect(mapStateToProps, null)(FormModificarPw);","map":null,"metadata":{},"sourceType":"module"}