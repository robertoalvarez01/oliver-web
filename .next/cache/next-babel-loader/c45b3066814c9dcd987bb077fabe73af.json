{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport NavbarStyle from './Navbar.module.css';\nimport Link from 'next/link';\nimport Router, { useRouter } from 'next/router';\nimport Modal from '../Modal/index';\nimport Login from '../Login';\nimport Register from '../Login/Register';\nimport Carrito from '../Carrito';\nimport { faHome, faUser, faPiggyBank, faShoppingCart, faAlignLeft, faSignOutAlt, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { faFacebook, faInstagram } from '@fortawesome/free-brands-svg-icons';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { PUBLIC_URL, URL_CLOUD_STORAGE } from '../../../config/index';\nimport { connect } from 'react-redux';\nimport * as usuarioActions from '../../../store/actions/usuarioActions';\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport FiltroStyle from '../Filtro/Filtro.module.css';\nimport FormModificarPw from '../formModificarPw/index';\n\nconst Navbar = props => {\n  useEffect(() => {\n    props.verificarSesion();\n  }, []);\n  const {\n    0: busqueda,\n    1: setBusqueda\n  } = useState('');\n  const {\n    0: login,\n    1: setLogin\n  } = useState(false);\n  const {\n    0: carrito,\n    1: setCarrito\n  } = useState(false);\n  const {\n    0: register,\n    1: setRegister\n  } = useState(false);\n  const {\n    0: resetPassword,\n    1: setResetPassword\n  } = useState(false);\n  const {\n    0: modalIsOpen,\n    1: setModalIsOpen\n  } = useState(false);\n  const {\n    0: dropdownOpen,\n    1: setOpen\n  } = useState(false);\n  const location = useRouter(); //actions login-register\n\n  const showModalLogin = () => {\n    register ? setRegister(false) : null;\n    carrito ? setCarrito(false) : null;\n    setLogin(true);\n    setModalIsOpen(true);\n  };\n\n  const showRegister = () => {\n    login ? setLogin(false) : false;\n    carrito ? setCarrito(false) : null;\n    setRegister(true);\n  };\n\n  const showResetPassword = () => {\n    login ? setLogin(false) : null;\n    carrito ? setCarrito(false) : null;\n    register ? setRegister(false) : null;\n    setResetPassword(true);\n  };\n\n  const closeModal = () => setModalIsOpen(false); //-------------------------------------------------//\n  //actions carrito\n\n\n  const showModalCarrito = () => {\n    login ? setLogin(false) : null;\n    register ? setRegister(false) : null; //si el menu esta abierto, lo cierro.\n\n    setCarrito(true);\n    setModalIsOpen(true);\n  };\n\n  const toggleMenu = () => {\n    if (document.getElementsByClassName('Filtro_filtros__contanier__3knXf')[0] && document.getElementsByClassName('Filtro_filtros__contanier__3knXf')[0].classList.contains(FiltroStyle.show_filtros)) {\n      document.getElementsByClassName('Filtro_filtros__contanier__3knXf')[0].classList.remove(FiltroStyle.show_filtros);\n    }\n\n    document.getElementsByClassName(NavbarStyle.menu__collapsed)[0].classList.toggle(NavbarStyle.showCollapsed);\n  };\n\n  const handleChangeMenu = event => {\n    setBusqueda(event.target.value);\n  };\n\n  const handleSubmitBuscador = event => {\n    event.preventDefault();\n    if (busqueda.trim() === '') return false;\n\n    if (location.pathname == '/') {\n      return Router.push(`/productos?search=${busqueda}`);\n    }\n\n    return window.location.assign(`/productos?search=${busqueda}`);\n  };\n\n  const renderContenidoModal = () => {\n    if (login) return __jsx(Login, {\n      showRegister: showRegister,\n      showResetPassword: showResetPassword\n    });\n    if (register) return __jsx(Register, {\n      showLogin: showModalLogin\n    });\n    if (carrito) return __jsx(Carrito, null);\n    if (resetPassword) return __jsx(FormModificarPw, {\n      withEmail: true\n    });\n  };\n\n  const cerrarSesion = async () => {\n    await props.logout();\n    setTimeout(() => {\n      return showModalLogin();\n    }, 800);\n  };\n\n  const toggle = () => setOpen(!dropdownOpen);\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: NavbarStyle.navbar + ' ' + `sticky-top`\n  }, __jsx(\"div\", {\n    className: NavbarStyle.wrapper__navbar + ' ' + `container`\n  }, __jsx(\"nav\", {\n    className: \"row ml-0 w-100\"\n  }, __jsx(\"div\", {\n    className: NavbarStyle.container__logo\n  }, __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", null, __jsx(\"img\", {\n    src: `${URL_CLOUD_STORAGE}/static/Perro.png`,\n    className: NavbarStyle.logo + ' ' + `img-fluid`,\n    alt: \"Oliver pet shop\"\n  })))), __jsx(\"span\", {\n    className: NavbarStyle.boton__menu + ' ' + NavbarStyle.btn_carrito + ' ' + NavbarStyle.carrito_mobile,\n    onClick: showModalCarrito\n  }, __jsx(FontAwesomeIcon, {\n    icon: faShoppingCart,\n    className: NavbarStyle.txt__item_menu\n  })), props.logueado && props.usuario ? __jsx(\"img\", {\n    src: props.usuario.foto != 'null' ? props.usuario.foto : `https://storage.googleapis.com/web-oliver/user-default.png`,\n    className: NavbarStyle.imgProfile + ' ' + NavbarStyle.img_menu,\n    onClick: toggleMenu\n  }) : __jsx(FontAwesomeIcon, {\n    onClick: toggleMenu,\n    icon: faAlignLeft,\n    className: NavbarStyle.icon_menu\n  }), __jsx(\"form\", {\n    className: NavbarStyle.buscador + ' ' + `col-sm-4 col-xl-7 col-md-7 d-flex align-items-center input-group`,\n    autoComplete: \"off\",\n    onSubmit: handleSubmitBuscador\n  }, __jsx(\"input\", {\n    type: \"text\",\n    required: true,\n    className: NavbarStyle.form_search_menu + ' ' + `form-control`,\n    onChange: handleChangeMenu,\n    placeholder: \"\\xBFQu\\xE9 andas buscando?\"\n  })), __jsx(\"div\", {\n    className: NavbarStyle.container__login_menu + ' ' + `col-sm-7 col-xl-4 col-md-4 d-flex align-items-center justify-content-end`\n  }, props.logueado && props.usuario ? __jsx(ButtonDropdown, {\n    isOpen: dropdownOpen,\n    toggle: toggle\n  }, __jsx(DropdownToggle, {\n    caret: true,\n    size: \"sm\",\n    className: NavbarStyle.boton__menu + ' ' + NavbarStyle.btn_account + ' ' + NavbarStyle.sinBorder\n  }, __jsx(\"img\", {\n    src: props.usuario.foto != 'null' ? props.usuario.foto : `https://storage.googleapis.com/web-oliver/user-default.png`,\n    className: NavbarStyle.imgProfile\n  })), __jsx(DropdownMenu, null, __jsx(Link, {\n    href: `${PUBLIC_URL}/perfil`\n  }, __jsx(\"a\", null, __jsx(DropdownItem, null, \"Mi perfil\"))), __jsx(DropdownItem, {\n    divider: true\n  }), __jsx(DropdownItem, {\n    onClick: cerrarSesion\n  }, __jsx(FontAwesomeIcon, {\n    icon: faSignOutAlt,\n    className: NavbarStyle.txt__item_menu\n  }), \" Cerrar sesi\\xF3n\"))) : __jsx(\"span\", {\n    onClick: showModalLogin,\n    className: NavbarStyle.boton__menu + ' ' + NavbarStyle.btn_account\n  }, __jsx(\"span\", {\n    className: NavbarStyle.txt__item_menu\n  }, \"Ingres\\xE1 ahora / Registrate\")), __jsx(\"span\", {\n    className: NavbarStyle.boton__menu + ' ' + NavbarStyle.btn_carrito,\n    onClick: showModalCarrito\n  }, __jsx(FontAwesomeIcon, {\n    icon: faShoppingCart,\n    className: NavbarStyle.txt__item_menu\n  }))))), __jsx(\"div\", {\n    className: NavbarStyle.menu__collapsed\n  }, __jsx(\"section\", {\n    className: NavbarStyle.header__collapsed_nav\n  }, __jsx(\"img\", {\n    src: `${URL_CLOUD_STORAGE}/static/Perro.png`,\n    className: NavbarStyle.logo,\n    alt: \"Oliver pet shop\"\n  }), __jsx(FontAwesomeIcon, {\n    onClick: toggleMenu,\n    className: NavbarStyle.close_btn_menu,\n    icon: faTimes\n  })), __jsx(\"div\", {\n    className: NavbarStyle.main__collapsed\n  }, __jsx(\"ul\", {\n    className: NavbarStyle.list__menu__collapsed\n  }, __jsx(Link, {\n    href: \"/\",\n    onClick: toggleMenu\n  }, __jsx(\"a\", null, __jsx(\"li\", {\n    className: NavbarStyle.item__menu__collapsed\n  }, __jsx(FontAwesomeIcon, {\n    icon: faHome,\n    className: NavbarStyle.icon__itemMenu__collapsed\n  }), __jsx(\"span\", {\n    className: NavbarStyle.label__item__menu\n  }, \"Inicio\")))), __jsx(Link, {\n    href: \"/productos\",\n    onClick: toggleMenu\n  }, __jsx(\"a\", null, __jsx(\"li\", {\n    className: NavbarStyle.item__menu__collapsed\n  }, __jsx(FontAwesomeIcon, {\n    icon: faPiggyBank,\n    className: NavbarStyle.icon__itemMenu__collapsed\n  }), __jsx(\"span\", {\n    className: NavbarStyle.label__item__menu\n  }, \"Productos\")))), props.logueado && props.usuario ? __jsx(React.Fragment, null, __jsx(Link, {\n    href: `${PUBLIC_URL}/perfil`,\n    onClick: toggleMenu\n  }, __jsx(\"a\", null, __jsx(\"li\", {\n    className: NavbarStyle.item__menu__collapsed\n  }, __jsx(FontAwesomeIcon, {\n    icon: faUser,\n    className: NavbarStyle.icon__itemMenu__collapsed\n  }), __jsx(\"span\", {\n    className: NavbarStyle.label__item__menu\n  }, \"Mi perfil\")))), __jsx(\"li\", {\n    className: NavbarStyle.item__menu__collapsed,\n    onClick: cerrarSesion\n  }, __jsx(FontAwesomeIcon, {\n    icon: faSignOutAlt,\n    className: NavbarStyle.icon__itemMenu__collapsed\n  }), __jsx(\"span\", {\n    className: NavbarStyle.label__item__menu\n  }, \"Cerrar Sesi\\xF3n\"))) : __jsx(\"li\", {\n    className: NavbarStyle.item__menu__collapsed,\n    onClick: showModalLogin\n  }, __jsx(FontAwesomeIcon, {\n    icon: faUser,\n    className: NavbarStyle.icon__itemMenu__collapsed\n  }), __jsx(\"span\", {\n    className: NavbarStyle.label__item__menu\n  }, \"Ingres\\xE1 ahora / Registrate\")))), __jsx(\"section\", {\n    className: NavbarStyle.collapsed_info + ' ' + `text-center`\n  }, __jsx(\"div\", {\n    className: NavbarStyle.redes__collapsed\n  }, __jsx(FontAwesomeIcon, {\n    onClick: () => window.location.assign('https://www.facebook.com/Pet-shop-Oliver-1783777958556350'),\n    icon: faFacebook,\n    className: NavbarStyle.iconoRed\n  }), __jsx(FontAwesomeIcon, {\n    onClick: () => window.location.assign('https://www.instagram.com/petshopoliver/'),\n    icon: faInstagram,\n    className: NavbarStyle.iconoRed\n  })), __jsx(Link, {\n    href: `${PUBLIC_URL}/politica`\n  }, __jsx(\"span\", {\n    className: \"text-muted\"\n  }, \"\\xA9Terminos y Condiciones\"))))), !modalIsOpen ? null : __jsx(Modal, {\n    closeModal: closeModal\n  }, renderContenidoModal()));\n};\n\nconst mapStateToProps = reducers => {\n  return reducers.usuarioReducer;\n};\n\nexport default connect(mapStateToProps, usuarioActions)(Navbar);","map":null,"metadata":{},"sourceType":"module"}