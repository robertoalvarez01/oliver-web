{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\franc\\\\Documents\\\\oliver-2\\\\sitio-desa\\\\pages\\\\procesarVenta\\\\[[...params]].js\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from '../../src/components/Head';\nimport Loader from '../../src/components/Loader';\nimport { useRouter } from 'next/router';\nimport { connect } from 'react-redux';\nimport * as carritoActions from '../../store/actions/carritoActions';\nimport * as enviosActions from '../../store/actions/enviosActions';\nimport { useEffect } from 'react';\nvar enviosGuardar = enviosActions.guardar;\nvar carritoTraerProductos = carritoActions.traerProductos;\n\nvar ProcesarVenta = function ProcesarVenta(props) {\n  _s();\n\n  useEffect(function () {\n    if (props.usuarioReducer.logueado) {\n      getData();\n    }\n  }, [props.usuarioReducer]);\n\n  var getData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var dataEnvio, idUsuario, _props$carritoReducer, subtotal, porcentaje_descuento, descuento, total, productos, zona, tipo, dataToRequest;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dataEnvio = JSON.parse(localStorage.getItem('dataEnvio'));\n              props.enviosGuardar(dataEnvio);\n              props.carritoTraerProductos();\n              idUsuario = props.usuarioReducer.usuario.idUsuario;\n              _props$carritoReducer = props.carritoReducer, subtotal = _props$carritoReducer.subtotal, porcentaje_descuento = _props$carritoReducer.porcentaje_descuento, descuento = _props$carritoReducer.descuento, total = _props$carritoReducer.total, productos = _props$carritoReducer.productos;\n              zona = dataEnvio.zona, tipo = dataEnvio.tipo;\n              dataToRequest = {\n                envio: {\n                  idZona: zona,\n                  tipo: tipo\n                },\n                venta: {\n                  subtotal: subtotal,\n                  porcentaje_descuento: porcentaje_descuento,\n                  descuento: descuento,\n                  total: total,\n                  idUsuario: idUsuario,\n                  productos: productos\n                }\n              };\n              return _context.abrupt(\"return\", registrarVenta(dataToRequest));\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var registrarVenta = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function registrarVenta(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  console.log(props);\n  var router = useRouter();\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    title: \"Finalizacion de compra\",\n    metadesc: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-1904871720\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, __jsx(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  })), __jsx(_JSXStyle, {\n    id: \"1904871720\",\n    __self: _this\n  }, \"div.jsx-1904871720{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZnJhbmNcXERvY3VtZW50c1xcb2xpdmVyLTJcXHNpdGlvLWRlc2FcXHBhZ2VzXFxwcm9jZXNhclZlbnRhXFxbWy4uLnBhcmFtc11dLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXVEd0IsQUFHaUMsMEVBRWpCLDZGQUFDIiwiZmlsZSI6IkM6XFxVc2Vyc1xcZnJhbmNcXERvY3VtZW50c1xcb2xpdmVyLTJcXHNpdGlvLWRlc2FcXHBhZ2VzXFxwcm9jZXNhclZlbnRhXFxbWy4uLnBhcmFtc11dLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEhlYWQgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvSGVhZCc7XHJcbmltcG9ydCBMb2FkZXIgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvTG9hZGVyJztcclxuaW1wb3J0IHt1c2VSb3V0ZXJ9IGZyb20gJ25leHQvcm91dGVyJztcclxuaW1wb3J0IHtjb25uZWN0fSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcbmltcG9ydCAqIGFzIGNhcnJpdG9BY3Rpb25zIGZyb20gJy4uLy4uL3N0b3JlL2FjdGlvbnMvY2Fycml0b0FjdGlvbnMnO1xyXG5pbXBvcnQgKiBhcyBlbnZpb3NBY3Rpb25zIGZyb20gJy4uLy4uL3N0b3JlL2FjdGlvbnMvZW52aW9zQWN0aW9ucyc7XHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuXHJcbmNvbnN0IHtndWFyZGFyOmVudmlvc0d1YXJkYXJ9ID0gZW52aW9zQWN0aW9ucztcclxuY29uc3Qge3RyYWVyUHJvZHVjdG9zOmNhcnJpdG9UcmFlclByb2R1Y3Rvc30gPSBjYXJyaXRvQWN0aW9ucztcclxuXHJcbmNvbnN0IFByb2Nlc2FyVmVudGEgPSAocHJvcHMpID0+IHtcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYocHJvcHMudXN1YXJpb1JlZHVjZXIubG9ndWVhZG8pe1xyXG4gICAgICAgICAgICBnZXREYXRhKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW3Byb3BzLnVzdWFyaW9SZWR1Y2VyXSk7XHJcblxyXG4gICAgY29uc3QgZ2V0RGF0YSA9IGFzeW5jKCk9PntcclxuICAgICAgICBjb25zdCBkYXRhRW52aW8gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXRhRW52aW8nKSk7XHJcbiAgICAgICAgcHJvcHMuZW52aW9zR3VhcmRhcihkYXRhRW52aW8pO1xyXG4gICAgICAgIHByb3BzLmNhcnJpdG9UcmFlclByb2R1Y3RvcygpO1xyXG4gICAgICAgIGNvbnN0IHtpZFVzdWFyaW99ID0gcHJvcHMudXN1YXJpb1JlZHVjZXIudXN1YXJpbztcclxuICAgICAgICBjb25zdCB7c3VidG90YWwscG9yY2VudGFqZV9kZXNjdWVudG8sZGVzY3VlbnRvLHRvdGFsLHByb2R1Y3Rvc30gPSBwcm9wcy5jYXJyaXRvUmVkdWNlcjtcclxuICAgICAgICBjb25zdCB7em9uYSx0aXBvfSA9IGRhdGFFbnZpbztcclxuICAgICAgICBsZXQgZGF0YVRvUmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgZW52aW86e1xyXG4gICAgICAgICAgICAgICAgaWRab25hOnpvbmEsXHJcbiAgICAgICAgICAgICAgICB0aXBvXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHZlbnRhOntcclxuICAgICAgICAgICAgICAgIHN1YnRvdGFsLFxyXG4gICAgICAgICAgICAgICAgcG9yY2VudGFqZV9kZXNjdWVudG8sXHJcbiAgICAgICAgICAgICAgICBkZXNjdWVudG8sXHJcbiAgICAgICAgICAgICAgICB0b3RhbCxcclxuICAgICAgICAgICAgICAgIGlkVXN1YXJpbyxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3Rvc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWdpc3RyYXJWZW50YShkYXRhVG9SZXF1ZXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZWdpc3RyYXJWZW50YSA9IGFzeW5jIGRhdGE9PntcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2cocHJvcHMpO1xyXG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDw+XHJcbiAgICAgICAgICAgIDxIZWFkIHRpdGxlPVwiRmluYWxpemFjaW9uIGRlIGNvbXByYVwiIG1ldGFkZXNjPVwiXCIvPlxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPExvYWRlci8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICAgICAgICAgICAgZGl2e1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ZmxleDtcclxuICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczpjZW50ZXJcclxuICAgICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICA8Lz5cclxuICAgICk7XHJcbn1cclxuXHJcblByb2Nlc2FyVmVudGEuZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMoe3F1ZXJ5fSk9PntcclxuICAgIGNvbnN0IHtjb2xsZWN0aW9uX2lkLGNvbGxlY3Rpb25fc3RhdHVzLGV4dGVybmFsX3JlZmVyZW5jZSxtZXJjaGFudCxhY2NvdW50X2lkLG1lcmNoYW50X29yZGVyX2lkLHBheW1lbnRfaWQscGF5bWVudF90eXBlLHByZWZlcmVuY2VfaWQscHJvY2Vzc2luZ19tb2RlLHNpdGVfaWQsc3RhdHVzfSA9IHF1ZXJ5O1xyXG4gICAgcmV0dXJuIHtjb2xsZWN0aW9uX2lkLGNvbGxlY3Rpb25fc3RhdHVzLGV4dGVybmFsX3JlZmVyZW5jZSxtZXJjaGFudCxhY2NvdW50X2lkLG1lcmNoYW50X29yZGVyX2lkLHBheW1lbnRfaWQscGF5bWVudF90eXBlLHByZWZlcmVuY2VfaWQscHJvY2Vzc2luZ19tb2RlLHNpdGVfaWQsc3RhdHVzfTtcclxufVxyXG5cclxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHtjYXJyaXRvUmVkdWNlcixlbnZpb3NSZWR1Y2VyLHVzdWFyaW9SZWR1Y2VyfSk9PntcclxuICAgIHJldHVybiB7Y2Fycml0b1JlZHVjZXIsZW52aW9zUmVkdWNlcix1c3VhcmlvUmVkdWNlcn1cclxufTtcclxuY29uc3QgbWFwRGlzcGF0Y2hUb1Byb3BzID0ge1xyXG4gICAgZW52aW9zR3VhcmRhcixcclxuICAgIGNhcnJpdG9UcmFlclByb2R1Y3Rvc1xyXG59XHJcbiBcclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsbWFwRGlzcGF0Y2hUb1Byb3BzKShQcm9jZXNhclZlbnRhKTsiXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\franc\\\\\\\\Documents\\\\\\\\oliver-2\\\\\\\\sitio-desa\\\\\\\\pages\\\\\\\\procesarVenta\\\\\\\\[[...params]].js */\"));\n};\n\n_s(ProcesarVenta, \"CuHC/gmkH7n0V0sJOkcbkPBFVeg=\", false, function () {\n  return [useRouter];\n});\n\n_c = ProcesarVenta;\n\nProcesarVenta.getInitialProps = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3) {\n    var query, collection_id, collection_status, external_reference, merchant, account_id, merchant_order_id, payment_id, payment_type, preference_id, processing_mode, site_id, status;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            query = _ref3.query;\n            collection_id = query.collection_id, collection_status = query.collection_status, external_reference = query.external_reference, merchant = query.merchant, account_id = query.account_id, merchant_order_id = query.merchant_order_id, payment_id = query.payment_id, payment_type = query.payment_type, preference_id = query.preference_id, processing_mode = query.processing_mode, site_id = query.site_id, status = query.status;\n            return _context3.abrupt(\"return\", {\n              collection_id: collection_id,\n              collection_status: collection_status,\n              external_reference: external_reference,\n              merchant: merchant,\n              account_id: account_id,\n              merchant_order_id: merchant_order_id,\n              payment_id: payment_id,\n              payment_type: payment_type,\n              preference_id: preference_id,\n              processing_mode: processing_mode,\n              site_id: site_id,\n              status: status\n            });\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nvar mapStateToProps = function mapStateToProps(_ref5) {\n  var carritoReducer = _ref5.carritoReducer,\n      enviosReducer = _ref5.enviosReducer,\n      usuarioReducer = _ref5.usuarioReducer;\n  return {\n    carritoReducer: carritoReducer,\n    enviosReducer: enviosReducer,\n    usuarioReducer: usuarioReducer\n  };\n};\n\nvar mapDispatchToProps = {\n  enviosGuardar: enviosGuardar,\n  carritoTraerProductos: carritoTraerProductos\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ProcesarVenta);\n\nvar _c;\n\n$RefreshReg$(_c, \"ProcesarVenta\");","map":{"version":3,"sources":["C:/Users/franc/Documents/oliver-2/sitio-desa/pages/procesarVenta/[[...params]].js"],"names":["Head","Loader","useRouter","connect","carritoActions","enviosActions","useEffect","enviosGuardar","guardar","carritoTraerProductos","traerProductos","ProcesarVenta","props","usuarioReducer","logueado","getData","dataEnvio","JSON","parse","localStorage","getItem","idUsuario","usuario","carritoReducer","subtotal","porcentaje_descuento","descuento","total","productos","zona","tipo","dataToRequest","envio","idZona","venta","registrarVenta","data","console","log","router","getInitialProps","query","collection_id","collection_status","external_reference","merchant","account_id","merchant_order_id","payment_id","payment_type","preference_id","processing_mode","site_id","status","mapStateToProps","enviosReducer","mapDispatchToProps"],"mappings":"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","sourcesContent":["import Head from '../../src/components/Head';\r\nimport Loader from '../../src/components/Loader';\r\nimport {useRouter} from 'next/router';\r\nimport {connect} from 'react-redux';\r\nimport * as carritoActions from '../../store/actions/carritoActions';\r\nimport * as enviosActions from '../../store/actions/enviosActions';\r\nimport { useEffect } from 'react';\r\n\r\nconst {guardar:enviosGuardar} = enviosActions;\r\nconst {traerProductos:carritoTraerProductos} = carritoActions;\r\n\r\nconst ProcesarVenta = (props) => {\r\n    useEffect(() => {\r\n        if(props.usuarioReducer.logueado){\r\n            getData();\r\n        }\r\n    }, [props.usuarioReducer]);\r\n\r\n    const getData = async()=>{\r\n        const dataEnvio = JSON.parse(localStorage.getItem('dataEnvio'));\r\n        props.enviosGuardar(dataEnvio);\r\n        props.carritoTraerProductos();\r\n        const {idUsuario} = props.usuarioReducer.usuario;\r\n        const {subtotal,porcentaje_descuento,descuento,total,productos} = props.carritoReducer;\r\n        const {zona,tipo} = dataEnvio;\r\n        let dataToRequest = {\r\n            envio:{\r\n                idZona:zona,\r\n                tipo\r\n            },\r\n            venta:{\r\n                subtotal,\r\n                porcentaje_descuento,\r\n                descuento,\r\n                total,\r\n                idUsuario,\r\n                productos\r\n            }\r\n        }\r\n        return registrarVenta(dataToRequest);\r\n    }\r\n\r\n    const registrarVenta = async data=>{\r\n\r\n    }\r\n\r\n    console.log(props);\r\n    const router = useRouter();\r\n    return (\r\n        <>\r\n            <Head title=\"Finalizacion de compra\" metadesc=\"\"/>\r\n            <div>\r\n                <Loader/>\r\n            </div>\r\n\r\n            <style jsx>{`\r\n                div{\r\n                    display:flex;\r\n                    align-items:center\r\n                }    \r\n            `}</style>\r\n        </>\r\n    );\r\n}\r\n\r\nProcesarVenta.getInitialProps = async({query})=>{\r\n    const {collection_id,collection_status,external_reference,merchant,account_id,merchant_order_id,payment_id,payment_type,preference_id,processing_mode,site_id,status} = query;\r\n    return {collection_id,collection_status,external_reference,merchant,account_id,merchant_order_id,payment_id,payment_type,preference_id,processing_mode,site_id,status};\r\n}\r\n\r\nconst mapStateToProps = ({carritoReducer,enviosReducer,usuarioReducer})=>{\r\n    return {carritoReducer,enviosReducer,usuarioReducer}\r\n};\r\nconst mapDispatchToProps = {\r\n    enviosGuardar,\r\n    carritoTraerProductos\r\n}\r\n \r\nexport default connect(mapStateToProps,mapDispatchToProps)(ProcesarVenta);"]},"metadata":{},"sourceType":"module"}