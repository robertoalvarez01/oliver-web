{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { API } from '../../config/index';\nimport { TRAER_INFO, LOGIN, LOGOUT, LOADING, ERROR } from '../types/usuarioTypes';\nexport var login = function login(data) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var headers;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch({\n                type: LOADING\n              });\n              _context.prev = 1;\n              headers = new Headers();\n              headers.append(\"Content-Type\", \"application/json\");\n              return _context.abrupt(\"return\", fetch(\"\".concat(API, \"/login\"), {\n                method: 'POST',\n                body: JSON.stringify(data),\n                headers: headers\n              }).then(function (res) {\n                return res.json();\n              }).then(function (response) {\n                if (response.ok) {\n                  localStorage.setItem('usuario', JSON.stringify(response.usuario));\n                  dispatch({\n                    type: LOGIN,\n                    payload: response.usuario\n                  });\n                }\n              }));\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](1);\n              dispatch({\n                type: ERROR,\n                payload: _context.t0\n              });\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 7]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var logout = function logout() {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              dispatch({\n                type: LOGIN\n              });\n              _context2.prev = 1;\n              localStorage.removeItem('usuario');\n              return _context2.abrupt(\"return\", dispatch({\n                type: LOGOUT\n              }));\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](1);\n              dispatch({\n                type: ERROR,\n                payload: _context2.t0\n              });\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 6]]);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var traerInfo = function traerInfo() {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      var usuario, dataUsuario;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              usuario = getState().usuarioReducer.usuario;\n\n              if (!usuario) {\n                _context3.next = 4;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", getState().usuarioReducer);\n\n            case 4:\n              dataUsuario = localStorage.getItem('usuario');\n              dispatch({\n                type: TRAER_INFO,\n                payload: JSON.parse(dataUsuario)\n              });\n              _context3.next = 11;\n              break;\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](0);\n              dispatch({\n                type: ERROR,\n                payload: _context3.t0\n              });\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 8]]);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"sources":["C:/Users/franc/Documents/oliver-2/sitio-desa/store/actions/usuarioActions.js"],"names":["API","TRAER_INFO","LOGIN","LOGOUT","LOADING","ERROR","login","data","dispatch","type","headers","Headers","append","fetch","method","body","JSON","stringify","then","res","json","response","ok","localStorage","setItem","usuario","payload","logout","removeItem","traerInfo","getState","usuarioReducer","dataUsuario","getItem","parse"],"mappings":";;AAAA,SAAQA,GAAR,QAAkB,oBAAlB;AACA,SAAQC,UAAR,EAAmBC,KAAnB,EAAyBC,MAAzB,EAAgCC,OAAhC,EAAwCC,KAAxC,QAAoD,uBAApD;AAEA,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,IAAD;AAAA;AAAA,wEAAQ,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBA,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACL;AADA,eAAD,CAAR;AADyB;AAKjBM,cAAAA,OALiB,GAKP,IAAIC,OAAJ,EALO;AAMrBD,cAAAA,OAAO,CAACE,MAAR,CAAe,cAAf,EAA+B,kBAA/B;AANqB,+CAOdC,KAAK,WAAIb,GAAJ,aAAgB;AACxBc,gBAAAA,MAAM,EAAC,MADiB;AAExBC,gBAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAeV,IAAf,CAFmB;AAGxBG,gBAAAA,OAAO,EAAPA;AAHwB,eAAhB,CAAL,CAIJQ,IAJI,CAIC,UAAAC,GAAG;AAAA,uBAAEA,GAAG,CAACC,IAAJ,EAAF;AAAA,eAJJ,EAIkBF,IAJlB,CAIuB,UAAAG,QAAQ,EAAE;AACpC,oBAAGA,QAAQ,CAACC,EAAZ,EAAe;AACXC,kBAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAA+BR,IAAI,CAACC,SAAL,CAAeI,QAAQ,CAACI,OAAxB,CAA/B;AACAjB,kBAAAA,QAAQ,CAAC;AACLC,oBAAAA,IAAI,EAACP,KADA;AAELwB,oBAAAA,OAAO,EAACL,QAAQ,CAACI;AAFZ,mBAAD,CAAR;AAIH;AACJ,eAZM,CAPc;;AAAA;AAAA;AAAA;AAqBrBjB,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACJ,KADA;AAELqB,gBAAAA,OAAO;AAFF,eAAD,CAAR;;AArBqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAR;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAd;AA4BP,OAAO,IAAMC,MAAM,GAAG,SAATA,MAAS;AAAA;AAAA,yEAAI,kBAAMnB,QAAN;AAAA;AAAA;AAAA;AAAA;AACtBA,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACP;AADA,eAAD,CAAR;AADsB;AAKlBqB,cAAAA,YAAY,CAACK,UAAb,CAAwB,SAAxB;AALkB,gDAMXpB,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACN;AADO,eAAD,CANG;;AAAA;AAAA;AAAA;AAUlBK,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACJ,KADA;AAELqB,gBAAAA,OAAO;AAFF,eAAD,CAAR;;AAVkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAf;AAiBP,OAAO,IAAMG,SAAS,GAAC,SAAVA,SAAU;AAAA;AAAA,yEAAI,kBAAMrB,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEZiB,cAAAA,OAFY,GAEDK,QAAQ,GAAGC,cAFV,CAEZN,OAFY;;AAAA,mBAGhBA,OAHgB;AAAA;AAAA;AAAA;;AAAA,gDAIRK,QAAQ,GAAGC,cAJH;;AAAA;AAMfC,cAAAA,WANe,GAMDT,YAAY,CAACU,OAAb,CAAqB,SAArB,CANC;AAOnBzB,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACR,UADA;AAELyB,gBAAAA,OAAO,EAACV,IAAI,CAACkB,KAAL,CAAWF,WAAX;AAFH,eAAD,CAAR;AAPmB;AAAA;;AAAA;AAAA;AAAA;AAYnBxB,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACJ,KADA;AAELqB,gBAAAA,OAAO;AAFF,eAAD,CAAR;;AAZmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhB","sourcesContent":["import {API} from '../../config/index';\r\nimport {TRAER_INFO,LOGIN,LOGOUT,LOADING,ERROR} from '../types/usuarioTypes';\r\n\r\nexport const login = (data)=>async(dispatch)=>{\r\n    dispatch({\r\n        type:LOADING\r\n    });\r\n    try {\r\n        let headers = new Headers();\r\n        headers.append(\"Content-Type\", \"application/json\");\r\n        return fetch(`${API}/login`,{\r\n            method:'POST',\r\n            body:JSON.stringify(data),\r\n            headers\r\n        }).then(res=>res.json()).then(response=>{\r\n            if(response.ok){\r\n                localStorage.setItem('usuario',JSON.stringify(response.usuario));\r\n                dispatch({\r\n                    type:LOGIN,\r\n                    payload:response.usuario\r\n                })\r\n            }\r\n        })\r\n    } catch (error) {\r\n        dispatch({\r\n            type:ERROR,\r\n            payload:error\r\n        })\r\n    }\r\n}\r\n\r\nexport const logout = ()=>async(dispatch)=>{\r\n    dispatch({\r\n        type:LOGIN\r\n    });\r\n    try {\r\n        localStorage.removeItem('usuario');\r\n        return dispatch({\r\n            type:LOGOUT\r\n        })\r\n    } catch (error) {\r\n        dispatch({\r\n            type:ERROR,\r\n            payload:error\r\n        })\r\n    }\r\n}\r\n\r\nexport const traerInfo=()=>async(dispatch)=>{\r\n    try {\r\n        const {usuario} = getState().usuarioReducer;\r\n        if(usuario){\r\n            return getState().usuarioReducer;\r\n        }\r\n        let dataUsuario = localStorage.getItem('usuario');\r\n        dispatch({\r\n            type:TRAER_INFO,\r\n            payload:JSON.parse(dataUsuario)\r\n        })\r\n    } catch (error) {\r\n        dispatch({\r\n            type:ERROR,\r\n            payload:error\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}