{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport CardProducto from '../CardProducto';\nimport { connect } from 'react-redux';\nimport * as productosActions from '../../../store/actions/productosActions';\nimport ProductosStyle from './Productos.module.css';\nimport Loader from '../Loader';\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport FiltroStyle from '../Filtro/Filtro.module.css';\nimport { isMobile } from '../../../helpers';\n\nconst Productos = props => {\n  const {\n    0: filtro,\n    1: setFiltro\n  } = useState('');\n  const {\n    0: rangoProducto,\n    1: setRangoProducto\n  } = useState({\n    desde: 1,\n    limiteDesktop: 20,\n    limiteMobile: 10\n  });\n  useEffect(() => {\n    if (props.location !== '/productos') {\n      if (props.query.search) {\n        mostrarSolapaFiltro(props.query.search);\n      } else {\n        mostrarSolapaFiltro(props.query.index[0]);\n      }\n    } else {\n      getProductos();\n    }\n  }, []);\n  useEffect(() => {\n    if (rangoProducto.desde > 1) {\n      props.traerMas(rangoProducto, props.productos);\n    }\n  }, [rangoProducto]);\n\n  const showFiltrosMobile = () => {\n    document.getElementsByClassName('Filtro_filtros__contanier__3knXf')[0].classList.add(FiltroStyle.show_filtros);\n  };\n\n  const getProductos = async () => {\n    try {\n      await props.traerTodos(rangoProducto);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const mostrarSolapaFiltro = filtro => {\n    setFiltro(filtro);\n  };\n\n  const handleChangeOrdenProductos = event => {\n    if (event.target.value === 'asc') {\n      props.productos.sort((a, b) => {\n        if (a.precioUnidad > b.precioUnidad) return 1;\n        if (a.precioUnidad < b.precioUnidad) return -1;\n        return 0;\n      });\n    } else {\n      props.productos.sort((a, b) => {\n        if (a.precioUnidad < b.precioUnidad) return 1;\n        if (a.precioUnidad > b.precioUnidad) return -1;\n        return 0;\n      });\n    }\n\n    ;\n    return props.ordenarProductos(props.productos);\n  }; //ocultar la chapita que indica el nombre del filtro activo cuando se restablecen los filtros.\n\n\n  if (props.location == '/productos' && filtro != '') {\n    setFiltro('');\n  }\n\n  const cargarMas = () => {\n    if (isMobile()) {\n      setRangoProducto(_objectSpread(_objectSpread({}, rangoProducto), {}, {\n        desde: rangoProducto.desde + rangoProducto.limiteMobile - 1\n      }));\n    } else {\n      setRangoProducto(_objectSpread(_objectSpread({}, rangoProducto), {}, {\n        desde: rangoProducto.desde + rangoProducto.limiteDesktop - 1\n      }));\n    }\n  };\n\n  return __jsx(React.Fragment, null, props.loading || !props.productos ? __jsx(\"div\", {\n    className: \"jsx-2778668712\" + \" \" + \"col-12 text-center\"\n  }, __jsx(Loader, null)) : __jsx(React.Fragment, null, filtro !== '' ? __jsx(\"span\", {\n    id: \"label__filtro-busqueda\",\n    className: \"jsx-2778668712\" + \" \" + (ProductosStyle.label__filtro_busqueda || \"\")\n  }, __jsx(FontAwesomeIcon, {\n    icon: faSearch\n  }), __jsx(\"span\", {\n    className: \"jsx-2778668712\" + \" \" + (ProductosStyle.item_filtro_busqueda || \"\")\n  }, __jsx(\"span\", {\n    id: \"valor-busqueda\",\n    className: \"jsx-2778668712\" + \" \" + \"text-mutedd\"\n  }, filtro))) : null, __jsx(\"div\", {\n    style: {\n      padding: '0px 15px'\n    },\n    className: \"jsx-2778668712\" + \" \" + \"row justify-content-between my-2 align-items-center\"\n  }, __jsx(\"span\", {\n    className: \"jsx-2778668712\" + \" \" + \"text-muted\"\n  }, __jsx(\"b\", {\n    className: \"jsx-2778668712\" + \" \" + \"txt-yellow\"\n  }, props.productos.length), \" productos encontrados\"), __jsx(\"div\", {\n    className: \"jsx-2778668712\" + \" \" + (ProductosStyle.ordenarProductos + ' ' + `d-flex align-items-center` || \"\")\n  }, __jsx(\"span\", {\n    className: \"jsx-2778668712\" + \" \" + \"txt-yellow text-bold mr-2\"\n  }, \"Ordenar por: \"), __jsx(\"select\", {\n    onChange: handleChangeOrdenProductos,\n    className: \"jsx-2778668712\" + \" \" + (ProductosStyle.select_ordenar || \"\")\n  }, __jsx(\"option\", {\n    value: \"desc\",\n    className: \"jsx-2778668712\"\n  }, \"Mayor precio\"), __jsx(\"option\", {\n    value: \"asc\",\n    className: \"jsx-2778668712\"\n  }, \"Menor precio\"))), __jsx(\"button\", {\n    onClick: showFiltrosMobile,\n    className: \"jsx-2778668712\" + \" \" + (`boton bg-yellow mt-3 d-none` + ' ' + ProductosStyle.boton_filtrar_mobile || \"\")\n  }, \"Filtrar\")), __jsx(\"div\", {\n    className: \"jsx-2778668712\" + \" \" + \"row feedProductos\"\n  }, !props.productos ? null : props.productos.map(prd => __jsx(\"div\", {\n    key: prd.idProducto,\n    className: \"jsx-2778668712\" + \" \" + \"col-6 col-md-3\"\n  }, __jsx(CardProducto, {\n    imagen: prd.foto,\n    prd: prd\n  })))), __jsx(\"button\", {\n    onClick: cargarMas,\n    className: \"jsx-2778668712\" + \" \" + \"boton bg-yellow btn-vermas\"\n  }, props.loading_mas ? 'Obteniendo productos...' : 'Cargar mÃ¡s')), __jsx(_JSXStyle, {\n    id: \"2778668712\"\n  }, [\".feedProductos.jsx-2778668712{height:75vh;overflow-y:scroll;}\", \".btn-vermas.jsx-2778668712{position:relative;top:12px;}\", \".feedProductos.jsx-2778668712::-webkit-scrollbar{width:8px;height:5px;}\", \".feedProductos.jsx-2778668712::-webkit-scrollbar-thumb{background:#FFB347;border-radius:4px;}\", \".feedProductos.jsx-2778668712::-webkit-scrollbar-thumb.jsx-2778668712:hover{background:#b3b3b3;box-shadow:0 0 2px 1px rgba(0,0,0,0.2);}\", \"@media(max-width:768px){.feedProductos.jsx-2778668712{height:65vh;overflow-y:scroll;}.feedProductos.jsx-2778668712::-webkit-scrollbar{width:8px;height:10px;}}\"]));\n};\n\nconst mapStateToProps = reducers => {\n  return reducers.productosReducer;\n};\n\nexport default connect(mapStateToProps, productosActions)(Productos);","map":null,"metadata":{},"sourceType":"module"}