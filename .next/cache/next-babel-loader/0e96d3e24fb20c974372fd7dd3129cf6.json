{"ast":null,"code":"import { API } from '../../config/index';\nimport { TRAER_INFO, LOGIN, LOGOUT, LOADING, ERROR } from '../types/usuarioTypes';\nexport const login = data => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    if (data.email.trim() === '' || data.password.trim() === '') {\n      return dispatch({\n        type: ERROR,\n        payload: 'Es necesario completar todos los campos'\n      });\n    }\n\n    let headers = new Headers();\n    headers.append(\"Content-Type\", \"application/json\");\n    return fetch(`${API}/login`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers\n    }).then(res => res.json()).then(response => {\n      if (response.ok) {\n        let objUsuario = {\n          nombre: response.usuario.nombre,\n          email: response.usuario.email,\n          foto: response.usuario.foto\n        };\n        localStorage.setItem('oliverpetshop_usuario', JSON.stringify(objUsuario));\n        dispatch({\n          type: LOGIN,\n          payload: localStorage.getItem('oliverpetshop_usuario')\n        });\n      } else {\n        return dispatch({\n          type: ERROR,\n          payload: response.info\n        });\n      }\n    });\n  } catch (error) {\n    console.log(error);\n    return dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const logout = () => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    localStorage.removeItem('oliverpetshop_usuario');\n    return dispatch({\n      type: LOGOUT\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const traerInfo = () => async dispatch => {\n  try {\n    let dataUsuario = localStorage.getItem('oliverpetshop_usuario');\n    dispatch({\n      type: TRAER_INFO,\n      payload: JSON.parse(dataUsuario)\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};","map":{"version":3,"sources":["C:/Users/franc/Documents/oliver-2/sitio-desa/store/actions/usuarioActions.js"],"names":["API","TRAER_INFO","LOGIN","LOGOUT","LOADING","ERROR","login","data","dispatch","type","email","trim","password","payload","headers","Headers","append","fetch","method","body","JSON","stringify","then","res","json","response","ok","objUsuario","nombre","usuario","foto","localStorage","setItem","getItem","info","error","console","log","logout","removeItem","traerInfo","dataUsuario","parse"],"mappings":"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","sourcesContent":["import {API} from '../../config/index';\r\nimport {TRAER_INFO,LOGIN,LOGOUT,LOADING,ERROR} from '../types/usuarioTypes';\r\n\r\nexport const login = (data)=>async(dispatch)=>{\r\n    dispatch({\r\n        type:LOADING\r\n    });\r\n    try {\r\n        if(data.email.trim() === '' || data.password.trim() === ''){\r\n            return dispatch({\r\n                type:ERROR,\r\n                payload:'Es necesario completar todos los campos'\r\n            })\r\n        }\r\n        let headers = new Headers();\r\n        headers.append(\"Content-Type\", \"application/json\");\r\n        return fetch(`${API}/login`,{\r\n            method:'POST',\r\n            body:JSON.stringify(data),\r\n            headers\r\n        }).then(res=>res.json()).then(response=>{\r\n            if(response.ok){\r\n                let objUsuario = {\r\n                    nombre:response.usuario.nombre,\r\n                    email:response.usuario.email,\r\n                    foto:response.usuario.foto\r\n                }\r\n                localStorage.setItem('oliverpetshop_usuario',JSON.stringify(objUsuario));\r\n                dispatch({\r\n                    type:LOGIN,\r\n                    payload:localStorage.getItem('oliverpetshop_usuario')\r\n                })\r\n            }else{\r\n                return dispatch({\r\n                    type:ERROR,\r\n                    payload:response.info\r\n                })\r\n            }\r\n        })\r\n    } catch (error) {\r\n        console.log(error);\r\n        return dispatch({\r\n            type:ERROR,\r\n            payload:error\r\n        })\r\n    }\r\n}\r\n\r\nexport const logout = ()=>async(dispatch)=>{\r\n    dispatch({\r\n        type:LOADING\r\n    });\r\n    try {\r\n        localStorage.removeItem('oliverpetshop_usuario');\r\n        return dispatch({\r\n            type:LOGOUT\r\n        })\r\n    } catch (error) {\r\n        dispatch({\r\n            type:ERROR,\r\n            payload:error\r\n        })\r\n    }\r\n}\r\n\r\nexport const traerInfo=()=>async(dispatch)=>{\r\n    try {\r\n        let dataUsuario = localStorage.getItem('oliverpetshop_usuario');\r\n        dispatch({\r\n            type:TRAER_INFO,\r\n            payload:JSON.parse(dataUsuario)\r\n        })\r\n    } catch (error) {\r\n        dispatch({\r\n            type:ERROR,\r\n            payload:error\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}