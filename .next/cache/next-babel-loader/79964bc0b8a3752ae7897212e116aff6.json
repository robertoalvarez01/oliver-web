{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { API } from '../../config/index';\nimport { VERIFICAR_SESION, LOGIN, LOGOUT, LOADING, ERROR, UPDATE_USER, UPDATE_PASSWORD } from '../types/usuarioTypes';\nexport var login = function login(data) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var headers;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch({\n                type: LOADING\n              });\n              _context.prev = 1;\n\n              if (!(data.email.trim() === '' || data.password.trim() === '')) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: 'Es necesario completar todos los campos'\n              }));\n\n            case 4:\n              headers = new Headers();\n              headers.append(\"Content-Type\", \"application/json\");\n              return _context.abrupt(\"return\", fetch(\"\".concat(API, \"/login\"), {\n                method: 'POST',\n                body: JSON.stringify(data),\n                headers: headers\n              }).then(function (res) {\n                return res.json();\n              }).then(function (response) {\n                if (response.ok) {\n                  var objUsuario = {\n                    nombre: response.usuario.nombre,\n                    email: response.usuario.email,\n                    foto: response.usuario.foto,\n                    token: response.token,\n                    address: response.usuario.ubicacion,\n                    idUsuario: response.usuario.idUsuario,\n                    lat: response.usuario.lat,\n                    lon: response.usuario.lon,\n                    telefono: response.usuario.telefono\n                  };\n                  localStorage.setItem('oliverpetshop_usuario', JSON.stringify(objUsuario));\n                  dispatch({\n                    type: LOGIN,\n                    payload: localStorage.getItem('oliverpetshop_usuario')\n                  });\n                } else {\n                  return dispatch({\n                    type: ERROR,\n                    payload: response.info\n                  });\n                }\n              }));\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n              return _context.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: _context.t0\n              }));\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var logout = function logout() {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              dispatch({\n                type: LOADING\n              });\n              _context2.prev = 1;\n              localStorage.removeItem('oliverpetshop_usuario');\n              return _context2.abrupt(\"return\", dispatch({\n                type: LOGOUT\n              }));\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](1);\n              dispatch({\n                type: ERROR,\n                payload: _context2.t0\n              });\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 6]]);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var verificarSesion = function verificarSesion() {\n  var token = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      var dataUsuario, headers, tokenSend, request;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              dataUsuario = JSON.parse(localStorage.getItem('oliverpetshop_usuario'));\n\n              if (!dataUsuario) {\n                _context3.next = 12;\n                break;\n              }\n\n              // request para verificar que el token corresponda a una sesion activa\n              headers = new Headers();\n              tokenSend = token ? token : dataUsuario.token;\n              headers.append('token', tokenSend);\n              _context3.next = 8;\n              return fetch(\"\".concat(API, \"verify-sesion\"), {\n                method: 'GET',\n                headers: headers\n              });\n\n            case 8:\n              request = _context3.sent;\n\n              if (!(request.status != 200)) {\n                _context3.next = 11;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", dispatch({\n                type: VERIFICAR_SESION,\n                payload: {\n                  data: null,\n                  logueado: false\n                }\n              }));\n\n            case 11:\n              return _context3.abrupt(\"return\", dispatch({\n                type: VERIFICAR_SESION,\n                payload: {\n                  data: dataUsuario,\n                  logueado: true\n                }\n              }));\n\n            case 12:\n              return _context3.abrupt(\"return\", dispatch({\n                type: VERIFICAR_SESION,\n                payload: {\n                  data: null,\n                  logueado: false\n                }\n              }));\n\n            case 15:\n              _context3.prev = 15;\n              _context3.t0 = _context3[\"catch\"](0);\n              dispatch({\n                type: ERROR,\n                payload: _context3.t0\n              });\n\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 15]]);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\nexport var register = function register(data) {\n  return function (dispatch) {\n    dispatch({\n      type: LOADING\n    });\n\n    try {\n      var headers = new Headers();\n      headers.append(\"Content-Type\", \"application/json\");\n      return fetch(\"\".concat(API, \"register\"), {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: headers\n      }).then(function (res) {\n        return res.json();\n      }).then(function (response) {\n        if (response.ok) {\n          var objUsuario = {\n            nombre: response.usuario.nombre,\n            email: response.usuario.email,\n            foto: response.usuario.foto,\n            token: response.token,\n            address: response.usuario.address,\n            idUsuario: response.usuario.idUsuario\n          };\n          localStorage.setItem('oliverpetshop_usuario', JSON.stringify(objUsuario));\n          dispatch({\n            type: LOGIN,\n            payload: localStorage.getItem('oliverpetshop_usuario')\n          });\n        } else {\n          dispatch({\n            type: ERROR,\n            payload: response.info\n          });\n        }\n      });\n    } catch (error) {\n      dispatch({\n        type: ERROR,\n        payload: error\n      });\n    }\n  };\n};\nexport var singInWithGoogle = function singInWithGoogle(tokenId) {\n  return /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch) {\n      var headers;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              dispatch({\n                type: LOADING\n              });\n              _context4.prev = 1;\n              headers = new Headers();\n              headers.append(\"Content-Type\", \"application/json\");\n              return _context4.abrupt(\"return\", fetch(\"\".concat(API, \"google/tokensignin\"), {\n                method: 'POST',\n                headers: headers,\n                body: JSON.stringify({\n                  token: tokenId\n                })\n              }).then(function (res) {\n                return res.json();\n              }).then(function (response) {\n                if (!response.ok) {\n                  return dispatch({\n                    type: ERROR,\n                    payload: response.info\n                  });\n                }\n\n                ;\n                var objUsuario = {\n                  nombre: response.usuario.nombre,\n                  email: response.usuario.email,\n                  foto: response.usuario.foto,\n                  token: response.token,\n                  address: response.usuario.address,\n                  idUsuario: response.usuario.idUsuario,\n                  lat: response.usuario.lat,\n                  lon: response.usuario.lon,\n                  telefono: response.usuario.telefono\n                };\n                localStorage.setItem('oliverpetshop_usuario', JSON.stringify(objUsuario));\n                dispatch({\n                  type: LOGIN,\n                  payload: localStorage.getItem('oliverpetshop_usuario')\n                });\n              }));\n\n            case 7:\n              _context4.prev = 7;\n              _context4.t0 = _context4[\"catch\"](1);\n              dispatch({\n                type: ERROR,\n                payload: _context4.t0\n              });\n\n            case 10:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[1, 7]]);\n    }));\n\n    return function (_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n};\nexport var actualizarFoto = function actualizarFoto(data, id) {\n  return /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch) {\n      var headers, token, request, _dataRequest;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              dispatch({\n                type: LOADING\n              });\n              _context5.prev = 1;\n              headers = new Headers();\n              token = JSON.parse(localStorage.getItem('oliverpetshop_usuario')).token;\n              headers.append(\"token\", token);\n              _context5.next = 7;\n              return fetch(\"\".concat(API, \"actualizarFotoUsuarioDesdeWeb/\").concat(id), {\n                method: 'PUT',\n                headers: headers,\n                body: data\n              });\n\n            case 7:\n              request = _context5.sent;\n              _context5.next = 10;\n              return request.json();\n\n            case 10:\n              _dataRequest = _context5.sent;\n\n              if (_dataRequest.ok) {\n                localStorage.setItem('oliverpetshop_usuario', JSON.stringify(_dataRequest.user));\n                dispatch({\n                  type: UPDATE_USER,\n                  payload: _dataRequest.user\n                });\n              }\n\n              _context5.next = 17;\n              break;\n\n            case 14:\n              _context5.prev = 14;\n              _context5.t0 = _context5[\"catch\"](1);\n              dispatch({\n                type: ERROR,\n                payload: _context5.t0\n              });\n\n            case 17:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[1, 14]]);\n    }));\n\n    return function (_x5) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n};\nexport var actualizarUsuario = function actualizarUsuario(data, id) {\n  return /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch) {\n      var headers, token, request, _dataRequest2;\n\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              dispatch({\n                type: LOADING\n              });\n              _context6.prev = 1;\n              headers = new Headers();\n              token = JSON.parse(localStorage.getItem('oliverpetshop_usuario')).token;\n\n              if (token) {\n                _context6.next = 6;\n                break;\n              }\n\n              return _context6.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: 'Token incorrecto'\n              }));\n\n            case 6:\n              headers.append('token', token);\n              headers.append(\"Content-Type\", \"application/json\");\n              _context6.next = 10;\n              return fetch(\"\".concat(API, \"actualizarUsuarioDesdeWeb/\").concat(id), {\n                method: 'PUT',\n                headers: headers,\n                body: JSON.stringify(data)\n              });\n\n            case 10:\n              request = _context6.sent;\n\n              if (!(request.status != 200)) {\n                _context6.next = 13;\n                break;\n              }\n\n              return _context6.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: 'Ocurrio un error, ¡intentelo más tarde!'\n              }));\n\n            case 13:\n              _context6.next = 15;\n              return request.json();\n\n            case 15:\n              _dataRequest2 = _context6.sent;\n\n              if (!_dataRequest2.ok) {\n                _context6.next = 19;\n                break;\n              }\n\n              localStorage.setItem('oliverpetshop_usuario', JSON.stringify(_dataRequest2.user));\n              return _context6.abrupt(\"return\", dispatch({\n                type: UPDATE_USER,\n                payload: _dataRequest2.user\n              }));\n\n            case 19:\n              return _context6.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: _dataRequest2.info\n              }));\n\n            case 22:\n              _context6.prev = 22;\n              _context6.t0 = _context6[\"catch\"](1);\n              dispatch({\n                type: ERROR,\n                payload: _context6.t0.message\n              });\n\n            case 25:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[1, 22]]);\n    }));\n\n    return function (_x6) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n};\nexport var sendEmailForResetPassword = function sendEmailForResetPassword(idUsuario) {\n  return /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch) {\n      var headers, token, request, _dataRequest3;\n\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              dispatch({\n                type: LOADING\n              });\n              _context7.prev = 1;\n              headers = new Headers();\n              token = JSON.parse(localStorage.getItem('oliverpetshop_usuario')).token;\n\n              if (token) {\n                _context7.next = 6;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: 'Token incorrecto'\n              }));\n\n            case 6:\n              headers.append('token', token);\n              headers.append(\"Content-Type\", \"application/json\");\n              _context7.next = 10;\n              return fetch(\"\".concat(API, \"resetPassword\"), {\n                method: 'POST',\n                headers: headers,\n                body: JSON.stringify({\n                  idUsuario: idUsuario\n                })\n              });\n\n            case 10:\n              request = _context7.sent;\n\n              if (!(request.status != 200)) {\n                _context7.next = 13;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: 'Ocurrio un error, ¡intentelo más tarde!'\n              }));\n\n            case 13:\n              _context7.next = 15;\n              return request.json();\n\n            case 15:\n              _dataRequest3 = _context7.sent;\n\n              if (!_dataRequest3.ok) {\n                _context7.next = 18;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", console.log(_dataRequest3));\n\n            case 18:\n              return _context7.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: _dataRequest3.info\n              }));\n\n            case 21:\n              _context7.prev = 21;\n              _context7.t0 = _context7[\"catch\"](1);\n              dispatch({\n                type: ERROR,\n                payload: dataRequest.info\n              });\n\n            case 24:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[1, 21]]);\n    }));\n\n    return function (_x7) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n};\nexport var updatePassword = function updatePassword(data, token) {\n  return /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch) {\n      var headers, request;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              dispatch({\n                type: LOADING\n              });\n              _context8.prev = 1;\n\n              if (!(data.confirmNewPassword === '' || data.newPassword === '')) {\n                _context8.next = 4;\n                break;\n              }\n\n              return _context8.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: 'Los dos campos son obligarios.'\n              }));\n\n            case 4:\n              if (!(data.confirmNewPassword != data.newPassword)) {\n                _context8.next = 6;\n                break;\n              }\n\n              return _context8.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: 'Las contraseñas no coinciden.'\n              }));\n\n            case 6:\n              headers = new Headers();\n              headers.append('refresh-token', token);\n              headers.append(\"Content-Type\", \"application/json\");\n              _context8.next = 11;\n              return fetch(\"\".concat(API, \"new-password\"), {\n                method: 'PUT',\n                headers: headers,\n                body: JSON.stringify(data)\n              });\n\n            case 11:\n              request = _context8.sent;\n\n              if (!(request.status != 200)) {\n                _context8.next = 14;\n                break;\n              }\n\n              return _context8.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: 'Ups, algo ha salido mal...'\n              }));\n\n            case 14:\n              dispatch({\n                type: UPDATE_PASSWORD\n              });\n              return _context8.abrupt(\"return\", setTimeout(function () {\n                window.location.assign('http://localhost:3000');\n              }, 3000));\n\n            case 18:\n              _context8.prev = 18;\n              _context8.t0 = _context8[\"catch\"](1);\n              return _context8.abrupt(\"return\", dispatch({\n                type: ERROR,\n                payload: _context8.t0\n              }));\n\n            case 21:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8, null, [[1, 18]]);\n    }));\n\n    return function (_x8) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"sources":["/home/franco/desarrollo/proyecto_oliver/oliver-web-next/store/actions/usuarioActions.js"],"names":["API","VERIFICAR_SESION","LOGIN","LOGOUT","LOADING","ERROR","UPDATE_USER","UPDATE_PASSWORD","login","data","dispatch","type","email","trim","password","payload","headers","Headers","append","fetch","method","body","JSON","stringify","then","res","json","response","ok","objUsuario","nombre","usuario","foto","token","address","ubicacion","idUsuario","lat","lon","telefono","localStorage","setItem","getItem","info","console","log","logout","removeItem","verificarSesion","dataUsuario","parse","tokenSend","request","status","logueado","register","error","singInWithGoogle","tokenId","actualizarFoto","id","dataRequest","user","actualizarUsuario","message","sendEmailForResetPassword","updatePassword","confirmNewPassword","newPassword","setTimeout","window","location","assign"],"mappings":";;AAAA,SAAQA,GAAR,QAAkB,oBAAlB;AACA,SAAQC,gBAAR,EAAyBC,KAAzB,EAA+BC,MAA/B,EAAsCC,OAAtC,EAA8CC,KAA9C,EAAoDC,WAApD,EAAgEC,eAAhE,QAAsF,uBAAtF;AAEA,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,IAAD;AAAA;AAAA,wEAAQ,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBA,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACP;AADA,eAAD,CAAR;AADyB;;AAAA,oBAKlBK,IAAI,CAACG,KAAL,CAAWC,IAAX,OAAsB,EAAtB,IAA4BJ,IAAI,CAACK,QAAL,CAAcD,IAAd,OAAyB,EALnC;AAAA;AAAA;AAAA;;AAAA,+CAMVH,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACN,KADO;AAEZU,gBAAAA,OAAO,EAAC;AAFI,eAAD,CANE;;AAAA;AAWjBC,cAAAA,OAXiB,GAWP,IAAIC,OAAJ,EAXO;AAYrBD,cAAAA,OAAO,CAACE,MAAR,CAAe,cAAf,EAA+B,kBAA/B;AAZqB,+CAadC,KAAK,WAAInB,GAAJ,aAAgB;AACxBoB,gBAAAA,MAAM,EAAC,MADiB;AAExBC,gBAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAed,IAAf,CAFmB;AAGxBO,gBAAAA,OAAO,EAAPA;AAHwB,eAAhB,CAAL,CAIJQ,IAJI,CAIC,UAAAC,GAAG;AAAA,uBAAEA,GAAG,CAACC,IAAJ,EAAF;AAAA,eAJJ,EAIkBF,IAJlB,CAIuB,UAAAG,QAAQ,EAAE;AACpC,oBAAGA,QAAQ,CAACC,EAAZ,EAAe;AACX,sBAAIC,UAAU,GAAG;AACbC,oBAAAA,MAAM,EAACH,QAAQ,CAACI,OAAT,CAAiBD,MADX;AAEblB,oBAAAA,KAAK,EAACe,QAAQ,CAACI,OAAT,CAAiBnB,KAFV;AAGboB,oBAAAA,IAAI,EAACL,QAAQ,CAACI,OAAT,CAAiBC,IAHT;AAIbC,oBAAAA,KAAK,EAACN,QAAQ,CAACM,KAJF;AAKbC,oBAAAA,OAAO,EAACP,QAAQ,CAACI,OAAT,CAAiBI,SALZ;AAMbC,oBAAAA,SAAS,EAACT,QAAQ,CAACI,OAAT,CAAiBK,SANd;AAObC,oBAAAA,GAAG,EAACV,QAAQ,CAACI,OAAT,CAAiBM,GAPR;AAQbC,oBAAAA,GAAG,EAACX,QAAQ,CAACI,OAAT,CAAiBO,GARR;AASbC,oBAAAA,QAAQ,EAACZ,QAAQ,CAACI,OAAT,CAAiBQ;AATb,mBAAjB;AAWAC,kBAAAA,YAAY,CAACC,OAAb,CAAqB,uBAArB,EAA6CnB,IAAI,CAACC,SAAL,CAAeM,UAAf,CAA7C;AACAnB,kBAAAA,QAAQ,CAAC;AACLC,oBAAAA,IAAI,EAACT,KADA;AAELa,oBAAAA,OAAO,EAACyB,YAAY,CAACE,OAAb,CAAqB,uBAArB;AAFH,mBAAD,CAAR;AAIH,iBAjBD,MAiBK;AACD,yBAAOhC,QAAQ,CAAC;AACZC,oBAAAA,IAAI,EAACN,KADO;AAEZU,oBAAAA,OAAO,EAACY,QAAQ,CAACgB;AAFL,mBAAD,CAAf;AAIH;AACJ,eA5BM,CAbc;;AAAA;AAAA;AAAA;AA2CrBC,cAAAA,OAAO,CAACC,GAAR;AA3CqB,+CA4CdnC,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACN,KADO;AAEZU,gBAAAA,OAAO;AAFK,eAAD,CA5CM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAR;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAd;AAmDP,OAAO,IAAM+B,MAAM,GAAG,SAATA,MAAS;AAAA;AAAA,yEAAI,kBAAMpC,QAAN;AAAA;AAAA;AAAA;AAAA;AACtBA,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACP;AADA,eAAD,CAAR;AADsB;AAKlBoC,cAAAA,YAAY,CAACO,UAAb,CAAwB,uBAAxB;AALkB,gDAMXrC,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACR;AADO,eAAD,CANG;;AAAA;AAAA;AAAA;AAUlBO,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACN,KADA;AAELU,gBAAAA,OAAO;AAFF,eAAD,CAAR;;AAVkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAf;AAiBP,OAAO,IAAMiC,eAAe,GAAC,SAAhBA,eAAgB;AAAA,MAACf,KAAD,uEAAO,IAAP;AAAA;AAAA,yEAAc,kBAAMvB,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE/BuC,cAAAA,WAF+B,GAEjB3B,IAAI,CAAC4B,KAAL,CAAWV,YAAY,CAACE,OAAb,CAAqB,uBAArB,CAAX,CAFiB;;AAAA,mBAGhCO,WAHgC;AAAA;AAAA;AAAA;;AAI/B;AACIjC,cAAAA,OAL2B,GAKjB,IAAIC,OAAJ,EALiB;AAM3BkC,cAAAA,SAN2B,GAMdlB,KAAD,GAAQA,KAAR,GAAcgB,WAAW,CAAChB,KANX;AAO/BjB,cAAAA,OAAO,CAACE,MAAR,CAAe,OAAf,EAAuBiC,SAAvB;AAP+B;AAAA,qBAQThC,KAAK,WAAInB,GAAJ,oBAAuB;AAC9CoB,gBAAAA,MAAM,EAAC,KADuC;AAE9CJ,gBAAAA,OAAO,EAAPA;AAF8C,eAAvB,CARI;;AAAA;AAQzBoC,cAAAA,OARyB;;AAAA,oBAY5BA,OAAO,CAACC,MAAR,IAAgB,GAZY;AAAA;AAAA;AAAA;;AAAA,gDAapB3C,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACV,gBADO;AAEZc,gBAAAA,OAAO,EAAC;AAACN,kBAAAA,IAAI,EAAC,IAAN;AAAW6C,kBAAAA,QAAQ,EAAC;AAApB;AAFI,eAAD,CAbY;;AAAA;AAAA,gDAkBxB5C,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACV,gBADO;AAEZc,gBAAAA,OAAO,EAAC;AAACN,kBAAAA,IAAI,EAACwC,WAAN;AAAkBK,kBAAAA,QAAQ,EAAC;AAA3B;AAFI,eAAD,CAlBgB;;AAAA;AAAA,gDAuB5B5C,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACV,gBADO;AAEZc,gBAAAA,OAAO,EAAC;AAACN,kBAAAA,IAAI,EAAC,IAAN;AAAW6C,kBAAAA,QAAQ,EAAC;AAApB;AAFI,eAAD,CAvBoB;;AAAA;AAAA;AAAA;AA4BnC5C,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACN,KADA;AAELU,gBAAAA,OAAO;AAFF,eAAD,CAAR;;AA5BmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAd;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAtB;AAmCP,OAAO,IAAMwC,QAAQ,GAAC,SAATA,QAAS,CAAC9C,IAAD;AAAA,SAAQ,UAACC,QAAD,EAAY;AACtCA,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAACP;AADA,KAAD,CAAR;;AAGA,QAAI;AACA,UAAIY,OAAO,GAAG,IAAIC,OAAJ,EAAd;AACAD,MAAAA,OAAO,CAACE,MAAR,CAAe,cAAf,EAA+B,kBAA/B;AACA,aAAOC,KAAK,WAAInB,GAAJ,eAAkB;AAC1BoB,QAAAA,MAAM,EAAC,MADmB;AAE1BC,QAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAed,IAAf,CAFqB;AAG1BO,QAAAA,OAAO,EAAPA;AAH0B,OAAlB,CAAL,CAIJQ,IAJI,CAIC,UAAAC,GAAG;AAAA,eAAEA,GAAG,CAACC,IAAJ,EAAF;AAAA,OAJJ,EAIkBF,IAJlB,CAIuB,UAAAG,QAAQ,EAAE;AACpC,YAAGA,QAAQ,CAACC,EAAZ,EAAe;AACX,cAAIC,UAAU,GAAG;AACbC,YAAAA,MAAM,EAACH,QAAQ,CAACI,OAAT,CAAiBD,MADX;AAEblB,YAAAA,KAAK,EAACe,QAAQ,CAACI,OAAT,CAAiBnB,KAFV;AAGboB,YAAAA,IAAI,EAACL,QAAQ,CAACI,OAAT,CAAiBC,IAHT;AAIbC,YAAAA,KAAK,EAACN,QAAQ,CAACM,KAJF;AAKbC,YAAAA,OAAO,EAACP,QAAQ,CAACI,OAAT,CAAiBG,OALZ;AAMbE,YAAAA,SAAS,EAACT,QAAQ,CAACI,OAAT,CAAiBK;AANd,WAAjB;AAQAI,UAAAA,YAAY,CAACC,OAAb,CAAqB,uBAArB,EAA6CnB,IAAI,CAACC,SAAL,CAAeM,UAAf,CAA7C;AACAnB,UAAAA,QAAQ,CAAC;AACLC,YAAAA,IAAI,EAACT,KADA;AAELa,YAAAA,OAAO,EAACyB,YAAY,CAACE,OAAb,CAAqB,uBAArB;AAFH,WAAD,CAAR;AAIH,SAdD,MAcK;AACDhC,UAAAA,QAAQ,CAAC;AACLC,YAAAA,IAAI,EAACN,KADA;AAELU,YAAAA,OAAO,EAACY,QAAQ,CAACgB;AAFZ,WAAD,CAAR;AAIH;AACJ,OAzBM,CAAP;AA0BH,KA7BD,CA6BE,OAAOa,KAAP,EAAc;AACZ9C,MAAAA,QAAQ,CAAC;AACLC,QAAAA,IAAI,EAACN,KADA;AAELU,QAAAA,OAAO,EAACyC;AAFH,OAAD,CAAR;AAIH;AACJ,GAvCqB;AAAA,CAAf;AAyCP,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,OAAO;AAAA;AAAA,yEAAI,kBAAMhD,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACvCA,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACP;AADA,eAAD,CAAR;AADuC;AAK/BY,cAAAA,OAL+B,GAKrB,IAAIC,OAAJ,EALqB;AAMnCD,cAAAA,OAAO,CAACE,MAAR,CAAe,cAAf,EAA+B,kBAA/B;AANmC,gDAO5BC,KAAK,WAAInB,GAAJ,yBAA4B;AACpCoB,gBAAAA,MAAM,EAAC,MAD6B;AAEpCJ,gBAAAA,OAAO,EAAPA,OAFoC;AAGpCK,gBAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AAACU,kBAAAA,KAAK,EAACyB;AAAP,iBAAf;AAH+B,eAA5B,CAAL,CAIJlC,IAJI,CAIC,UAAAC,GAAG;AAAA,uBAAEA,GAAG,CAACC,IAAJ,EAAF;AAAA,eAJJ,EAIkBF,IAJlB,CAIuB,UAAAG,QAAQ,EAAE;AACpC,oBAAG,CAACA,QAAQ,CAACC,EAAb,EAAgB;AACZ,yBAAOlB,QAAQ,CAAC;AACZC,oBAAAA,IAAI,EAACN,KADO;AAEZU,oBAAAA,OAAO,EAACY,QAAQ,CAACgB;AAFL,mBAAD,CAAf;AAIH;;AAAA;AACD,oBAAId,UAAU,GAAG;AACbC,kBAAAA,MAAM,EAACH,QAAQ,CAACI,OAAT,CAAiBD,MADX;AAEblB,kBAAAA,KAAK,EAACe,QAAQ,CAACI,OAAT,CAAiBnB,KAFV;AAGboB,kBAAAA,IAAI,EAACL,QAAQ,CAACI,OAAT,CAAiBC,IAHT;AAIbC,kBAAAA,KAAK,EAACN,QAAQ,CAACM,KAJF;AAKbC,kBAAAA,OAAO,EAACP,QAAQ,CAACI,OAAT,CAAiBG,OALZ;AAMbE,kBAAAA,SAAS,EAACT,QAAQ,CAACI,OAAT,CAAiBK,SANd;AAObC,kBAAAA,GAAG,EAACV,QAAQ,CAACI,OAAT,CAAiBM,GAPR;AAQbC,kBAAAA,GAAG,EAACX,QAAQ,CAACI,OAAT,CAAiBO,GARR;AASbC,kBAAAA,QAAQ,EAACZ,QAAQ,CAACI,OAAT,CAAiBQ;AATb,iBAAjB;AAWAC,gBAAAA,YAAY,CAACC,OAAb,CAAqB,uBAArB,EAA6CnB,IAAI,CAACC,SAAL,CAAeM,UAAf,CAA7C;AACAnB,gBAAAA,QAAQ,CAAC;AACLC,kBAAAA,IAAI,EAACT,KADA;AAELa,kBAAAA,OAAO,EAACyB,YAAY,CAACE,OAAb,CAAqB,uBAArB;AAFH,iBAAD,CAAR;AAIH,eA3BM,CAP4B;;AAAA;AAAA;AAAA;AAoCnChC,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACN,KADA;AAELU,gBAAAA,OAAO;AAFF,eAAD,CAAR;;AApCmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhC;AA2CP,OAAO,IAAM4C,cAAc,GAAG,SAAjBA,cAAiB,CAAClD,IAAD,EAAMmD,EAAN;AAAA;AAAA,yEAAY,kBAAMlD,QAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACtCA,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACP;AADA,eAAD,CAAR;AADsC;AAK9BY,cAAAA,OAL8B,GAKpB,IAAIC,OAAJ,EALoB;AAM9BgB,cAAAA,KAN8B,GAMtBX,IAAI,CAAC4B,KAAL,CAAWV,YAAY,CAACE,OAAb,CAAqB,uBAArB,CAAX,EAA0DT,KANpC;AAOlCjB,cAAAA,OAAO,CAACE,MAAR,CAAe,OAAf,EAAwBe,KAAxB;AAPkC;AAAA,qBAQZd,KAAK,WAAInB,GAAJ,2CAAwC4D,EAAxC,GAA6C;AACpExC,gBAAAA,MAAM,EAAC,KAD6D;AAEpEJ,gBAAAA,OAAO,EAAPA,OAFoE;AAGpEK,gBAAAA,IAAI,EAACZ;AAH+D,eAA7C,CARO;;AAAA;AAQ5B2C,cAAAA,OAR4B;AAAA;AAAA,qBAaRA,OAAO,CAAC1B,IAAR,EAbQ;;AAAA;AAa5BmC,cAAAA,YAb4B;;AAclC,kBAAGA,YAAW,CAACjC,EAAf,EAAkB;AACdY,gBAAAA,YAAY,CAACC,OAAb,CAAqB,uBAArB,EAA6CnB,IAAI,CAACC,SAAL,CAAesC,YAAW,CAACC,IAA3B,CAA7C;AACApD,gBAAAA,QAAQ,CAAC;AACLC,kBAAAA,IAAI,EAACL,WADA;AAELS,kBAAAA,OAAO,EAAC8C,YAAW,CAACC;AAFf,iBAAD,CAAR;AAIH;;AApBiC;AAAA;;AAAA;AAAA;AAAA;AAsBlCpD,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACN,KADA;AAELU,gBAAAA,OAAO;AAFF,eAAD,CAAR;;AAtBkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAZ;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAvB;AA6BP,OAAO,IAAMgD,iBAAiB,GAAG,SAApBA,iBAAoB,CAACtD,IAAD,EAAMmD,EAAN;AAAA;AAAA,yEAAW,kBAAMlD,QAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACxCA,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACP;AADA,eAAD,CAAR;AADwC;AAKhCY,cAAAA,OALgC,GAKtB,IAAIC,OAAJ,EALsB;AAMhCgB,cAAAA,KANgC,GAMxBX,IAAI,CAAC4B,KAAL,CAAWV,YAAY,CAACE,OAAb,CAAqB,uBAArB,CAAX,EAA0DT,KANlC;;AAAA,kBAOhCA,KAPgC;AAAA;AAAA;AAAA;;AAAA,gDAOlBvB,QAAQ,CAAC;AAACC,gBAAAA,IAAI,EAACN,KAAN;AAAYU,gBAAAA,OAAO,EAAC;AAApB,eAAD,CAPU;;AAAA;AAQpCC,cAAAA,OAAO,CAACE,MAAR,CAAe,OAAf,EAAuBe,KAAvB;AACAjB,cAAAA,OAAO,CAACE,MAAR,CAAe,cAAf,EAA+B,kBAA/B;AAToC;AAAA,qBAUdC,KAAK,WAAInB,GAAJ,uCAAoC4D,EAApC,GAAyC;AAChExC,gBAAAA,MAAM,EAAC,KADyD;AAEhEJ,gBAAAA,OAAO,EAAPA,OAFgE;AAGhEK,gBAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAed,IAAf;AAH2D,eAAzC,CAVS;;AAAA;AAU9B2C,cAAAA,OAV8B;;AAAA,oBAejCA,OAAO,CAACC,MAAR,IAAgB,GAfiB;AAAA;AAAA;AAAA;;AAAA,gDAeL3C,QAAQ,CAAC;AAACC,gBAAAA,IAAI,EAACN,KAAN;AAAYU,gBAAAA,OAAO,EAAC;AAApB,eAAD,CAfH;;AAAA;AAAA;AAAA,qBAgBVqC,OAAO,CAAC1B,IAAR,EAhBU;;AAAA;AAgB9BmC,cAAAA,aAhB8B;;AAAA,mBAiBjCA,aAAW,CAACjC,EAjBqB;AAAA;AAAA;AAAA;;AAkBhCY,cAAAA,YAAY,CAACC,OAAb,CAAqB,uBAArB,EAA6CnB,IAAI,CAACC,SAAL,CAAesC,aAAW,CAACC,IAA3B,CAA7C;AAlBgC,gDAmBzBpD,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACL,WADO;AAEZS,gBAAAA,OAAO,EAAC8C,aAAW,CAACC;AAFR,eAAD,CAnBiB;;AAAA;AAAA,gDAwB7BpD,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACN,KADO;AAEZU,gBAAAA,OAAO,EAAC8C,aAAW,CAAClB;AAFR,eAAD,CAxBqB;;AAAA;AAAA;AAAA;AA6BpCjC,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACN,KADA;AAELU,gBAAAA,OAAO,EAAC,aAAMiD;AAFT,eAAD,CAAR;;AA7BoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAX;;AAAA;AAAA;AAAA;AAAA;AAAA,CAA1B;AAoCP,OAAO,IAAMC,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAA7B,SAAS;AAAA;AAAA,yEAAG,kBAAM1B,QAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACjDA,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACP;AADA,eAAD,CAAR;AADiD;AAKzCY,cAAAA,OALyC,GAK/B,IAAIC,OAAJ,EAL+B;AAMzCgB,cAAAA,KANyC,GAMjCX,IAAI,CAAC4B,KAAL,CAAWV,YAAY,CAACE,OAAb,CAAqB,uBAArB,CAAX,EAA0DT,KANzB;;AAAA,kBAOzCA,KAPyC;AAAA;AAAA;AAAA;;AAAA,gDAO3BvB,QAAQ,CAAC;AAACC,gBAAAA,IAAI,EAACN,KAAN;AAAYU,gBAAAA,OAAO,EAAC;AAApB,eAAD,CAPmB;;AAAA;AAQ7CC,cAAAA,OAAO,CAACE,MAAR,CAAe,OAAf,EAAuBe,KAAvB;AACAjB,cAAAA,OAAO,CAACE,MAAR,CAAe,cAAf,EAA+B,kBAA/B;AAT6C;AAAA,qBAUvBC,KAAK,WAAInB,GAAJ,oBAAuB;AAC9CoB,gBAAAA,MAAM,EAAC,MADuC;AAE9CJ,gBAAAA,OAAO,EAAPA,OAF8C;AAG9CK,gBAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AAACa,kBAAAA,SAAS,EAATA;AAAD,iBAAf;AAHyC,eAAvB,CAVkB;;AAAA;AAUvCgB,cAAAA,OAVuC;;AAAA,oBAe1CA,OAAO,CAACC,MAAR,IAAgB,GAf0B;AAAA;AAAA;AAAA;;AAAA,gDAed3C,QAAQ,CAAC;AAACC,gBAAAA,IAAI,EAACN,KAAN;AAAYU,gBAAAA,OAAO,EAAC;AAApB,eAAD,CAfM;;AAAA;AAAA;AAAA,qBAgBnBqC,OAAO,CAAC1B,IAAR,EAhBmB;;AAAA;AAgBvCmC,cAAAA,aAhBuC;;AAAA,mBAiB1CA,aAAW,CAACjC,EAjB8B;AAAA;AAAA;AAAA;;AAAA,gDAkBlCgB,OAAO,CAACC,GAAR,CAAYgB,aAAZ,CAlBkC;;AAAA;AAAA,gDAoBtCnD,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACN,KADO;AAEZU,gBAAAA,OAAO,EAAC8C,aAAW,CAAClB;AAFR,eAAD,CApB8B;;AAAA;AAAA;AAAA;AAyB7CjC,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACN,KADA;AAELU,gBAAAA,OAAO,EAAC8C,WAAW,CAAClB;AAFf,eAAD,CAAR;;AAzB6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3C;AAgCP,OAAO,IAAMuB,cAAc,GAAG,SAAjBA,cAAiB,CAACzD,IAAD,EAAMwB,KAAN;AAAA;AAAA,yEAAgB,kBAAMvB,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAC1CA,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACP;AADA,eAAD,CAAR;AAD0C;;AAAA,oBAKnCK,IAAI,CAAC0D,kBAAL,KAA4B,EAA5B,IAAkC1D,IAAI,CAAC2D,WAAL,KAAoB,EALnB;AAAA;AAAA;AAAA;;AAAA,gDAM3B1D,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACN,KADO;AAEZU,gBAAAA,OAAO,EAAC;AAFI,eAAD,CANmB;;AAAA;AAAA,oBAWnCN,IAAI,CAAC0D,kBAAL,IAA2B1D,IAAI,CAAC2D,WAXG;AAAA;AAAA;AAAA;;AAAA,gDAY3B1D,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACN,KADO;AAEZU,gBAAAA,OAAO,EAAC;AAFI,eAAD,CAZmB;;AAAA;AAiBlCC,cAAAA,OAjBkC,GAiBxB,IAAIC,OAAJ,EAjBwB;AAkBtCD,cAAAA,OAAO,CAACE,MAAR,CAAe,eAAf,EAA+Be,KAA/B;AACAjB,cAAAA,OAAO,CAACE,MAAR,CAAe,cAAf,EAA+B,kBAA/B;AAnBsC;AAAA,qBAoBhBC,KAAK,WAAInB,GAAJ,mBAAsB;AAC7CoB,gBAAAA,MAAM,EAAC,KADsC;AAE7CJ,gBAAAA,OAAO,EAAPA,OAF6C;AAG7CK,gBAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAed,IAAf;AAHwC,eAAtB,CApBW;;AAAA;AAoBhC2C,cAAAA,OApBgC;;AAAA,oBAyBnCA,OAAO,CAACC,MAAR,IAAgB,GAzBmB;AAAA;AAAA;AAAA;;AAAA,gDAyBP3C,QAAQ,CAAC;AACpCC,gBAAAA,IAAI,EAACN,KAD+B;AAEpCU,gBAAAA,OAAO,EAAC;AAF4B,eAAD,CAzBD;;AAAA;AA6BtCL,cAAAA,QAAQ,CAAC;AACLC,gBAAAA,IAAI,EAACJ;AADA,eAAD,CAAR;AA7BsC,gDAgC/B8D,UAAU,CAAC,YAAM;AACpBC,gBAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,uBAAvB;AACH,eAFgB,EAEd,IAFc,CAhCqB;;AAAA;AAAA;AAAA;AAAA,gDAoC/B9D,QAAQ,CAAC;AACZC,gBAAAA,IAAI,EAACN,KADO;AAEZU,gBAAAA,OAAO;AAFK,eAAD,CApCuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAhB;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAvB","sourcesContent":["import {API} from '../../config/index';\nimport {VERIFICAR_SESION,LOGIN,LOGOUT,LOADING,ERROR,UPDATE_USER,UPDATE_PASSWORD} from '../types/usuarioTypes';\n\nexport const login = (data)=>async(dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        if(data.email.trim() === '' || data.password.trim() === ''){\n            return dispatch({\n                type:ERROR,\n                payload:'Es necesario completar todos los campos'\n            })\n        }\n        let headers = new Headers();\n        headers.append(\"Content-Type\", \"application/json\");\n        return fetch(`${API}/login`,{\n            method:'POST',\n            body:JSON.stringify(data),\n            headers\n        }).then(res=>res.json()).then(response=>{\n            if(response.ok){\n                let objUsuario = {\n                    nombre:response.usuario.nombre,\n                    email:response.usuario.email,\n                    foto:response.usuario.foto,\n                    token:response.token,\n                    address:response.usuario.ubicacion,\n                    idUsuario:response.usuario.idUsuario,\n                    lat:response.usuario.lat,\n                    lon:response.usuario.lon,\n                    telefono:response.usuario.telefono\n                }\n                localStorage.setItem('oliverpetshop_usuario',JSON.stringify(objUsuario));\n                dispatch({\n                    type:LOGIN,\n                    payload:localStorage.getItem('oliverpetshop_usuario')\n                })\n            }else{\n                return dispatch({\n                    type:ERROR,\n                    payload:response.info\n                })\n            }\n        })\n    } catch (error) {\n        console.log(error);\n        return dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const logout = ()=>async(dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        localStorage.removeItem('oliverpetshop_usuario');\n        return dispatch({\n            type:LOGOUT\n        })\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const verificarSesion=(token=null)=>async(dispatch)=>{\n    try {\n        let dataUsuario = JSON.parse(localStorage.getItem('oliverpetshop_usuario'));\n        if(dataUsuario){\n            // request para verificar que el token corresponda a una sesion activa\n            let headers = new Headers();\n            let tokenSend = (token)?token:dataUsuario.token;\n            headers.append('token',tokenSend);\n            const request = await fetch(`${API}verify-sesion`,{\n                method:'GET',\n                headers\n            });\n            if(request.status!=200){\n                return dispatch({\n                    type:VERIFICAR_SESION,\n                    payload:{data:null,logueado:false}\n                })\n            }\n            return dispatch({\n                type:VERIFICAR_SESION,\n                payload:{data:dataUsuario,logueado:true}\n            })\n        }\n        return dispatch({\n            type:VERIFICAR_SESION,\n            payload:{data:null,logueado:false}\n        })\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const register=(data)=>(dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        let headers = new Headers();\n        headers.append(\"Content-Type\", \"application/json\");\n        return fetch(`${API}register`,{\n            method:'POST',\n            body:JSON.stringify(data),\n            headers\n        }).then(res=>res.json()).then(response=>{\n            if(response.ok){\n                let objUsuario = {\n                    nombre:response.usuario.nombre,\n                    email:response.usuario.email,\n                    foto:response.usuario.foto,\n                    token:response.token,\n                    address:response.usuario.address,\n                    idUsuario:response.usuario.idUsuario\n                }\n                localStorage.setItem('oliverpetshop_usuario',JSON.stringify(objUsuario));\n                dispatch({\n                    type:LOGIN,\n                    payload:localStorage.getItem('oliverpetshop_usuario')\n                });\n            }else{\n                dispatch({\n                    type:ERROR,\n                    payload:response.info\n                })\n            }\n        })\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const singInWithGoogle = tokenId => async(dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        let headers = new Headers();\n        headers.append(\"Content-Type\", \"application/json\");\n        return fetch(`${API}google/tokensignin`,{\n            method:'POST',\n            headers,\n            body:JSON.stringify({token:tokenId})\n        }).then(res=>res.json()).then(response=>{\n            if(!response.ok){\n                return dispatch({\n                    type:ERROR,\n                    payload:response.info\n                })\n            };\n            let objUsuario = {\n                nombre:response.usuario.nombre,\n                email:response.usuario.email,\n                foto:response.usuario.foto,\n                token:response.token,\n                address:response.usuario.address,\n                idUsuario:response.usuario.idUsuario,\n                lat:response.usuario.lat,\n                lon:response.usuario.lon,\n                telefono:response.usuario.telefono\n            }\n            localStorage.setItem('oliverpetshop_usuario',JSON.stringify(objUsuario));\n            dispatch({\n                type:LOGIN,\n                payload:localStorage.getItem('oliverpetshop_usuario')\n            });\n        })\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const actualizarFoto = (data,id) =>async(dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        let headers = new Headers();\n        let token = JSON.parse(localStorage.getItem('oliverpetshop_usuario')).token;\n        headers.append(\"token\", token);\n        const request = await fetch(`${API}actualizarFotoUsuarioDesdeWeb/${id}`,{\n            method:'PUT',\n            headers,\n            body:data\n        });\n        const dataRequest = await request.json();\n        if(dataRequest.ok){\n            localStorage.setItem('oliverpetshop_usuario',JSON.stringify(dataRequest.user));\n            dispatch({\n                type:UPDATE_USER,\n                payload:dataRequest.user\n            })\n        }\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const actualizarUsuario = (data,id)=>async dispatch=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        let headers = new Headers();\n        let token = JSON.parse(localStorage.getItem('oliverpetshop_usuario')).token;\n        if(!token) return dispatch({type:ERROR,payload:'Token incorrecto'});\n        headers.append('token',token);\n        headers.append(\"Content-Type\", \"application/json\");\n        const request = await fetch(`${API}actualizarUsuarioDesdeWeb/${id}`,{\n            method:'PUT',\n            headers,\n            body:JSON.stringify(data)\n        });\n        if(request.status!=200) return dispatch({type:ERROR,payload:'Ocurrio un error, ¡intentelo más tarde!'})\n        const dataRequest = await request.json();\n        if(dataRequest.ok){\n            localStorage.setItem('oliverpetshop_usuario',JSON.stringify(dataRequest.user));\n            return dispatch({\n                type:UPDATE_USER,\n                payload:dataRequest.user\n            })\n        }\n        return dispatch({\n            type:ERROR,\n            payload:dataRequest.info\n        })\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error.message\n        })\n    }\n}\n\nexport const sendEmailForResetPassword = idUsuario=> async dispatch=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        let headers = new Headers();\n        let token = JSON.parse(localStorage.getItem('oliverpetshop_usuario')).token;\n        if(!token) return dispatch({type:ERROR,payload:'Token incorrecto'});\n        headers.append('token',token);\n        headers.append(\"Content-Type\", \"application/json\");\n        const request = await fetch(`${API}resetPassword`,{\n            method:'POST',\n            headers,\n            body:JSON.stringify({idUsuario})\n        });\n        if(request.status!=200) return dispatch({type:ERROR,payload:'Ocurrio un error, ¡intentelo más tarde!'})\n        const dataRequest = await request.json();\n        if(dataRequest.ok){\n            return console.log(dataRequest);\n        }\n        return dispatch({\n            type:ERROR,\n            payload:dataRequest.info\n        })\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:dataRequest.info\n        })\n    }\n}\n\nexport const updatePassword = (data,token) => async dispatch=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        if(data.confirmNewPassword === '' || data.newPassword ===''){\n            return dispatch({\n                type:ERROR,\n                payload:'Los dos campos son obligarios.'\n            });\n        }\n        if(data.confirmNewPassword != data.newPassword){\n            return dispatch({\n                type:ERROR,\n                payload:'Las contraseñas no coinciden.'\n            });\n        }\n        let headers = new Headers();\n        headers.append('refresh-token',token);\n        headers.append(\"Content-Type\", \"application/json\");\n        const request = await fetch(`${API}new-password`,{\n            method:'PUT',\n            headers,\n            body:JSON.stringify(data)\n        });\n        if(request.status!=200) return dispatch({\n            type:ERROR,\n            payload:'Ups, algo ha salido mal...'\n        });\n        dispatch({\n            type:UPDATE_PASSWORD\n        });\n        return setTimeout(() => {\n            window.location.assign('http://localhost:3000');\n        }, 3000);\n    } catch (error) {\n        return dispatch({\n            type:ERROR,\n            payload:error\n        });\n    }\n}"]},"metadata":{},"sourceType":"module"}