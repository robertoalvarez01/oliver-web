{"ast":null,"code":"import { API } from '../../config/index';\nimport { TRAER_ZONAS, SELECCIONAR, LOADING, ERROR, LIMPIAR_ACTIVO } from '../types/zonasTypes';\nexport const traerTodas = () => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    const dataUser = JSON.parse(localStorage.getItem('oliverpetshop_usuario'));\n    let myHeaders = new Headers();\n    myHeaders.append(\"token\", dataUser.token);\n    const zonasApi = await fetch(`${API}/zonas`, {\n      headers: myHeaders\n    });\n    const dataZonas = await zonasApi.json();\n    console.log(dataZonas);\n    dispatch({\n      type: TRAER_ZONAS,\n      payload: dataZonas.data\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const seleccionar = id => (dispatch, getState) => {\n  if (!id) {\n    dispatch({\n      type: LIMPIAR_ACTIVO\n    });\n    return;\n  }\n\n  const {\n    zonas\n  } = getState().zonasReducer;\n  let zona = zonas.filter(z => z.idZona == id);\n\n  if (!zona.length) {\n    dispatch({\n      type: ERROR,\n      payload: 'No se encontro la zona'\n    });\n    return;\n  }\n\n  zona = zona[0];\n  dispatch({\n    type: SELECCIONAR,\n    payload: zona\n  });\n};","map":{"version":3,"sources":["/home/franco/desarrollo/proyecto_oliver/oliver-web-next/store/actions/zonasActions.js"],"names":["API","TRAER_ZONAS","SELECCIONAR","LOADING","ERROR","LIMPIAR_ACTIVO","traerTodas","dispatch","type","dataUser","JSON","parse","localStorage","getItem","myHeaders","Headers","append","token","zonasApi","fetch","headers","dataZonas","json","console","log","payload","data","error","seleccionar","id","getState","zonas","zonasReducer","zona","filter","z","idZona","length"],"mappings":"AAAA,SAAQA,GAAR,QAAkB,oBAAlB;AACA,SAAQC,WAAR,EAAoBC,WAApB,EAAgCC,OAAhC,EAAwCC,KAAxC,EAA+CC,cAA/C,QAAoE,qBAApE;AAEA,OAAO,MAAMC,UAAU,GAAG,MAAI,MAAOC,QAAP,IAAkB;AAC5CA,EAAAA,QAAQ,CAAC;AACLC,IAAAA,IAAI,EAACL;AADA,GAAD,CAAR;;AAGA,MAAI;AACA,UAAMM,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,uBAArB,CAAX,CAAjB;AACA,QAAIC,SAAS,GAAG,IAAIC,OAAJ,EAAhB;AACAD,IAAAA,SAAS,CAACE,MAAV,CAAiB,OAAjB,EAA0BP,QAAQ,CAACQ,KAAnC;AACA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEnB,GAAI,QAAR,EAAgB;AAACoB,MAAAA,OAAO,EAACN;AAAT,KAAhB,CAA5B;AACA,UAAMO,SAAS,GAAG,MAAMH,QAAQ,CAACI,IAAT,EAAxB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ;AACAd,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAACP,WADA;AAELwB,MAAAA,OAAO,EAACJ,SAAS,CAACK;AAFb,KAAD,CAAR;AAIH,GAXD,CAWE,OAAOC,KAAP,EAAc;AACZpB,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAACJ,KADA;AAELqB,MAAAA,OAAO,EAACE;AAFH,KAAD,CAAR;AAIH;AACJ,CArBM;AAuBP,OAAO,MAAMC,WAAW,GAAGC,EAAE,IAAG,CAACtB,QAAD,EAAUuB,QAAV,KAAqB;AACjD,MAAG,CAACD,EAAJ,EAAO;AACHtB,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAACH;AADA,KAAD,CAAR;AAGA;AACH;;AACD,QAAM;AAAC0B,IAAAA;AAAD,MAAUD,QAAQ,GAAGE,YAA3B;AACA,MAAIC,IAAI,GAAGF,KAAK,CAACG,MAAN,CAAaC,CAAC,IAAEA,CAAC,CAACC,MAAF,IAAYP,EAA5B,CAAX;;AACA,MAAG,CAACI,IAAI,CAACI,MAAT,EAAgB;AACZ9B,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAACJ,KADA;AAELqB,MAAAA,OAAO,EAAC;AAFH,KAAD,CAAR;AAIA;AACH;;AACDQ,EAAAA,IAAI,GAAGA,IAAI,CAAC,CAAD,CAAX;AACA1B,EAAAA,QAAQ,CAAC;AACLC,IAAAA,IAAI,EAACN,WADA;AAELuB,IAAAA,OAAO,EAACQ;AAFH,GAAD,CAAR;AAIH,CArBM","sourcesContent":["import {API} from '../../config/index';\nimport {TRAER_ZONAS,SELECCIONAR,LOADING,ERROR, LIMPIAR_ACTIVO} from '../types/zonasTypes';\n\nexport const traerTodas = ()=>async (dispatch)=>{\n    dispatch({\n        type:LOADING\n    });\n    try {\n        const dataUser = JSON.parse(localStorage.getItem('oliverpetshop_usuario'));\n        let myHeaders = new Headers();\n        myHeaders.append(\"token\", dataUser.token);\n        const zonasApi = await fetch(`${API}/zonas`,{headers:myHeaders});\n        const dataZonas = await zonasApi.json();\n        console.log(dataZonas);\n        dispatch({\n            type:TRAER_ZONAS,\n            payload:dataZonas.data\n        });\n    } catch (error) {\n        dispatch({\n            type:ERROR,\n            payload:error\n        })\n    }\n}\n\nexport const seleccionar = id =>(dispatch,getState)=>{\n    if(!id){\n        dispatch({\n            type:LIMPIAR_ACTIVO\n        })\n        return;\n    }\n    const {zonas} = getState().zonasReducer;\n    let zona = zonas.filter(z=>z.idZona == id);\n    if(!zona.length){\n        dispatch({\n            type:ERROR,\n            payload:'No se encontro la zona'\n        });\n        return;\n    }\n    zona = zona[0];\n    dispatch({\n        type:SELECCIONAR,\n        payload:zona\n    })\n}"]},"metadata":{},"sourceType":"module"}