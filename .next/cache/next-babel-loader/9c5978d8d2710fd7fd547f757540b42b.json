{"ast":null,"code":"var _jsxFileName = \"/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/checkout/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport CardUbicacion from '../../src/components/CardUbicacion/index';\nimport OpcionesEnvio from '../../src/components/OpcionesEnvio';\nimport ZonaEnvio from '../../src/components/ZonaEnvio';\nimport Head from '../../src/components/Head';\nimport DetalleProductos from '../../src/components/DetalleProductos';\nimport Error from '../../src/components/Error';\nimport { connect } from 'react-redux';\nimport * as carritoActions from '../../store/actions/carritoActions';\nimport * as usuarioActions from '../../store/actions/usuarioActions';\nimport { API } from '../../config/index';\nimport Loader from '../../src/components/Loader/index';\nimport MediosDePago from '../../src/components/MediosDePago';\n\nconst Swal = require('sweetalert2');\n\nconst {\n  traerProductos: carritoTraerProductos\n} = carritoActions;\nconst {\n  verificarSesion\n} = usuarioActions;\n\nconst Checkout = props => {\n  const {\n    0: error,\n    1: setError\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  useEffect(() => {\n    document.getElementsByTagName('body')[0].style.overflowY = 'scroll';\n  }, []);\n\n  const handleClick = () => {\n    if (!tipoEnvio.local) {\n      if (!props.usuarioReducer.usuario.address || props.usuarioReducer.usuario.address === '') return setError('Es obligatorio completar tu ubicación.');\n      if (zonaEnvio === '') return setError('En caso de no retirarlo por nuestro local, es obligatorio completar la zona de envío.');\n    }\n\n    setLoading(true);\n    setError(false);\n    let tipoDeEnvioActivo;\n\n    if (tipoEnvio.local) {\n      tipoDeEnvioActivo = 'Local';\n    }\n\n    ;\n\n    if (tipoEnvio.normal) {\n      tipoDeEnvioActivo = 'Domicilio';\n    }\n\n    if (tipoEnvio.express) {\n      tipoDeEnvioActivo = 'Express';\n    }\n\n    let dataEnvio = {\n      tipo: tipoDeEnvioActivo,\n      zona: zonaEnvio\n    };\n\n    if (props.carritoReducer.idMedioPago == '1') {\n      //guardo data de envio para luego de hacer el checkout de mercado pago, envio los datos al servidor para registrar la venta con el envio correspondiente.\n      localStorage.setItem('dataEnvio', JSON.stringify(dataEnvio));\n      const {\n        token\n      } = props.usuarioReducer.usuario;\n      const {\n        productos: productosCarrito\n      } = props.carritoReducer; //SOLUCION TEMPORAL PARA QUE SE SUME AL PAGO LO DEL ENVIO\n\n      let productos = [{\n        title: 'Nueva compra en Oliver PetShop',\n        description: 'Compra de uno o mas productos',\n        quantity: 1,\n        unit_price: props.carritoReducer.total\n      }]; // TODO: VER LA FORMA DE MANDAR LOS PRODUCTOS JUNTO CON EL MONTO DEL ENVIO\n      // productosCarrito.forEach(prd => {\n      //     productos.push({\n      //         title:prd.subProducto,\n      //         description:prd.tamaño,\n      //         quantity:prd.cantidad,\n      //         unit_price:prd.precioUnidad\n      //     })\n      // });\n\n      let headers = new Headers();\n      headers.append('token', token);\n      headers.append(\"Content-Type\", \"application/json\");\n      fetch(`${API}/mercadopago`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(productos)\n      }).then(res => res.json()).then(datamp => {\n        // console.log(datamp);\n        const {\n          response\n        } = datamp.info;\n        setLoading(false);\n        window.location.assign(response.init_point);\n      }).catch(err => {\n        console.log(err);\n        setLoading(false);\n        setError(err.message);\n      });\n    } else {\n      const {\n        idUsuario\n      } = props.usuarioReducer.usuario;\n      const {\n        subtotal,\n        porcentaje_descuento,\n        descuento,\n        total,\n        productos,\n        idMedioPago\n      } = props.carritoReducer;\n      const {\n        zona,\n        tipo\n      } = dataEnvio;\n      let f = new Date();\n      let mes = f.getMonth() < 10 ? `0${f.getMonth() + 1}` : `${f.getMonth()}`;\n      let dia = f.getDate() < 10 ? `0${f.getDate()}` : `${f.getDate()}`;\n      let fecha = `${f.getFullYear()}-${mes}-${dia}`;\n      let dataToRequest = {\n        envio: {\n          idZona: zona,\n          tipo: tipo\n        },\n        venta: {\n          subtotal,\n          porcentaje_descuento,\n          descuento,\n          total,\n          idUsuario,\n          productos,\n          fecha,\n          operacion_id: null,\n          idMedioPago\n        }\n      };\n      return registrarVenta(dataToRequest);\n    }\n\n    ;\n  };\n\n  const registrarVenta = async data => {\n    try {\n      const headers = new Headers();\n      headers.append('token', props.usuarioReducer.usuario.token);\n      headers.append(\"Content-Type\", \"application/json\");\n      let url = !data.venta.operacion_id ? `${API}/registrarVenta?mercadoPago=false` : `${API}/registrarVenta?mercadoPago=true`;\n      const reqVenta = await fetch(url, {\n        headers,\n        method: 'POST',\n        body: JSON.stringify(data)\n      });\n\n      if (reqVenta.status == 200) {\n        localStorage.removeItem('dataEnvio');\n        localStorage.removeItem('carrito');\n        Swal.fire('Listo', 'Su compra se ha registrado con éxito, solo resta que se dirija a nuestro local para hacerse con su producto.', 'success').then(() => window.location.assign('/'));\n      } else {\n        setLoading(false);\n        Swal.fire('Error', 'Ha ocurrido un error al momento de registrar la venta, intentalo más tarde', 'error');\n      }\n    } catch (error) {\n      setLoading(false);\n      Swal.fire('Error', 'Ha ocurrido un error al momento de registrar la venta, intentalo más tarde', 'error');\n      console.log(error.message);\n    }\n  };\n\n  if (error) {\n    Swal.fire('Atención', error, 'warning').then(() => setError(false));\n  }\n\n  return !props.usuarioReducer.logueado ? __jsx(\"div\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 42\n    }\n  }, __jsx(Error, {\n    message: \"No puedes realizar una compra sin tener una sesi\\xF3n activa.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 64\n    }\n  })) : __jsx(React.Fragment, null, props.carritoReducer.productos.length === 0 ? __jsx(\"div\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 58\n    }\n  }, __jsx(Error, {\n    message: \"No hay productos para finalizar la compra.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 80\n    }\n  })) : __jsx(React.Fragment, null, loading ? __jsx(\"div\", {\n    className: \"container-loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 32\n    }\n  }, __jsx(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 66\n    }\n  })) : null, __jsx(Head, {\n    title: \"Oliver Pet Shop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"container mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"col-12 col-md-8 pt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 29\n    }\n  }, __jsx(\"h2\", {\n    className: \"jsx-1473839781\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 33\n    }\n  }, \"\\xDAltimos pasos para terminar tu compra\"), __jsx(CardUbicacion, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 33\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"alert alert-warning mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 33\n    }\n  }, __jsx(\"b\", {\n    className: \"jsx-1473839781\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 75\n    }\n  }, \"Atenci\\xF3n:\"), \" S\\xED desea retirar su compra en nuestro local, no es necesario que seleccione una zona de env\\xEDo\"), __jsx(ZonaEnvio, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 33\n    }\n  }), __jsx(\"h2\", {\n    className: \"jsx-1473839781\" + \" \" + \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 33\n    }\n  }, \"Opciones de env\\xEDo\"), __jsx(OpcionesEnvio, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 33\n    }\n  }), __jsx(\"h2\", {\n    className: \"jsx-1473839781\" + \" \" + \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 33\n    }\n  }, \"Selecciona un medio de pago\"), __jsx(MediosDePago, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 33\n    }\n  }), __jsx(\"button\", {\n    type: \"button\",\n    onClick: handleClick,\n    id: \"btn-continuar\",\n    className: \"jsx-1473839781\" + \" \" + \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 33\n    }\n  }, \"Continuar\"), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"divTotalMobile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 33\n    }\n  }, __jsx(\"span\", {\n    id: \"total\",\n    className: \"jsx-1473839781\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 37\n    }\n  }, \"$\", props.carritoReducer.total), __jsx(\"button\", {\n    type: \"button\",\n    onClick: handleClick,\n    className: \"jsx-1473839781\" + \" \" + \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 37\n    }\n  }, \"Continuar\"))), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"col-12 col-md-4 detalleProductos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 29\n    }\n  }, __jsx(DetalleProductos, {\n    data: props.carritoReducer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 33\n    }\n  }))), __jsx(_JSXStyle, {\n    id: \"1473839781\",\n    __self: this\n  }, \"h2.jsx-1473839781{font-size:25px;}button#btn-continuar.jsx-1473839781{float:right;margin-top:20px;}.divTotalMobile.jsx-1473839781{display:none;}@media(max-width:768px){#btn-continuar.jsx-1473839781{display:none;}.divTotalMobile.jsx-1473839781{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:fixed;left:0;right:0px;bottom:0px;background-color:#f7f7f7;padding:16px;box-shadow:0 -2px 8px 2px rgba(0,0,0,.15);border-width:0 1px 1px;font-family:'Quicksand',sans-serif;}.detalleProductos.jsx-1473839781{display:none;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2ZyYW5jby9kZXNhcnJvbGxvL3Byb3llY3RvX29saXZlci9vbGl2ZXItd2ViLW5leHQvcGFnZXMvY2hlY2tvdXQvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBK0xvQyxBQUU0QyxBQUVBLEFBR1csQUFFRyxBQUVULEFBY2pCLFlBbkJKLENBQzRCLEFBRUcsQUFnQjFCLEVBdkJZLGFBSWhCLDhDQU1xQyxtSEFDZCxlQUNULE9BQ0csVUFDRSxXQUNjLHlCQUNaLGFBQzZCLDBDQUNuQix1QkFDYSxtQ0FDeEMiLCJmaWxlIjoiL2hvbWUvZnJhbmNvL2Rlc2Fycm9sbG8vcHJveWVjdG9fb2xpdmVyL29saXZlci13ZWItbmV4dC9wYWdlcy9jaGVja291dC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ2FyZFViaWNhY2lvbiBmcm9tICcuLi8uLi9zcmMvY29tcG9uZW50cy9DYXJkVWJpY2FjaW9uL2luZGV4JzsgXG5pbXBvcnQgT3BjaW9uZXNFbnZpbyBmcm9tICcuLi8uLi9zcmMvY29tcG9uZW50cy9PcGNpb25lc0VudmlvJztcbmltcG9ydCBab25hRW52aW8gZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvWm9uYUVudmlvJztcbmltcG9ydCBIZWFkIGZyb20gJy4uLy4uL3NyYy9jb21wb25lbnRzL0hlYWQnO1xuaW1wb3J0IERldGFsbGVQcm9kdWN0b3MgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvRGV0YWxsZVByb2R1Y3Rvcyc7XG5pbXBvcnQgRXJyb3IgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvRXJyb3InO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCAqIGFzIGNhcnJpdG9BY3Rpb25zIGZyb20gJy4uLy4uL3N0b3JlL2FjdGlvbnMvY2Fycml0b0FjdGlvbnMnO1xuaW1wb3J0ICogYXMgdXN1YXJpb0FjdGlvbnMgZnJvbSAnLi4vLi4vc3RvcmUvYWN0aW9ucy91c3VhcmlvQWN0aW9ucyc7XG5pbXBvcnQge0FQSX0gZnJvbSAnLi4vLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCBMb2FkZXIgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvTG9hZGVyL2luZGV4JztcbmltcG9ydCBNZWRpb3NEZVBhZ28gZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvTWVkaW9zRGVQYWdvJztcbmNvbnN0IFN3YWwgPSByZXF1aXJlKCdzd2VldGFsZXJ0MicpO1xuXG5jb25zdCB7dHJhZXJQcm9kdWN0b3M6Y2Fycml0b1RyYWVyUHJvZHVjdG9zfSA9IGNhcnJpdG9BY3Rpb25zO1xuY29uc3Qge3ZlcmlmaWNhclNlc2lvbn0gPSB1c3VhcmlvQWN0aW9ucztcblxuY29uc3QgQ2hlY2tvdXQgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLnN0eWxlLm92ZXJmbG93WSA9ICdzY3JvbGwnO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gKCk9PntcbiAgICAgICAgaWYoIXRpcG9FbnZpby5sb2NhbCl7XG4gICAgICAgICAgICBpZighcHJvcHMudXN1YXJpb1JlZHVjZXIudXN1YXJpby5hZGRyZXNzIHx8IHByb3BzLnVzdWFyaW9SZWR1Y2VyLnVzdWFyaW8uYWRkcmVzcz09PScnKSByZXR1cm4gc2V0RXJyb3IoJ0VzIG9ibGlnYXRvcmlvIGNvbXBsZXRhciB0dSB1YmljYWNpw7NuLicpO1xuICAgICAgICAgICAgaWYoem9uYUVudmlvPT09JycpIHJldHVybiBzZXRFcnJvcignRW4gY2FzbyBkZSBubyByZXRpcmFybG8gcG9yIG51ZXN0cm8gbG9jYWwsIGVzIG9ibGlnYXRvcmlvIGNvbXBsZXRhciBsYSB6b25hIGRlIGVudsOtby4nKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICBzZXRFcnJvcihmYWxzZSk7XG4gICAgICAgIGxldCB0aXBvRGVFbnZpb0FjdGl2bztcbiAgICAgICAgaWYodGlwb0VudmlvLmxvY2FsKXt0aXBvRGVFbnZpb0FjdGl2bz0nTG9jYWwnfTtcbiAgICAgICAgaWYodGlwb0VudmlvLm5vcm1hbCl7dGlwb0RlRW52aW9BY3Rpdm89J0RvbWljaWxpbyd9XG4gICAgICAgIGlmKHRpcG9FbnZpby5leHByZXNzKXt0aXBvRGVFbnZpb0FjdGl2bz0nRXhwcmVzcyd9XG4gICAgICAgIGxldCBkYXRhRW52aW8gPSB7XG4gICAgICAgICAgICB0aXBvOnRpcG9EZUVudmlvQWN0aXZvLFxuICAgICAgICAgICAgem9uYTp6b25hRW52aW9cbiAgICAgICAgfVxuICAgICAgICBpZihwcm9wcy5jYXJyaXRvUmVkdWNlci5pZE1lZGlvUGFnbyA9PSAnMScpe1xuICAgICAgICAgICAgLy9ndWFyZG8gZGF0YSBkZSBlbnZpbyBwYXJhIGx1ZWdvIGRlIGhhY2VyIGVsIGNoZWNrb3V0IGRlIG1lcmNhZG8gcGFnbywgZW52aW8gbG9zIGRhdG9zIGFsIHNlcnZpZG9yIHBhcmEgcmVnaXN0cmFyIGxhIHZlbnRhIGNvbiBlbCBlbnZpbyBjb3JyZXNwb25kaWVudGUuXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGF0YUVudmlvJyxKU09OLnN0cmluZ2lmeShkYXRhRW52aW8pKTtcblxuICAgICAgICAgICAgY29uc3Qge3Rva2VufSA9IHByb3BzLnVzdWFyaW9SZWR1Y2VyLnVzdWFyaW87XG4gICAgICAgICAgICBjb25zdCB7cHJvZHVjdG9zOnByb2R1Y3Rvc0NhcnJpdG99ID0gcHJvcHMuY2Fycml0b1JlZHVjZXI7XG5cbiAgICAgICAgICAgIC8vU09MVUNJT04gVEVNUE9SQUwgUEFSQSBRVUUgU0UgU1VNRSBBTCBQQUdPIExPIERFTCBFTlZJT1xuICAgICAgICAgICAgbGV0IHByb2R1Y3RvcyA9IFt7XG4gICAgICAgICAgICAgICAgdGl0bGU6J051ZXZhIGNvbXByYSBlbiBPbGl2ZXIgUGV0U2hvcCcsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246J0NvbXByYSBkZSB1bm8gbyBtYXMgcHJvZHVjdG9zJyxcbiAgICAgICAgICAgICAgICBxdWFudGl0eToxLFxuICAgICAgICAgICAgICAgIHVuaXRfcHJpY2U6cHJvcHMuY2Fycml0b1JlZHVjZXIudG90YWxcbiAgICAgICAgICAgIH1dO1xuXG4gICAgICAgICAgICAvLyBUT0RPOiBWRVIgTEEgRk9STUEgREUgTUFOREFSIExPUyBQUk9EVUNUT1MgSlVOVE8gQ09OIEVMIE1PTlRPIERFTCBFTlZJT1xuICAgICAgICAgICAgLy8gcHJvZHVjdG9zQ2Fycml0by5mb3JFYWNoKHByZCA9PiB7XG4gICAgICAgICAgICAvLyAgICAgcHJvZHVjdG9zLnB1c2goe1xuICAgICAgICAgICAgLy8gICAgICAgICB0aXRsZTpwcmQuc3ViUHJvZHVjdG8sXG4gICAgICAgICAgICAvLyAgICAgICAgIGRlc2NyaXB0aW9uOnByZC50YW1hw7FvLFxuICAgICAgICAgICAgLy8gICAgICAgICBxdWFudGl0eTpwcmQuY2FudGlkYWQsXG4gICAgICAgICAgICAvLyAgICAgICAgIHVuaXRfcHJpY2U6cHJkLnByZWNpb1VuaWRhZFxuICAgICAgICAgICAgLy8gICAgIH0pXG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3Rva2VuJyx0b2tlbik7XG4gICAgICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgICAgICBmZXRjaChgJHtBUEl9L21lcmNhZG9wYWdvYCx7XG4gICAgICAgICAgICAgICAgbWV0aG9kOidQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6SlNPTi5zdHJpbmdpZnkocHJvZHVjdG9zKVxuICAgICAgICAgICAgfSkudGhlbihyZXM9PnJlcy5qc29uKCkpLnRoZW4oZGF0YW1wPT57XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YW1wKTtcbiAgICAgICAgICAgICAgICBjb25zdCB7cmVzcG9uc2V9ID0gZGF0YW1wLmluZm87XG4gICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihyZXNwb25zZS5pbml0X3BvaW50KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycj0+e1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBjb25zdCB7aWRVc3VhcmlvfSA9IHByb3BzLnVzdWFyaW9SZWR1Y2VyLnVzdWFyaW87XG4gICAgICAgICAgICBjb25zdCB7c3VidG90YWwscG9yY2VudGFqZV9kZXNjdWVudG8sZGVzY3VlbnRvLHRvdGFsLHByb2R1Y3RvcyxpZE1lZGlvUGFnb30gPSBwcm9wcy5jYXJyaXRvUmVkdWNlcjtcbiAgICAgICAgICAgIGNvbnN0IHt6b25hLHRpcG99ID0gZGF0YUVudmlvO1xuICAgICAgICAgICAgbGV0IGYgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgbGV0IG1lcyA9ICgoZi5nZXRNb250aCgpKTwxMCk/YDAke2YuZ2V0TW9udGgoKSsxfWA6YCR7Zi5nZXRNb250aCgpfWA7XG4gICAgICAgICAgICBsZXQgZGlhID0gKChmLmdldERhdGUoKSk8MTApP2AwJHtmLmdldERhdGUoKX1gOmAke2YuZ2V0RGF0ZSgpfWA7XG4gICAgICAgICAgICBsZXQgZmVjaGEgPSBgJHtmLmdldEZ1bGxZZWFyKCl9LSR7bWVzfS0ke2RpYX1gO1xuICAgICAgICAgICAgbGV0IGRhdGFUb1JlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgZW52aW86e1xuICAgICAgICAgICAgICAgICAgICBpZFpvbmE6em9uYSxcbiAgICAgICAgICAgICAgICAgICAgdGlwbzp0aXBvXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2ZW50YTp7XG4gICAgICAgICAgICAgICAgICAgIHN1YnRvdGFsLFxuICAgICAgICAgICAgICAgICAgICBwb3JjZW50YWplX2Rlc2N1ZW50byxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3VlbnRvLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbCxcbiAgICAgICAgICAgICAgICAgICAgaWRVc3VhcmlvLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0b3MsXG4gICAgICAgICAgICAgICAgICAgIGZlY2hhLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYWNpb25faWQ6bnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaWRNZWRpb1BhZ29cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cmFyVmVudGEoZGF0YVRvUmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHJlZ2lzdHJhclZlbnRhID0gYXN5bmMgZGF0YT0+e1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgICAgICBoZWFkZXJzLmFwcGVuZCgndG9rZW4nLHByb3BzLnVzdWFyaW9SZWR1Y2VyLnVzdWFyaW8udG9rZW4pO1xuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICAgICAgbGV0IHVybCA9ICghZGF0YS52ZW50YS5vcGVyYWNpb25faWQpP2Ake0FQSX0vcmVnaXN0cmFyVmVudGE/bWVyY2Fkb1BhZ289ZmFsc2VgOmAke0FQSX0vcmVnaXN0cmFyVmVudGE/bWVyY2Fkb1BhZ289dHJ1ZWA7XG4gICAgICAgICAgICBjb25zdCByZXFWZW50YSA9IGF3YWl0IGZldGNoKHVybCx7XG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6SlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYocmVxVmVudGEuc3RhdHVzID09IDIwMCl7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2RhdGFFbnZpbycpO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdjYXJyaXRvJyk7XG4gICAgICAgICAgICAgICAgU3dhbC5maXJlKFxuICAgICAgICAgICAgICAgICAgICAnTGlzdG8nLFxuICAgICAgICAgICAgICAgICAgICAnU3UgY29tcHJhIHNlIGhhIHJlZ2lzdHJhZG8gY29uIMOpeGl0bywgc29sbyByZXN0YSBxdWUgc2UgZGlyaWphIGEgbnVlc3RybyBsb2NhbCBwYXJhIGhhY2Vyc2UgY29uIHN1IHByb2R1Y3RvLicsXG4gICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJ1xuICAgICAgICAgICAgICAgICkudGhlbigoKT0+d2luZG93LmxvY2F0aW9uLmFzc2lnbignLycpKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgIFN3YWwuZmlyZShcbiAgICAgICAgICAgICAgICAgICAgJ0Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgJ0hhIG9jdXJyaWRvIHVuIGVycm9yIGFsIG1vbWVudG8gZGUgcmVnaXN0cmFyIGxhIHZlbnRhLCBpbnRlbnRhbG8gbcOhcyB0YXJkZScsXG4gICAgICAgICAgICAgICAgICAgICdlcnJvcidcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICBTd2FsLmZpcmUoXG4gICAgICAgICAgICAgICAgJ0Vycm9yJyxcbiAgICAgICAgICAgICAgICAnSGEgb2N1cnJpZG8gdW4gZXJyb3IgYWwgbW9tZW50byBkZSByZWdpc3RyYXIgbGEgdmVudGEsIGludGVudGFsbyBtw6FzIHRhcmRlJyxcbiAgICAgICAgICAgICAgICAnZXJyb3InXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZihlcnJvcil7XG4gICAgICAgIFN3YWwuZmlyZShcbiAgICAgICAgICAgICdBdGVuY2nDs24nLFxuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAnd2FybmluZydcbiAgICAgICAgKS50aGVuKCgpPT5zZXRFcnJvcihmYWxzZSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgKCFwcm9wcy51c3VhcmlvUmVkdWNlci5sb2d1ZWFkbyk/PGRpdiBjbGFzc05hbWU9XCJtdC0zXCI+PEVycm9yIG1lc3NhZ2U9XCJObyBwdWVkZXMgcmVhbGl6YXIgdW5hIGNvbXByYSBzaW4gdGVuZXIgdW5hIHNlc2nDs24gYWN0aXZhLlwiLz48L2Rpdj46XG4gICAgICAgIDw+XG4gICAgICAgICAgICB7KHByb3BzLmNhcnJpdG9SZWR1Y2VyLnByb2R1Y3Rvcy5sZW5ndGg9PT0wKT88ZGl2IGNsYXNzTmFtZT1cIm10LTNcIj48RXJyb3IgbWVzc2FnZT1cIk5vIGhheSBwcm9kdWN0b3MgcGFyYSBmaW5hbGl6YXIgbGEgY29tcHJhLlwiLz48L2Rpdj46XG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgeyhsb2FkaW5nKT88ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lci1sb2FkZXJcIj48TG9hZGVyLz48L2Rpdj46bnVsbH0gICBcbiAgICAgICAgICAgICAgICAgICAgPEhlYWQgdGl0bGU9XCJPbGl2ZXIgUGV0IFNob3BcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyIG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtMTIgY29sLW1kLTggcHQtNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDI+w5psdGltb3MgcGFzb3MgcGFyYSB0ZXJtaW5hciB0dSBjb21wcmE8L2gyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZFViaWNhY2lvbi8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGVydCBhbGVydC13YXJuaW5nIG10LTNcIj48Yj5BdGVuY2nDs246PC9iPiBTw60gZGVzZWEgcmV0aXJhciBzdSBjb21wcmEgZW4gbnVlc3RybyBsb2NhbCwgbm8gZXMgbmVjZXNhcmlvIHF1ZSBzZWxlY2Npb25lIHVuYSB6b25hIGRlIGVudsOtbzwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxab25hRW52aW8vPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJtdC01XCI+T3BjaW9uZXMgZGUgZW52w61vPC9oMj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE9wY2lvbmVzRW52aW8vPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJtdC01XCI+U2VsZWNjaW9uYSB1biBtZWRpbyBkZSBwYWdvPC9oMj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1lZGlvc0RlUGFnby8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1wcmltYXJ5XCIgb25DbGljaz17aGFuZGxlQ2xpY2t9IGlkPVwiYnRuLWNvbnRpbnVhclwiPkNvbnRpbnVhcjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdlRvdGFsTW9iaWxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cInRvdGFsXCI+JHtwcm9wcy5jYXJyaXRvUmVkdWNlci50b3RhbH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnlcIiBvbkNsaWNrPXtoYW5kbGVDbGlja30+Q29udGludWFyPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIGNvbC1tZC00IGRldGFsbGVQcm9kdWN0b3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERldGFsbGVQcm9kdWN0b3MgZGF0YT17cHJvcHMuY2Fycml0b1JlZHVjZXJ9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgye2ZvbnQtc2l6ZToyNXB4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbiNidG4tY29udGludWFye1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDpyaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDoyMHB4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kaXZUb3RhbE1vYmlsZXtkaXNwbGF5Om5vbmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQG1lZGlhKG1heC13aWR0aDo3NjhweCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNidG4tY29udGludWFye2Rpc3BsYXk6bm9uZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRpdlRvdGFsTW9iaWxle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpmbGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OjA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDowcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDBweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmN2Y3Zjc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAtMnB4IDhweCAycHggcmdiYSgwLDAsMCwuMTUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiAwIDFweCAxcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1F1aWNrc2FuZCcsIHNhbnMtc2VyaWY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kZXRhbGxlUHJvZHVjdG9ze1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICB9XG4gICAgICAgIDwvPlxuICAgICk7XG59XG4gXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoe2NhcnJpdG9SZWR1Y2VyLHVzdWFyaW9SZWR1Y2VyLGVudmlvc1JlZHVjZXJ9KT0+e1xuICAgIHJldHVybiB7XG4gICAgICAgIGNhcnJpdG9SZWR1Y2VyLFxuICAgICAgICB1c3VhcmlvUmVkdWNlcixcbiAgICAgICAgZW52aW9zUmVkdWNlclxuICAgIH07XG59XG5cbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IHtcbiAgICBjYXJyaXRvVHJhZXJQcm9kdWN0b3MsXG4gICAgdmVyaWZpY2FyU2VzaW9uLFxuICAgIGNhbWJpYXJNZWRpb0RlUGFnbyxcbiAgICBzZXRDb3N0b0VudmlvXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcyxtYXBEaXNwYXRjaFRvUHJvcHMpKENoZWNrb3V0KTsiXX0= */\\n/*@ sourceURL=/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/checkout/index.js */\"))));\n};\n\nconst mapStateToProps = ({\n  carritoReducer,\n  usuarioReducer,\n  enviosReducer\n}) => {\n  return {\n    carritoReducer,\n    usuarioReducer,\n    enviosReducer\n  };\n};\n\nconst mapDispatchToProps = {\n  carritoTraerProductos,\n  verificarSesion,\n  cambiarMedioDePago,\n  setCostoEnvio\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Checkout);","map":{"version":3,"sources":["/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/checkout/index.js"],"names":["useEffect","useState","CardUbicacion","OpcionesEnvio","ZonaEnvio","Head","DetalleProductos","Error","connect","carritoActions","usuarioActions","API","Loader","MediosDePago","Swal","require","traerProductos","carritoTraerProductos","verificarSesion","Checkout","props","error","setError","loading","setLoading","document","getElementsByTagName","style","overflowY","handleClick","tipoEnvio","local","usuarioReducer","usuario","address","zonaEnvio","tipoDeEnvioActivo","normal","express","dataEnvio","tipo","zona","carritoReducer","idMedioPago","localStorage","setItem","JSON","stringify","token","productos","productosCarrito","title","description","quantity","unit_price","total","headers","Headers","append","fetch","method","body","then","res","json","datamp","response","info","window","location","assign","init_point","catch","err","console","log","message","idUsuario","subtotal","porcentaje_descuento","descuento","f","Date","mes","getMonth","dia","getDate","fecha","getFullYear","dataToRequest","envio","idZona","venta","operacion_id","registrarVenta","data","url","reqVenta","status","removeItem","fire","logueado","length","mapStateToProps","enviosReducer","mapDispatchToProps","cambiarMedioDePago","setCostoEnvio"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport CardUbicacion from '../../src/components/CardUbicacion/index'; \nimport OpcionesEnvio from '../../src/components/OpcionesEnvio';\nimport ZonaEnvio from '../../src/components/ZonaEnvio';\nimport Head from '../../src/components/Head';\nimport DetalleProductos from '../../src/components/DetalleProductos';\nimport Error from '../../src/components/Error';\nimport { connect } from 'react-redux';\nimport * as carritoActions from '../../store/actions/carritoActions';\nimport * as usuarioActions from '../../store/actions/usuarioActions';\nimport {API} from '../../config/index';\nimport Loader from '../../src/components/Loader/index';\nimport MediosDePago from '../../src/components/MediosDePago';\nconst Swal = require('sweetalert2');\n\nconst {traerProductos:carritoTraerProductos} = carritoActions;\nconst {verificarSesion} = usuarioActions;\n\nconst Checkout = (props) => {\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        document.getElementsByTagName('body')[0].style.overflowY = 'scroll';\n    }, []);\n\n    const handleClick = ()=>{\n        if(!tipoEnvio.local){\n            if(!props.usuarioReducer.usuario.address || props.usuarioReducer.usuario.address==='') return setError('Es obligatorio completar tu ubicación.');\n            if(zonaEnvio==='') return setError('En caso de no retirarlo por nuestro local, es obligatorio completar la zona de envío.');\n        }\n        setLoading(true);\n        setError(false);\n        let tipoDeEnvioActivo;\n        if(tipoEnvio.local){tipoDeEnvioActivo='Local'};\n        if(tipoEnvio.normal){tipoDeEnvioActivo='Domicilio'}\n        if(tipoEnvio.express){tipoDeEnvioActivo='Express'}\n        let dataEnvio = {\n            tipo:tipoDeEnvioActivo,\n            zona:zonaEnvio\n        }\n        if(props.carritoReducer.idMedioPago == '1'){\n            //guardo data de envio para luego de hacer el checkout de mercado pago, envio los datos al servidor para registrar la venta con el envio correspondiente.\n            localStorage.setItem('dataEnvio',JSON.stringify(dataEnvio));\n\n            const {token} = props.usuarioReducer.usuario;\n            const {productos:productosCarrito} = props.carritoReducer;\n\n            //SOLUCION TEMPORAL PARA QUE SE SUME AL PAGO LO DEL ENVIO\n            let productos = [{\n                title:'Nueva compra en Oliver PetShop',\n                description:'Compra de uno o mas productos',\n                quantity:1,\n                unit_price:props.carritoReducer.total\n            }];\n\n            // TODO: VER LA FORMA DE MANDAR LOS PRODUCTOS JUNTO CON EL MONTO DEL ENVIO\n            // productosCarrito.forEach(prd => {\n            //     productos.push({\n            //         title:prd.subProducto,\n            //         description:prd.tamaño,\n            //         quantity:prd.cantidad,\n            //         unit_price:prd.precioUnidad\n            //     })\n            // });\n            \n            let headers = new Headers();\n            headers.append('token',token);\n            headers.append(\"Content-Type\", \"application/json\");\n            fetch(`${API}/mercadopago`,{\n                method:'POST',\n                headers,\n                body:JSON.stringify(productos)\n            }).then(res=>res.json()).then(datamp=>{\n                // console.log(datamp);\n                const {response} = datamp.info;\n                setLoading(false);\n                window.location.assign(response.init_point);\n            }).catch(err=>{\n                console.log(err);\n                setLoading(false);\n                setError(err.message);\n            })\n        }else{\n            const {idUsuario} = props.usuarioReducer.usuario;\n            const {subtotal,porcentaje_descuento,descuento,total,productos,idMedioPago} = props.carritoReducer;\n            const {zona,tipo} = dataEnvio;\n            let f = new Date();\n            let mes = ((f.getMonth())<10)?`0${f.getMonth()+1}`:`${f.getMonth()}`;\n            let dia = ((f.getDate())<10)?`0${f.getDate()}`:`${f.getDate()}`;\n            let fecha = `${f.getFullYear()}-${mes}-${dia}`;\n            let dataToRequest = {\n                envio:{\n                    idZona:zona,\n                    tipo:tipo\n                },\n                venta:{\n                    subtotal,\n                    porcentaje_descuento,\n                    descuento,\n                    total,\n                    idUsuario,\n                    productos,\n                    fecha,\n                    operacion_id:null,\n                    idMedioPago\n                }\n            }\n            return registrarVenta(dataToRequest);\n        };\n    }\n    \n    const registrarVenta = async data=>{\n        try {\n            const headers = new Headers();\n            headers.append('token',props.usuarioReducer.usuario.token);\n            headers.append(\"Content-Type\", \"application/json\");\n            let url = (!data.venta.operacion_id)?`${API}/registrarVenta?mercadoPago=false`:`${API}/registrarVenta?mercadoPago=true`;\n            const reqVenta = await fetch(url,{\n                headers,\n                method:'POST',\n                body:JSON.stringify(data)\n            });\n            if(reqVenta.status == 200){\n                localStorage.removeItem('dataEnvio');\n                localStorage.removeItem('carrito');\n                Swal.fire(\n                    'Listo',\n                    'Su compra se ha registrado con éxito, solo resta que se dirija a nuestro local para hacerse con su producto.',\n                    'success'\n                ).then(()=>window.location.assign('/'));\n            }else{\n                setLoading(false);\n                Swal.fire(\n                    'Error',\n                    'Ha ocurrido un error al momento de registrar la venta, intentalo más tarde',\n                    'error'\n                );\n            }\n        } catch (error) {\n            setLoading(false);\n            Swal.fire(\n                'Error',\n                'Ha ocurrido un error al momento de registrar la venta, intentalo más tarde',\n                'error'\n            );\n            console.log(error.message);\n        }\n    }\n\n    if(error){\n        Swal.fire(\n            'Atención',\n            error,\n            'warning'\n        ).then(()=>setError(false))\n    }\n\n    return (\n        (!props.usuarioReducer.logueado)?<div className=\"mt-3\"><Error message=\"No puedes realizar una compra sin tener una sesión activa.\"/></div>:\n        <>\n            {(props.carritoReducer.productos.length===0)?<div className=\"mt-3\"><Error message=\"No hay productos para finalizar la compra.\"/></div>:\n                <>\n                    {(loading)?<div className=\"container-loader\"><Loader/></div>:null}   \n                    <Head title=\"Oliver Pet Shop\"/>\n                    <div className=\"container mb-4\">\n                        <div className=\"row\">\n                            <div className=\"col-12 col-md-8 pt-4\">\n                                <h2>Últimos pasos para terminar tu compra</h2>\n                                <CardUbicacion/>\n\n                                <div className=\"alert alert-warning mt-3\"><b>Atención:</b> Sí desea retirar su compra en nuestro local, no es necesario que seleccione una zona de envío</div>\n\n                                <ZonaEnvio/>\n\n                                <h2 className=\"mt-5\">Opciones de envío</h2>\n                                <OpcionesEnvio/>\n\n                                <h2 className=\"mt-5\">Selecciona un medio de pago</h2>\n                                <MediosDePago/>\n\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={handleClick} id=\"btn-continuar\">Continuar</button>\n                                <div className=\"divTotalMobile\">\n                                    <span id=\"total\">${props.carritoReducer.total}</span>\n                                    <button type=\"button\" className=\"btn btn-primary\" onClick={handleClick}>Continuar</button>\n                                </div>\n                            </div>\n                            <div className=\"col-12 col-md-4 detalleProductos\">\n                                <DetalleProductos data={props.carritoReducer}/>\n                            </div>\n                        </div>\n                        <style jsx>{`\n                            h2{font-size:25px}\n                            button#btn-continuar{\n                                float:right;\n                                margin-top:20px\n                            }\n                            .divTotalMobile{display:none}\n                            @media(max-width:768px){\n                                #btn-continuar{display:none}\n                                .divTotalMobile{\n                                    display:flex;\n                                    justify-content:space-between;\n                                    position: fixed;\n                                    left:0;\n                                    right:0px;\n                                    bottom: 0px;\n                                    background-color: #f7f7f7;\n                                    padding: 16px;\n                                    box-shadow: 0 -2px 8px 2px rgba(0,0,0,.15);\n                                    border-width: 0 1px 1px;\n                                    font-family: 'Quicksand', sans-serif;\n                                } \n                                .detalleProductos{\n                                    display:none\n                                }           \n                            }\n                        `}</style>\n                    </div>\n                </>\n            }\n        </>\n    );\n}\n \nconst mapStateToProps = ({carritoReducer,usuarioReducer,enviosReducer})=>{\n    return {\n        carritoReducer,\n        usuarioReducer,\n        enviosReducer\n    };\n}\n\nconst mapDispatchToProps = {\n    carritoTraerProductos,\n    verificarSesion,\n    cambiarMedioDePago,\n    setCostoEnvio\n};\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Checkout);"]},"metadata":{},"sourceType":"module"}