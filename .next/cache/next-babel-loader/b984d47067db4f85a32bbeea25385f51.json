{"ast":null,"code":"var _jsxFileName = \"/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/checkout/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport CardUbicacion from '../../src/components/CardUbicacion/index';\nimport OpcionesEnvio from '../../src/components/OpcionesEnvio';\nimport ZonaEnvio from '../../src/components/ZonaEnvio';\nimport Head from '../../src/components/Head';\nimport DetalleProductos from '../../src/components/DetalleProductos';\nimport Error from '../../src/components/Error';\nimport { connect } from 'react-redux';\nimport * as carritoActions from '../../store/actions/carritoActions';\nimport * as usuarioActions from '../../store/actions/usuarioActions';\nimport { API } from '../../config/index';\nimport Loader from '../../src/components/Loader/index';\nimport MediosDePago from '../../src/components/MediosDePago';\nimport Router from 'next/router';\nconst {\n  traerProductos: carritoTraerProductos,\n  cambiarMedioDePago\n} = carritoActions;\nconst {\n  verificarSesion\n} = usuarioActions;\n\nconst Checkout = props => {\n  const {\n    0: tipoEnvio,\n    1: setTipoEnvio\n  } = useState({\n    normal: true,\n    express: false,\n    local: false\n  });\n  const {\n    0: zonaEnvio,\n    1: setZonaEnvio\n  } = useState('');\n  const {\n    0: error,\n    1: setError\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  useEffect(() => {\n    document.getElementsByTagName('body')[0].style.overflowY = 'scroll';\n    props.carritoTraerProductos();\n  }, []);\n\n  const cambiarTipoDeEnvio = tipoDeEnvio => {\n    if (tipoDeEnvio === 'normal') {\n      document.getElementById('form-zona-envio').removeAttribute('disabled');\n      document.getElementById('form-medios-pago').setAttribute('disabled', 'true');\n      props.cambiarMedioDePago('1');\n      return setTipoEnvio({\n        normal: true,\n        express: false,\n        local: false\n      });\n    }\n\n    if (tipoDeEnvio === 'express') {\n      document.getElementById('form-zona-envio').removeAttribute('disabled');\n      document.getElementById('form-medios-pago').setAttribute('disabled', 'true');\n      props.cambiarMedioDePago('1');\n      return setTipoEnvio({\n        normal: false,\n        express: true,\n        local: false\n      });\n    }\n\n    document.getElementById('form-zona-envio').setAttribute('disabled', 'true');\n    document.getElementById('form-medios-pago').removeAttribute('disabled');\n    return setTipoEnvio({\n      normal: false,\n      express: false,\n      local: true\n    });\n  };\n\n  const insertarZonaDeEnvio = zona => {\n    setZonaEnvio(zona);\n  };\n\n  const handleClick = () => {\n    if (!tipoEnvio.local) {\n      if (!props.usuarioReducer.usuario.address || props.usuarioReducer.usuario.address === '') return setError('Es obligatorio completar tu ubicación.');\n      if (zonaEnvio === '') return setError('En caso de no retirarlo por nuestro local, es obligatorio completar la zona de envío.');\n    }\n\n    setLoading(true);\n    setError(false);\n    let tipoDeEnvioActivo;\n\n    if (tipoEnvio.local) {\n      tipoDeEnvioActivo = 'Local';\n    }\n\n    ;\n\n    if (tipoEnvio.normal) {\n      tipoDeEnvioActivo = 'Domicilio';\n    }\n\n    if (tipoEnvio.express) {\n      tipoDeEnvioActivo = 'Express';\n    }\n\n    let dataEnvio = {\n      tipo: tipoDeEnvioActivo,\n      zona: zonaEnvio\n    };\n\n    if (props.carritoReducer.idMedioPago == '1') {\n      //guardo data de envio para luego de hacer el checkout de mercado pago, envio los datos al servidor para registrar la venta con el envio correspondiente.\n      localStorage.setItem('dataEnvio', JSON.stringify(dataEnvio));\n      const {\n        token\n      } = props.usuarioReducer.usuario;\n      const {\n        productos: productosCarrito\n      } = props.carritoReducer;\n      let productos = [];\n      productosCarrito.forEach(prd => {\n        productos.push({\n          title: prd.subProducto,\n          description: prd.tamaño,\n          quantity: prd.cantidad,\n          unit_price: prd.precioUnidad\n        });\n      });\n      let headers = new Headers();\n      headers.append('token', token);\n      headers.append(\"Content-Type\", \"application/json\"); // fetch(`${API}/mercadopago`,{\n      //     method:'POST',\n      //     headers,\n      //     body:JSON.stringify(productos)\n      // }).then(res=>res.json()).then(datamp=>{\n      //     const {response} = datamp.info;\n      //     setLoading(false);\n      //     window.location.assign(response.init_point);\n      // }).catch(err=>{\n      //     console.log(err);\n      //     setLoading(false);\n      //     setError(err.message);\n      // })\n    } else {\n      const {\n        idUsuario\n      } = props.usuarioReducer.usuario;\n      const {\n        subtotal,\n        porcentaje_descuento,\n        descuento,\n        total,\n        productos,\n        idMedioPago\n      } = props.carritoReducer;\n      const {\n        zona,\n        tipo\n      } = dataEnvio;\n      let f = new Date();\n      let mes = f.getMonth() < 10 ? `0${f.getMonth() + 1}` : `${f.getMonth()}`;\n      let dia = f.getDate() < 10 ? `0${f.getDate()}` : `${f.getDate()}`;\n      let fecha = `${f.getFullYear()}-${mes}-${dia}`;\n      let dataToRequest = {\n        envio: {\n          idZona: zona,\n          tipo: tipo\n        },\n        venta: {\n          subtotal,\n          porcentaje_descuento,\n          descuento,\n          total,\n          idUsuario,\n          productos,\n          fecha,\n          operacion_id: props.collection_id || null,\n          idMedioPago\n        }\n      };\n      console.log(dataToRequest);\n    }\n\n    ;\n  };\n\n  return !props.usuarioReducer.logueado ? __jsx(\"div\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 42\n    }\n  }, __jsx(Error, {\n    message: \"No puedes realizar una compra sin tener una sesi\\xF3n activa.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 64\n    }\n  })) : __jsx(React.Fragment, null, props.carritoReducer.productos.length === 0 ? __jsx(\"div\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 58\n    }\n  }, __jsx(Error, {\n    message: \"No hay productos para finalizar la compra.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 80\n    }\n  })) : __jsx(React.Fragment, null, loading ? __jsx(\"div\", {\n    className: \"container-loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 32\n    }\n  }, __jsx(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 66\n    }\n  })) : null, __jsx(Head, {\n    title: \"Oliver Pet Shop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"container mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"col-12 col-md-8 pt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }, __jsx(\"h2\", {\n    className: \"jsx-1473839781\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 33\n    }\n  }, \"\\xDAltimos pasos para terminar tu compra\"), error ? __jsx(Error, {\n    message: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 42\n    }\n  }) : null, __jsx(CardUbicacion, {\n    dataUser: props.usuarioReducer.usuario,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 33\n    }\n  }), __jsx(ZonaEnvio, {\n    setZonaEnvio: insertarZonaDeEnvio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 33\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"alert alert-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 33\n    }\n  }, __jsx(\"b\", {\n    className: \"jsx-1473839781\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 70\n    }\n  }, \"Atenci\\xF3n:\"), \" S\\xED desea retirar su compra en nuestro local, no es necesario que seleccione una zona de env\\xEDo\"), __jsx(\"h2\", {\n    className: \"jsx-1473839781\" + \" \" + \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 33\n    }\n  }, \"Opciones de env\\xEDo\"), __jsx(OpcionesEnvio, {\n    tipoEnvio: tipoEnvio,\n    cambiarTipoDeEnvio: cambiarTipoDeEnvio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 33\n    }\n  }), __jsx(\"h2\", {\n    className: \"jsx-1473839781\" + \" \" + \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 33\n    }\n  }, \"Selecciona un medio de pago\"), __jsx(MediosDePago, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 33\n    }\n  }), __jsx(\"button\", {\n    type: \"button\",\n    onClick: handleClick,\n    id: \"btn-continuar\",\n    className: \"jsx-1473839781\" + \" \" + \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 33\n    }\n  }, \"Continuar\"), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"divTotalMobile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 33\n    }\n  }, __jsx(\"span\", {\n    id: \"total\",\n    className: \"jsx-1473839781\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 37\n    }\n  }, \"$\", props.carritoReducer.subtotal), __jsx(\"button\", {\n    type: \"button\",\n    onClick: handleClick,\n    className: \"jsx-1473839781\" + \" \" + \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 37\n    }\n  }, \"Continuar\"))), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"col-12 col-md-4 detalleProductos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 29\n    }\n  }, __jsx(DetalleProductos, {\n    data: props.carritoReducer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 33\n    }\n  }))), __jsx(_JSXStyle, {\n    id: \"1473839781\",\n    __self: this\n  }, \"h2.jsx-1473839781{font-size:25px;}button#btn-continuar.jsx-1473839781{float:right;margin-top:20px;}.divTotalMobile.jsx-1473839781{display:none;}@media(max-width:768px){#btn-continuar.jsx-1473839781{display:none;}.divTotalMobile.jsx-1473839781{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:fixed;left:0;right:0px;bottom:0px;background-color:#f7f7f7;padding:16px;box-shadow:0 -2px 8px 2px rgba(0,0,0,.15);border-width:0 1px 1px;font-family:'Quicksand',sans-serif;}.detalleProductos.jsx-1473839781{display:none;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2ZyYW5jby9kZXNhcnJvbGxvL3Byb3llY3RvX29saXZlci9vbGl2ZXItd2ViLW5leHQvcGFnZXMvY2hlY2tvdXQvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNEtvQyxBQUU0QyxBQUVBLEFBR1csQUFFRyxBQUVULEFBY2pCLFlBbkJKLENBQzRCLEFBRUcsQUFnQjFCLEVBdkJZLGFBSWhCLDhDQU1xQyxtSEFDZCxlQUNULE9BQ0csVUFDRSxXQUNjLHlCQUNaLGFBQzZCLDBDQUNuQix1QkFDYSxtQ0FDeEMiLCJmaWxlIjoiL2hvbWUvZnJhbmNvL2Rlc2Fycm9sbG8vcHJveWVjdG9fb2xpdmVyL29saXZlci13ZWItbmV4dC9wYWdlcy9jaGVja291dC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ2FyZFViaWNhY2lvbiBmcm9tICcuLi8uLi9zcmMvY29tcG9uZW50cy9DYXJkVWJpY2FjaW9uL2luZGV4JzsgXG5pbXBvcnQgT3BjaW9uZXNFbnZpbyBmcm9tICcuLi8uLi9zcmMvY29tcG9uZW50cy9PcGNpb25lc0VudmlvJztcbmltcG9ydCBab25hRW52aW8gZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvWm9uYUVudmlvJztcbmltcG9ydCBIZWFkIGZyb20gJy4uLy4uL3NyYy9jb21wb25lbnRzL0hlYWQnO1xuaW1wb3J0IERldGFsbGVQcm9kdWN0b3MgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvRGV0YWxsZVByb2R1Y3Rvcyc7XG5pbXBvcnQgRXJyb3IgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvRXJyb3InO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCAqIGFzIGNhcnJpdG9BY3Rpb25zIGZyb20gJy4uLy4uL3N0b3JlL2FjdGlvbnMvY2Fycml0b0FjdGlvbnMnO1xuaW1wb3J0ICogYXMgdXN1YXJpb0FjdGlvbnMgZnJvbSAnLi4vLi4vc3RvcmUvYWN0aW9ucy91c3VhcmlvQWN0aW9ucyc7XG5pbXBvcnQge0FQSX0gZnJvbSAnLi4vLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCBMb2FkZXIgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvTG9hZGVyL2luZGV4JztcbmltcG9ydCBNZWRpb3NEZVBhZ28gZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvTWVkaW9zRGVQYWdvJztcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInO1xuXG5jb25zdCB7dHJhZXJQcm9kdWN0b3M6Y2Fycml0b1RyYWVyUHJvZHVjdG9zLGNhbWJpYXJNZWRpb0RlUGFnb30gPSBjYXJyaXRvQWN0aW9ucztcbmNvbnN0IHt2ZXJpZmljYXJTZXNpb259ID0gdXN1YXJpb0FjdGlvbnM7XG5cbmNvbnN0IENoZWNrb3V0ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgW3RpcG9FbnZpbywgc2V0VGlwb0VudmlvXSA9IHVzZVN0YXRlKHtcbiAgICAgICAgbm9ybWFsOnRydWUsXG4gICAgICAgIGV4cHJlc3M6ZmFsc2UsXG4gICAgICAgIGxvY2FsOmZhbHNlXG4gICAgfSk7XG5cbiAgICBjb25zdCBbem9uYUVudmlvLCBzZXRab25hRW52aW9dID0gdXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uc3R5bGUub3ZlcmZsb3dZID0gJ3Njcm9sbCc7XG4gICAgICAgIHByb3BzLmNhcnJpdG9UcmFlclByb2R1Y3RvcygpO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGNhbWJpYXJUaXBvRGVFbnZpbyA9IHRpcG9EZUVudmlvPT57XG4gICAgICAgIGlmKHRpcG9EZUVudmlvPT09J25vcm1hbCcpe1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tem9uYS1lbnZpbycpLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLW1lZGlvcy1wYWdvJykuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsJ3RydWUnKTtcbiAgICAgICAgICAgIHByb3BzLmNhbWJpYXJNZWRpb0RlUGFnbygnMScpO1xuICAgICAgICAgICAgcmV0dXJuIHNldFRpcG9FbnZpbyh7XG4gICAgICAgICAgICAgICAgbm9ybWFsOnRydWUsXG4gICAgICAgICAgICAgICAgZXhwcmVzczpmYWxzZSxcbiAgICAgICAgICAgICAgICBsb2NhbDpmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZih0aXBvRGVFbnZpbz09PSdleHByZXNzJyl7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS16b25hLWVudmlvJykucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tbWVkaW9zLXBhZ28nKS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywndHJ1ZScpO1xuICAgICAgICAgICAgcHJvcHMuY2FtYmlhck1lZGlvRGVQYWdvKCcxJyk7XG4gICAgICAgICAgICByZXR1cm4gc2V0VGlwb0VudmlvKHtcbiAgICAgICAgICAgICAgICBub3JtYWw6ZmFsc2UsXG4gICAgICAgICAgICAgICAgZXhwcmVzczp0cnVlLFxuICAgICAgICAgICAgICAgIGxvY2FsOmZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLXpvbmEtZW52aW8nKS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywndHJ1ZScpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS1tZWRpb3MtcGFnbycpLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgcmV0dXJuIHNldFRpcG9FbnZpbyh7XG4gICAgICAgICAgICBub3JtYWw6ZmFsc2UsXG4gICAgICAgICAgICBleHByZXNzOmZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6dHJ1ZVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IGluc2VydGFyWm9uYURlRW52aW8gPSB6b25hPT57XG4gICAgICAgIHNldFpvbmFFbnZpbyh6b25hKTtcbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVDbGljayA9ICgpPT57XG4gICAgICAgIGlmKCF0aXBvRW52aW8ubG9jYWwpe1xuICAgICAgICAgICAgaWYoIXByb3BzLnVzdWFyaW9SZWR1Y2VyLnVzdWFyaW8uYWRkcmVzcyB8fCBwcm9wcy51c3VhcmlvUmVkdWNlci51c3VhcmlvLmFkZHJlc3M9PT0nJykgcmV0dXJuIHNldEVycm9yKCdFcyBvYmxpZ2F0b3JpbyBjb21wbGV0YXIgdHUgdWJpY2FjacOzbi4nKTtcbiAgICAgICAgICAgIGlmKHpvbmFFbnZpbz09PScnKSByZXR1cm4gc2V0RXJyb3IoJ0VuIGNhc28gZGUgbm8gcmV0aXJhcmxvIHBvciBudWVzdHJvIGxvY2FsLCBlcyBvYmxpZ2F0b3JpbyBjb21wbGV0YXIgbGEgem9uYSBkZSBlbnbDrW8uJyk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0RXJyb3IoZmFsc2UpO1xuICAgICAgICBsZXQgdGlwb0RlRW52aW9BY3Rpdm87XG4gICAgICAgIGlmKHRpcG9FbnZpby5sb2NhbCl7dGlwb0RlRW52aW9BY3Rpdm89J0xvY2FsJ307XG4gICAgICAgIGlmKHRpcG9FbnZpby5ub3JtYWwpe3RpcG9EZUVudmlvQWN0aXZvPSdEb21pY2lsaW8nfVxuICAgICAgICBpZih0aXBvRW52aW8uZXhwcmVzcyl7dGlwb0RlRW52aW9BY3Rpdm89J0V4cHJlc3MnfVxuICAgICAgICBsZXQgZGF0YUVudmlvID0ge1xuICAgICAgICAgICAgdGlwbzp0aXBvRGVFbnZpb0FjdGl2byxcbiAgICAgICAgICAgIHpvbmE6em9uYUVudmlvXG4gICAgICAgIH1cbiAgICAgICAgaWYocHJvcHMuY2Fycml0b1JlZHVjZXIuaWRNZWRpb1BhZ28gPT0gJzEnKXtcbiAgICAgICAgICAgIC8vZ3VhcmRvIGRhdGEgZGUgZW52aW8gcGFyYSBsdWVnbyBkZSBoYWNlciBlbCBjaGVja291dCBkZSBtZXJjYWRvIHBhZ28sIGVudmlvIGxvcyBkYXRvcyBhbCBzZXJ2aWRvciBwYXJhIHJlZ2lzdHJhciBsYSB2ZW50YSBjb24gZWwgZW52aW8gY29ycmVzcG9uZGllbnRlLlxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RhdGFFbnZpbycsSlNPTi5zdHJpbmdpZnkoZGF0YUVudmlvKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHt0b2tlbn0gPSBwcm9wcy51c3VhcmlvUmVkdWNlci51c3VhcmlvO1xuICAgICAgICAgICAgY29uc3Qge3Byb2R1Y3Rvczpwcm9kdWN0b3NDYXJyaXRvfSA9IHByb3BzLmNhcnJpdG9SZWR1Y2VyO1xuICAgICAgICAgICAgbGV0IHByb2R1Y3RvcyA9IFtdO1xuICAgICAgICAgICAgcHJvZHVjdG9zQ2Fycml0by5mb3JFYWNoKHByZCA9PiB7XG4gICAgICAgICAgICAgICAgcHJvZHVjdG9zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTpwcmQuc3ViUHJvZHVjdG8sXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOnByZC50YW1hw7FvLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTpwcmQuY2FudGlkYWQsXG4gICAgICAgICAgICAgICAgICAgIHVuaXRfcHJpY2U6cHJkLnByZWNpb1VuaWRhZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKCd0b2tlbicsdG9rZW4pO1xuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICAgICAgLy8gZmV0Y2goYCR7QVBJfS9tZXJjYWRvcGFnb2Ase1xuICAgICAgICAgICAgLy8gICAgIG1ldGhvZDonUE9TVCcsXG4gICAgICAgICAgICAvLyAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIC8vICAgICBib2R5OkpTT04uc3RyaW5naWZ5KHByb2R1Y3RvcylcbiAgICAgICAgICAgIC8vIH0pLnRoZW4ocmVzPT5yZXMuanNvbigpKS50aGVuKGRhdGFtcD0+e1xuICAgICAgICAgICAgLy8gICAgIGNvbnN0IHtyZXNwb25zZX0gPSBkYXRhbXAuaW5mbztcbiAgICAgICAgICAgIC8vICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIC8vICAgICB3aW5kb3cubG9jYXRpb24uYXNzaWduKHJlc3BvbnNlLmluaXRfcG9pbnQpO1xuICAgICAgICAgICAgLy8gfSkuY2F0Y2goZXJyPT57XG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIC8vICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIC8vICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAvLyB9KVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGNvbnN0IHtpZFVzdWFyaW99ID0gcHJvcHMudXN1YXJpb1JlZHVjZXIudXN1YXJpbztcbiAgICAgICAgICAgIGNvbnN0IHtzdWJ0b3RhbCxwb3JjZW50YWplX2Rlc2N1ZW50byxkZXNjdWVudG8sdG90YWwscHJvZHVjdG9zLGlkTWVkaW9QYWdvfSA9IHByb3BzLmNhcnJpdG9SZWR1Y2VyO1xuICAgICAgICAgICAgY29uc3Qge3pvbmEsdGlwb30gPSBkYXRhRW52aW87XG4gICAgICAgICAgICBsZXQgZiA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBsZXQgbWVzID0gKChmLmdldE1vbnRoKCkpPDEwKT9gMCR7Zi5nZXRNb250aCgpKzF9YDpgJHtmLmdldE1vbnRoKCl9YDtcbiAgICAgICAgICAgIGxldCBkaWEgPSAoKGYuZ2V0RGF0ZSgpKTwxMCk/YDAke2YuZ2V0RGF0ZSgpfWA6YCR7Zi5nZXREYXRlKCl9YDtcbiAgICAgICAgICAgIGxldCBmZWNoYSA9IGAke2YuZ2V0RnVsbFllYXIoKX0tJHttZXN9LSR7ZGlhfWA7XG4gICAgICAgICAgICBsZXQgZGF0YVRvUmVxdWVzdCA9IHtcbiAgICAgICAgICAgICAgICBlbnZpbzp7XG4gICAgICAgICAgICAgICAgICAgIGlkWm9uYTp6b25hLFxuICAgICAgICAgICAgICAgICAgICB0aXBvOnRpcG9cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZlbnRhOntcbiAgICAgICAgICAgICAgICAgICAgc3VidG90YWwsXG4gICAgICAgICAgICAgICAgICAgIHBvcmNlbnRhamVfZGVzY3VlbnRvLFxuICAgICAgICAgICAgICAgICAgICBkZXNjdWVudG8sXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgICAgICAgICAgICBpZFVzdWFyaW8sXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RvcyxcbiAgICAgICAgICAgICAgICAgICAgZmVjaGEsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhY2lvbl9pZDpwcm9wcy5jb2xsZWN0aW9uX2lkIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGlkTWVkaW9QYWdvXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YVRvUmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgKCFwcm9wcy51c3VhcmlvUmVkdWNlci5sb2d1ZWFkbyk/PGRpdiBjbGFzc05hbWU9XCJtdC0zXCI+PEVycm9yIG1lc3NhZ2U9XCJObyBwdWVkZXMgcmVhbGl6YXIgdW5hIGNvbXByYSBzaW4gdGVuZXIgdW5hIHNlc2nDs24gYWN0aXZhLlwiLz48L2Rpdj46XG4gICAgICAgIDw+XG4gICAgICAgICAgICB7KHByb3BzLmNhcnJpdG9SZWR1Y2VyLnByb2R1Y3Rvcy5sZW5ndGg9PT0wKT88ZGl2IGNsYXNzTmFtZT1cIm10LTNcIj48RXJyb3IgbWVzc2FnZT1cIk5vIGhheSBwcm9kdWN0b3MgcGFyYSBmaW5hbGl6YXIgbGEgY29tcHJhLlwiLz48L2Rpdj46XG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgeyhsb2FkaW5nKT88ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lci1sb2FkZXJcIj48TG9hZGVyLz48L2Rpdj46bnVsbH0gICBcbiAgICAgICAgICAgICAgICAgICAgPEhlYWQgdGl0bGU9XCJPbGl2ZXIgUGV0IFNob3BcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyIG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtMTIgY29sLW1kLTggcHQtNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDI+w5psdGltb3MgcGFzb3MgcGFyYSB0ZXJtaW5hciB0dSBjb21wcmE8L2gyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KGVycm9yKT88RXJyb3IgbWVzc2FnZT17ZXJyb3J9Lz46bnVsbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhcmRVYmljYWNpb24gZGF0YVVzZXI9e3Byb3BzLnVzdWFyaW9SZWR1Y2VyLnVzdWFyaW99Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFpvbmFFbnZpbyBzZXRab25hRW52aW89e2luc2VydGFyWm9uYURlRW52aW99Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+PGI+QXRlbmNpw7NuOjwvYj4gU8OtIGRlc2VhIHJldGlyYXIgc3UgY29tcHJhIGVuIG51ZXN0cm8gbG9jYWwsIG5vIGVzIG5lY2VzYXJpbyBxdWUgc2VsZWNjaW9uZSB1bmEgem9uYSBkZSBlbnbDrW88L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cIm10LTVcIj5PcGNpb25lcyBkZSBlbnbDrW88L2gyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8T3BjaW9uZXNFbnZpbyB0aXBvRW52aW89e3RpcG9FbnZpb30gY2FtYmlhclRpcG9EZUVudmlvPXtjYW1iaWFyVGlwb0RlRW52aW99Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cIm10LTVcIj5TZWxlY2Npb25hIHVuIG1lZGlvIGRlIHBhZ288L2gyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWVkaW9zRGVQYWdvLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1wcmltYXJ5XCIgb25DbGljaz17aGFuZGxlQ2xpY2t9IGlkPVwiYnRuLWNvbnRpbnVhclwiPkNvbnRpbnVhcjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdlRvdGFsTW9iaWxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cInRvdGFsXCI+JHtwcm9wcy5jYXJyaXRvUmVkdWNlci5zdWJ0b3RhbH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnlcIiBvbkNsaWNrPXtoYW5kbGVDbGlja30+Q29udGludWFyPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIGNvbC1tZC00IGRldGFsbGVQcm9kdWN0b3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERldGFsbGVQcm9kdWN0b3MgZGF0YT17cHJvcHMuY2Fycml0b1JlZHVjZXJ9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgye2ZvbnQtc2l6ZToyNXB4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbiNidG4tY29udGludWFye1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDpyaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDoyMHB4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kaXZUb3RhbE1vYmlsZXtkaXNwbGF5Om5vbmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQG1lZGlhKG1heC13aWR0aDo3NjhweCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNidG4tY29udGludWFye2Rpc3BsYXk6bm9uZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRpdlRvdGFsTW9iaWxle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpmbGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OjA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDowcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDBweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmN2Y3Zjc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAtMnB4IDhweCAycHggcmdiYSgwLDAsMCwuMTUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiAwIDFweCAxcHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1F1aWNrc2FuZCcsIHNhbnMtc2VyaWY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kZXRhbGxlUHJvZHVjdG9ze1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICB9XG4gICAgICAgIDwvPlxuICAgICk7XG59XG4gXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoe2NhcnJpdG9SZWR1Y2VyLHVzdWFyaW9SZWR1Y2VyLGVudmlvc1JlZHVjZXJ9KT0+e1xuICAgIHJldHVybiB7XG4gICAgICAgIGNhcnJpdG9SZWR1Y2VyLFxuICAgICAgICB1c3VhcmlvUmVkdWNlcixcbiAgICAgICAgZW52aW9zUmVkdWNlclxuICAgIH07XG59XG5cbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IHtcbiAgICBjYXJyaXRvVHJhZXJQcm9kdWN0b3MsXG4gICAgdmVyaWZpY2FyU2VzaW9uLFxuICAgIGNhbWJpYXJNZWRpb0RlUGFnb1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsbWFwRGlzcGF0Y2hUb1Byb3BzKShDaGVja291dCk7Il19 */\\n/*@ sourceURL=/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/checkout/index.js */\"))));\n};\n\nconst mapStateToProps = ({\n  carritoReducer,\n  usuarioReducer,\n  enviosReducer\n}) => {\n  return {\n    carritoReducer,\n    usuarioReducer,\n    enviosReducer\n  };\n};\n\nconst mapDispatchToProps = {\n  carritoTraerProductos,\n  verificarSesion,\n  cambiarMedioDePago\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Checkout);","map":{"version":3,"sources":["/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/checkout/index.js"],"names":["useEffect","useState","CardUbicacion","OpcionesEnvio","ZonaEnvio","Head","DetalleProductos","Error","connect","carritoActions","usuarioActions","API","Loader","MediosDePago","Router","traerProductos","carritoTraerProductos","cambiarMedioDePago","verificarSesion","Checkout","props","tipoEnvio","setTipoEnvio","normal","express","local","zonaEnvio","setZonaEnvio","error","setError","loading","setLoading","document","getElementsByTagName","style","overflowY","cambiarTipoDeEnvio","tipoDeEnvio","getElementById","removeAttribute","setAttribute","insertarZonaDeEnvio","zona","handleClick","usuarioReducer","usuario","address","tipoDeEnvioActivo","dataEnvio","tipo","carritoReducer","idMedioPago","localStorage","setItem","JSON","stringify","token","productos","productosCarrito","forEach","prd","push","title","subProducto","description","tamaño","quantity","cantidad","unit_price","precioUnidad","headers","Headers","append","idUsuario","subtotal","porcentaje_descuento","descuento","total","f","Date","mes","getMonth","dia","getDate","fecha","getFullYear","dataToRequest","envio","idZona","venta","operacion_id","collection_id","console","log","logueado","length","mapStateToProps","enviosReducer","mapDispatchToProps"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport CardUbicacion from '../../src/components/CardUbicacion/index'; \nimport OpcionesEnvio from '../../src/components/OpcionesEnvio';\nimport ZonaEnvio from '../../src/components/ZonaEnvio';\nimport Head from '../../src/components/Head';\nimport DetalleProductos from '../../src/components/DetalleProductos';\nimport Error from '../../src/components/Error';\nimport { connect } from 'react-redux';\nimport * as carritoActions from '../../store/actions/carritoActions';\nimport * as usuarioActions from '../../store/actions/usuarioActions';\nimport {API} from '../../config/index';\nimport Loader from '../../src/components/Loader/index';\nimport MediosDePago from '../../src/components/MediosDePago';\nimport Router from 'next/router';\n\nconst {traerProductos:carritoTraerProductos,cambiarMedioDePago} = carritoActions;\nconst {verificarSesion} = usuarioActions;\n\nconst Checkout = (props) => {\n    const [tipoEnvio, setTipoEnvio] = useState({\n        normal:true,\n        express:false,\n        local:false\n    });\n\n    const [zonaEnvio, setZonaEnvio] = useState('');\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        document.getElementsByTagName('body')[0].style.overflowY = 'scroll';\n        props.carritoTraerProductos();\n    }, []);\n\n    const cambiarTipoDeEnvio = tipoDeEnvio=>{\n        if(tipoDeEnvio==='normal'){\n            document.getElementById('form-zona-envio').removeAttribute('disabled');\n            document.getElementById('form-medios-pago').setAttribute('disabled','true');\n            props.cambiarMedioDePago('1');\n            return setTipoEnvio({\n                normal:true,\n                express:false,\n                local:false\n            })\n        }\n        if(tipoDeEnvio==='express'){\n            document.getElementById('form-zona-envio').removeAttribute('disabled');\n            document.getElementById('form-medios-pago').setAttribute('disabled','true');\n            props.cambiarMedioDePago('1');\n            return setTipoEnvio({\n                normal:false,\n                express:true,\n                local:false\n            })\n        }\n        document.getElementById('form-zona-envio').setAttribute('disabled','true');\n        document.getElementById('form-medios-pago').removeAttribute('disabled');\n        return setTipoEnvio({\n            normal:false,\n            express:false,\n            local:true\n        })\n    }\n\n    const insertarZonaDeEnvio = zona=>{\n        setZonaEnvio(zona);\n    }\n\n    const handleClick = ()=>{\n        if(!tipoEnvio.local){\n            if(!props.usuarioReducer.usuario.address || props.usuarioReducer.usuario.address==='') return setError('Es obligatorio completar tu ubicación.');\n            if(zonaEnvio==='') return setError('En caso de no retirarlo por nuestro local, es obligatorio completar la zona de envío.');\n        }\n        setLoading(true);\n        setError(false);\n        let tipoDeEnvioActivo;\n        if(tipoEnvio.local){tipoDeEnvioActivo='Local'};\n        if(tipoEnvio.normal){tipoDeEnvioActivo='Domicilio'}\n        if(tipoEnvio.express){tipoDeEnvioActivo='Express'}\n        let dataEnvio = {\n            tipo:tipoDeEnvioActivo,\n            zona:zonaEnvio\n        }\n        if(props.carritoReducer.idMedioPago == '1'){\n            //guardo data de envio para luego de hacer el checkout de mercado pago, envio los datos al servidor para registrar la venta con el envio correspondiente.\n            localStorage.setItem('dataEnvio',JSON.stringify(dataEnvio));\n\n            const {token} = props.usuarioReducer.usuario;\n            const {productos:productosCarrito} = props.carritoReducer;\n            let productos = [];\n            productosCarrito.forEach(prd => {\n                productos.push({\n                    title:prd.subProducto,\n                    description:prd.tamaño,\n                    quantity:prd.cantidad,\n                    unit_price:prd.precioUnidad\n                })\n            });\n            let headers = new Headers();\n            headers.append('token',token);\n            headers.append(\"Content-Type\", \"application/json\");\n            // fetch(`${API}/mercadopago`,{\n            //     method:'POST',\n            //     headers,\n            //     body:JSON.stringify(productos)\n            // }).then(res=>res.json()).then(datamp=>{\n            //     const {response} = datamp.info;\n            //     setLoading(false);\n            //     window.location.assign(response.init_point);\n            // }).catch(err=>{\n            //     console.log(err);\n            //     setLoading(false);\n            //     setError(err.message);\n            // })\n        }else{\n            const {idUsuario} = props.usuarioReducer.usuario;\n            const {subtotal,porcentaje_descuento,descuento,total,productos,idMedioPago} = props.carritoReducer;\n            const {zona,tipo} = dataEnvio;\n            let f = new Date();\n            let mes = ((f.getMonth())<10)?`0${f.getMonth()+1}`:`${f.getMonth()}`;\n            let dia = ((f.getDate())<10)?`0${f.getDate()}`:`${f.getDate()}`;\n            let fecha = `${f.getFullYear()}-${mes}-${dia}`;\n            let dataToRequest = {\n                envio:{\n                    idZona:zona,\n                    tipo:tipo\n                },\n                venta:{\n                    subtotal,\n                    porcentaje_descuento,\n                    descuento,\n                    total,\n                    idUsuario,\n                    productos,\n                    fecha,\n                    operacion_id:props.collection_id || null,\n                    idMedioPago\n                }\n            }\n            console.log(dataToRequest);\n        };\n    }\n\n    return (\n        (!props.usuarioReducer.logueado)?<div className=\"mt-3\"><Error message=\"No puedes realizar una compra sin tener una sesión activa.\"/></div>:\n        <>\n            {(props.carritoReducer.productos.length===0)?<div className=\"mt-3\"><Error message=\"No hay productos para finalizar la compra.\"/></div>:\n                <>\n                    {(loading)?<div className=\"container-loader\"><Loader/></div>:null}   \n                    <Head title=\"Oliver Pet Shop\"/>\n                    <div className=\"container mb-4\">\n                        <div className=\"row\">\n                            <div className=\"col-12 col-md-8 pt-4\">\n                                <h2>Últimos pasos para terminar tu compra</h2>\n                                {(error)?<Error message={error}/>:null}\n                                <CardUbicacion dataUser={props.usuarioReducer.usuario}/>\n                                <ZonaEnvio setZonaEnvio={insertarZonaDeEnvio}/>\n                                <div className=\"alert alert-warning\"><b>Atención:</b> Sí desea retirar su compra en nuestro local, no es necesario que seleccione una zona de envío</div>\n                                <h2 className=\"mt-5\">Opciones de envío</h2>\n                                <OpcionesEnvio tipoEnvio={tipoEnvio} cambiarTipoDeEnvio={cambiarTipoDeEnvio}/>\n                                <h2 className=\"mt-5\">Selecciona un medio de pago</h2>\n                                <MediosDePago/>\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={handleClick} id=\"btn-continuar\">Continuar</button>\n                                <div className=\"divTotalMobile\">\n                                    <span id=\"total\">${props.carritoReducer.subtotal}</span>\n                                    <button type=\"button\" className=\"btn btn-primary\" onClick={handleClick}>Continuar</button>\n                                </div>\n                            </div>\n                            <div className=\"col-12 col-md-4 detalleProductos\">\n                                <DetalleProductos data={props.carritoReducer}/>\n                            </div>\n                        </div>\n                        <style jsx>{`\n                            h2{font-size:25px}\n                            button#btn-continuar{\n                                float:right;\n                                margin-top:20px\n                            }\n                            .divTotalMobile{display:none}\n                            @media(max-width:768px){\n                                #btn-continuar{display:none}\n                                .divTotalMobile{\n                                    display:flex;\n                                    justify-content:space-between;\n                                    position: fixed;\n                                    left:0;\n                                    right:0px;\n                                    bottom: 0px;\n                                    background-color: #f7f7f7;\n                                    padding: 16px;\n                                    box-shadow: 0 -2px 8px 2px rgba(0,0,0,.15);\n                                    border-width: 0 1px 1px;\n                                    font-family: 'Quicksand', sans-serif;\n                                } \n                                .detalleProductos{\n                                    display:none\n                                }           \n                            }\n                        `}</style>\n                    </div>\n                </>\n            }\n        </>\n    );\n}\n \nconst mapStateToProps = ({carritoReducer,usuarioReducer,enviosReducer})=>{\n    return {\n        carritoReducer,\n        usuarioReducer,\n        enviosReducer\n    };\n}\n\nconst mapDispatchToProps = {\n    carritoTraerProductos,\n    verificarSesion,\n    cambiarMedioDePago\n};\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Checkout);"]},"metadata":{},"sourceType":"module"}