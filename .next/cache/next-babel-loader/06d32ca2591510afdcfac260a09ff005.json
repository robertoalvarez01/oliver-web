{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\franc\\\\Documents\\\\oliver-2\\\\sitio-desa\\\\pages\\\\procesarVenta\\\\[[...params]].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from '../../src/components/Head';\nimport Loader from '../../src/components/Loader';\nimport { useRouter } from 'next/router';\nimport { connect } from 'react-redux';\nimport * as carritoActions from '../../store/actions/carritoActions';\nimport * as enviosActions from '../../store/actions/enviosActions';\nimport { useEffect } from 'react';\nconst {\n  guardar: enviosGuardar\n} = enviosActions;\nconst {\n  traerProductos: carritoTraerProductos\n} = carritoActions;\n\nconst ProcesarVenta = props => {\n  useEffect(() => {\n    if (props.usuarioReducer.logueado) {\n      getData();\n    }\n  }, [props.usuarioReducer]);\n\n  const getData = async () => {\n    const dataEnvio = JSON.parse(localStorage.getItem('dataEnvio'));\n    props.enviosGuardar(dataEnvio);\n    props.carritoTraerProductos();\n    const {\n      idUsuario\n    } = props.usuarioReducer.usuario;\n    const {\n      subtotal,\n      porcentaje_descuento,\n      descuento,\n      total,\n      productos\n    } = props.carritoReducer;\n    const {\n      idZona,\n      tipo\n    } = dataEnvio;\n    let dataToRequest = {\n      envio: {\n        idZona,\n        tipo\n      },\n      venta: {\n        subtotal,\n        porcentaje_descuento,\n        descuento,\n        total,\n        idUsuario,\n        productos\n      }\n    };\n    console.log(dataToRequest);\n  };\n\n  console.log(props);\n  const router = useRouter();\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    title: \"Finalizacion de compra\",\n    metadesc: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }), __jsx(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }));\n};\n\nProcesarVenta.getInitialProps = async ({\n  query\n}) => {\n  const {\n    collection_id,\n    collection_status,\n    external_reference,\n    merchant,\n    account_id,\n    merchant_order_id,\n    payment_id,\n    payment_type,\n    preference_id,\n    processing_mode,\n    site_id,\n    status\n  } = query;\n  return {\n    collection_id,\n    collection_status,\n    external_reference,\n    merchant,\n    account_id,\n    merchant_order_id,\n    payment_id,\n    payment_type,\n    preference_id,\n    processing_mode,\n    site_id,\n    status\n  };\n};\n\nconst mapStateToProps = ({\n  carritoReducer,\n  enviosReducer,\n  usuarioReducer\n}) => {\n  return {\n    carritoReducer,\n    enviosReducer,\n    usuarioReducer\n  };\n};\n\nconst mapDispatchToProps = {\n  enviosGuardar,\n  carritoTraerProductos\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ProcesarVenta);","map":{"version":3,"sources":["C:/Users/franc/Documents/oliver-2/sitio-desa/pages/procesarVenta/[[...params]].js"],"names":["Head","Loader","useRouter","connect","carritoActions","enviosActions","useEffect","guardar","enviosGuardar","traerProductos","carritoTraerProductos","ProcesarVenta","props","usuarioReducer","logueado","getData","dataEnvio","JSON","parse","localStorage","getItem","idUsuario","usuario","subtotal","porcentaje_descuento","descuento","total","productos","carritoReducer","idZona","tipo","dataToRequest","envio","venta","console","log","router","getInitialProps","query","collection_id","collection_status","external_reference","merchant","account_id","merchant_order_id","payment_id","payment_type","preference_id","processing_mode","site_id","status","mapStateToProps","enviosReducer","mapDispatchToProps"],"mappings":"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","sourcesContent":["import Head from '../../src/components/Head';\r\nimport Loader from '../../src/components/Loader';\r\nimport {useRouter} from 'next/router';\r\nimport {connect} from 'react-redux';\r\nimport * as carritoActions from '../../store/actions/carritoActions';\r\nimport * as enviosActions from '../../store/actions/enviosActions';\r\nimport { useEffect } from 'react';\r\n\r\nconst {guardar:enviosGuardar} = enviosActions;\r\nconst {traerProductos:carritoTraerProductos} = carritoActions;\r\n\r\nconst ProcesarVenta = (props) => {\r\n    useEffect(() => {\r\n        if(props.usuarioReducer.logueado){\r\n            getData();\r\n        }\r\n    }, [props.usuarioReducer]);\r\n\r\n    const getData = async()=>{\r\n        const dataEnvio = JSON.parse(localStorage.getItem('dataEnvio'));\r\n        props.enviosGuardar(dataEnvio);\r\n        props.carritoTraerProductos();\r\n        const {idUsuario} = props.usuarioReducer.usuario;\r\n        const {subtotal,porcentaje_descuento,descuento,total,productos} = props.carritoReducer;\r\n        const {idZona,tipo} = dataEnvio;\r\n        let dataToRequest = {\r\n            envio:{\r\n                idZona,\r\n                tipo\r\n            },\r\n            venta:{\r\n                subtotal,\r\n                porcentaje_descuento,\r\n                descuento,\r\n                total,\r\n                idUsuario,\r\n                productos\r\n            }\r\n        }\r\n        console.log(dataToRequest);\r\n    }\r\n\r\n    console.log(props);\r\n    const router = useRouter();\r\n    return (\r\n        <>\r\n            <Head title=\"Finalizacion de compra\" metadesc=\"\"/>\r\n            <Loader/>\r\n        </>\r\n    );\r\n}\r\n\r\nProcesarVenta.getInitialProps = async({query})=>{\r\n    const {collection_id,collection_status,external_reference,merchant,account_id,merchant_order_id,payment_id,payment_type,preference_id,processing_mode,site_id,status} = query;\r\n    return {collection_id,collection_status,external_reference,merchant,account_id,merchant_order_id,payment_id,payment_type,preference_id,processing_mode,site_id,status};\r\n}\r\n\r\nconst mapStateToProps = ({carritoReducer,enviosReducer,usuarioReducer})=>{\r\n    return {carritoReducer,enviosReducer,usuarioReducer}\r\n};\r\nconst mapDispatchToProps = {\r\n    enviosGuardar,\r\n    carritoTraerProductos\r\n}\r\n \r\nexport default connect(mapStateToProps,mapDispatchToProps)(ProcesarVenta);"]},"metadata":{},"sourceType":"module"}