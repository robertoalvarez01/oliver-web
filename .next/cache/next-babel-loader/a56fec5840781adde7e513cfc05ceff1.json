{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\franc\\\\Documents\\\\oliver-2\\\\sitio-desa\\\\pages\\\\checkout\\\\index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport CardUbicacion from '../../src/components/CardUbicacion/index';\nimport OpcionesEnvio from '../../src/components/OpcionesEnvio';\nimport ZonaEnvio from '../../src/components/ZonaEnvio';\nimport Head from '../../src/components/Head';\nimport DetalleProductos from '../../src/components/DetalleProductos';\nimport Error from '../../src/components/Error';\nimport { connect } from 'react-redux';\nimport * as carritoActions from '../../store/actions/carritoActions';\nimport * as usuarioActions from '../../store/actions/usuarioActions';\nimport { API } from '../../config/index';\nimport Loader from '../../src/components/Loader/index';\nimport MediosDePago from '../../src/components/MediosDePago';\nconst {\n  traerProductos: carritoTraerProductos\n} = carritoActions;\nconst {\n  verificarSesion\n} = usuarioActions;\n\nconst Checkout = props => {\n  const {\n    0: tipoEnvio,\n    1: setTipoEnvio\n  } = useState({\n    normal: true,\n    express: false,\n    local: false\n  });\n  const {\n    0: medioDePago,\n    1: setMedioDePago\n  } = useState('');\n  const {\n    0: zonaEnvio,\n    1: setZonaEnvio\n  } = useState('');\n  const {\n    0: error,\n    1: setError\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  useEffect(() => {\n    props.carritoTraerProductos();\n  }, []);\n  useEffect(() => {\n    console.log(props.carritoReducer.productos);\n  }, [props.carritoReducer.productos]);\n\n  const cambiarTipoDeEnvio = tipoDeEnvio => {\n    if (tipoDeEnvio === 'normal') {\n      return setTipoEnvio({\n        normal: true,\n        express: false,\n        local: false\n      });\n    }\n\n    if (tipoDeEnvio === 'express') {\n      return setTipoEnvio({\n        normal: false,\n        express: true,\n        local: false\n      });\n    }\n\n    return setTipoEnvio({\n      normal: false,\n      express: false,\n      local: true\n    });\n  };\n\n  const insertarZonaDeEnvio = zona => {\n    setZonaEnvio(zona);\n  };\n\n  const cambiarMedioDePago = event => setMedioDePago(event.target.value);\n\n  const handleClick = () => {\n    if (!props.usuarioReducer.usuario.address || props.usuarioReducer.usuario.address === '') return setError('Es obligatorio completar tu ubicación.');\n    if (zonaEnvio === '') return setError('Es obligatorio completar la zona de envío.');\n    setLoading(true);\n    let tipoDeEnvioActivo;\n\n    if (tipoEnvio.local) {\n      tipoDeEnvioActivo = 'Local';\n    }\n\n    ;\n\n    if (tipoEnvio.normal) {\n      tipoDeEnvioActivo = 'Domicilio';\n    }\n\n    if (tipoEnvio.express) {\n      tipoDeEnvioActivo = 'Express';\n    }\n\n    let dataEnvio = {\n      tipo: tipoDeEnvioActivo,\n      zona: zonaEnvio,\n      address: props.usuarioReducer.usuario.address\n    }; //guardo data de envio para luego de hacer el checkout de mercado pago, envio los datos al servidor para registrar la venta con el envio correspondiente.\n\n    localStorage.setItem('dataEnvio', JSON.stringify(dataEnvio));\n    const {\n      token\n    } = props.usuarioReducer.usuario;\n    const {\n      productos: productosCarrito\n    } = props.carritoReducer;\n    let productos = [];\n    productosCarrito.forEach(prd => {\n      productos.push({\n        title: prd.subProducto,\n        description: prd.tamaño,\n        quantity: prd.cantidad,\n        unit_price: prd.precioUnidad\n      });\n    });\n    let headers = new Headers();\n    headers.append('token', token);\n    headers.append(\"Content-Type\", \"application/json\");\n    fetch(`${API}/mercadopago`, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(productos)\n    }).then(res => res.json()).then(datamp => {\n      const {\n        response\n      } = datamp.info;\n      setLoading(false);\n      window.location.assign(response.init_point);\n    }).catch(err => {\n      console.log(err);\n      setLoading(false);\n      setError(err.message);\n    });\n  };\n\n  return !props.usuarioReducer.logueado ? __jsx(\"div\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 42\n    }\n  }, __jsx(Error, {\n    message: \"No puedes realizar una compra sin tener una sesi\\xF3n activa.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 64\n    }\n  })) : __jsx(React.Fragment, null, props.carritoReducer.productos.length === 0 ? __jsx(\"div\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 58\n    }\n  }, __jsx(Error, {\n    message: \"No hay productos para finalizar la compra.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 80\n    }\n  })) : __jsx(React.Fragment, null, loading ? __jsx(\"div\", {\n    className: \"container-loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 32\n    }\n  }, __jsx(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 66\n    }\n  })) : null, __jsx(Head, {\n    title: \"Oliver Pet Shop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"container mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"col-12 col-md-8 pt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 29\n    }\n  }, __jsx(\"h2\", {\n    className: \"jsx-1473839781\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 33\n    }\n  }, \"\\xDAltimos pasos para terminar tu compra\"), error ? __jsx(Error, {\n    message: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 42\n    }\n  }) : null, __jsx(CardUbicacion, {\n    dataUser: props.usuarioReducer.usuario,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }), __jsx(ZonaEnvio, {\n    setZonaEnvio: insertarZonaDeEnvio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 33\n    }\n  }), __jsx(\"h2\", {\n    className: \"jsx-1473839781\" + \" \" + \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 33\n    }\n  }, \"Selecciona un medio de pago\"), __jsx(MediosDePago, {\n    medioDePago: medioDePago,\n    cambiarMedioDePago: cambiarMedioDePago,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 33\n    }\n  }), __jsx(\"h2\", {\n    className: \"jsx-1473839781\" + \" \" + \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 33\n    }\n  }, \"Opciones de env\\xEDo\"), __jsx(OpcionesEnvio, {\n    tipoEnvio: tipoEnvio,\n    cambiarTipoDeEnvio: cambiarTipoDeEnvio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 33\n    }\n  }), __jsx(\"button\", {\n    type: \"button\",\n    onClick: handleClick,\n    id: \"btn-continuar\",\n    className: \"jsx-1473839781\" + \" \" + \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 33\n    }\n  }, \"Continuar\"), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"divTotalMobile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 33\n    }\n  }, __jsx(\"span\", {\n    id: \"total\",\n    className: \"jsx-1473839781\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 37\n    }\n  }, \"$\", props.carritoReducer.subtotal), __jsx(\"button\", {\n    type: \"button\",\n    onClick: handleClick,\n    className: \"jsx-1473839781\" + \" \" + \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 37\n    }\n  }, \"Continuar\"))), __jsx(\"div\", {\n    className: \"jsx-1473839781\" + \" \" + \"col-12 col-md-4 detalleProductos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, __jsx(DetalleProductos, {\n    data: props.carritoReducer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 33\n    }\n  }))), __jsx(_JSXStyle, {\n    id: \"1473839781\",\n    __self: this\n  }, \"h2.jsx-1473839781{font-size:25px;}button#btn-continuar.jsx-1473839781{float:right;margin-top:20px;}.divTotalMobile.jsx-1473839781{display:none;}@media(max-width:768px){#btn-continuar.jsx-1473839781{display:none;}.divTotalMobile.jsx-1473839781{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:fixed;left:0;right:0px;bottom:0px;background-color:#f7f7f7;padding:16px;box-shadow:0 -2px 8px 2px rgba(0,0,0,.15);border-width:0 1px 1px;font-family:'Quicksand',sans-serif;}.detalleProductos.jsx-1473839781{display:none;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZnJhbmNcXERvY3VtZW50c1xcb2xpdmVyLTJcXHNpdGlvLWRlc2FcXHBhZ2VzXFxjaGVja291dFxcaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNElvQyxBQUU0QyxBQUVBLEFBR1csQUFFRyxBQUVULEFBY2pCLFlBbkJKLENBQzRCLEFBRUcsQUFnQjFCLEVBdkJZLGFBSWhCLDhDQU1xQyxtSEFDZCxlQUNULE9BQ0csVUFDRSxXQUNjLHlCQUNaLGFBQzZCLDBDQUNuQix1QkFDYSxtQ0FDeEMiLCJmaWxlIjoiQzpcXFVzZXJzXFxmcmFuY1xcRG9jdW1lbnRzXFxvbGl2ZXItMlxcc2l0aW8tZGVzYVxccGFnZXNcXGNoZWNrb3V0XFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBDYXJkVWJpY2FjaW9uIGZyb20gJy4uLy4uL3NyYy9jb21wb25lbnRzL0NhcmRVYmljYWNpb24vaW5kZXgnOyBcclxuaW1wb3J0IE9wY2lvbmVzRW52aW8gZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvT3BjaW9uZXNFbnZpbyc7XHJcbmltcG9ydCBab25hRW52aW8gZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvWm9uYUVudmlvJztcclxuaW1wb3J0IEhlYWQgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvSGVhZCc7XHJcbmltcG9ydCBEZXRhbGxlUHJvZHVjdG9zIGZyb20gJy4uLy4uL3NyYy9jb21wb25lbnRzL0RldGFsbGVQcm9kdWN0b3MnO1xyXG5pbXBvcnQgRXJyb3IgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvRXJyb3InO1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xyXG5pbXBvcnQgKiBhcyBjYXJyaXRvQWN0aW9ucyBmcm9tICcuLi8uLi9zdG9yZS9hY3Rpb25zL2NhcnJpdG9BY3Rpb25zJztcclxuaW1wb3J0ICogYXMgdXN1YXJpb0FjdGlvbnMgZnJvbSAnLi4vLi4vc3RvcmUvYWN0aW9ucy91c3VhcmlvQWN0aW9ucyc7XHJcbmltcG9ydCB7QVBJfSBmcm9tICcuLi8uLi9jb25maWcvaW5kZXgnO1xyXG5pbXBvcnQgTG9hZGVyIGZyb20gJy4uLy4uL3NyYy9jb21wb25lbnRzL0xvYWRlci9pbmRleCc7XHJcbmltcG9ydCBNZWRpb3NEZVBhZ28gZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvTWVkaW9zRGVQYWdvJztcclxuXHJcbmNvbnN0IHt0cmFlclByb2R1Y3RvczpjYXJyaXRvVHJhZXJQcm9kdWN0b3N9ID0gY2Fycml0b0FjdGlvbnM7XHJcbmNvbnN0IHt2ZXJpZmljYXJTZXNpb259ID0gdXN1YXJpb0FjdGlvbnM7XHJcblxyXG5jb25zdCBDaGVja291dCA9IChwcm9wcykgPT4ge1xyXG4gICAgY29uc3QgW3RpcG9FbnZpbywgc2V0VGlwb0VudmlvXSA9IHVzZVN0YXRlKHtcclxuICAgICAgICBub3JtYWw6dHJ1ZSxcclxuICAgICAgICBleHByZXNzOmZhbHNlLFxyXG4gICAgICAgIGxvY2FsOmZhbHNlXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBbbWVkaW9EZVBhZ28sIHNldE1lZGlvRGVQYWdvXSA9IHVzZVN0YXRlKCcnKTtcclxuXHJcbiAgICBjb25zdCBbem9uYUVudmlvLCBzZXRab25hRW52aW9dID0gdXNlU3RhdGUoJycpO1xyXG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBwcm9wcy5jYXJyaXRvVHJhZXJQcm9kdWN0b3MoKTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHByb3BzLmNhcnJpdG9SZWR1Y2VyLnByb2R1Y3Rvcyk7XHJcbiAgICB9LCBbcHJvcHMuY2Fycml0b1JlZHVjZXIucHJvZHVjdG9zXSlcclxuXHJcbiAgICBjb25zdCBjYW1iaWFyVGlwb0RlRW52aW8gPSB0aXBvRGVFbnZpbz0+e1xyXG4gICAgICAgIGlmKHRpcG9EZUVudmlvPT09J25vcm1hbCcpe1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0VGlwb0VudmlvKHtcclxuICAgICAgICAgICAgICAgIG5vcm1hbDp0cnVlLFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzczpmYWxzZSxcclxuICAgICAgICAgICAgICAgIGxvY2FsOmZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRpcG9EZUVudmlvPT09J2V4cHJlc3MnKXtcclxuICAgICAgICAgICAgcmV0dXJuIHNldFRpcG9FbnZpbyh7XHJcbiAgICAgICAgICAgICAgICBub3JtYWw6ZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBleHByZXNzOnRydWUsXHJcbiAgICAgICAgICAgICAgICBsb2NhbDpmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2V0VGlwb0VudmlvKHtcclxuICAgICAgICAgICAgbm9ybWFsOmZhbHNlLFxyXG4gICAgICAgICAgICBleHByZXNzOmZhbHNlLFxyXG4gICAgICAgICAgICBsb2NhbDp0cnVlXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbnNlcnRhclpvbmFEZUVudmlvID0gem9uYT0+e1xyXG4gICAgICAgIHNldFpvbmFFbnZpbyh6b25hKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjYW1iaWFyTWVkaW9EZVBhZ28gPSBldmVudD0+c2V0TWVkaW9EZVBhZ28oZXZlbnQudGFyZ2V0LnZhbHVlKTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVDbGljayA9ICgpPT57XHJcbiAgICAgICAgaWYoIXByb3BzLnVzdWFyaW9SZWR1Y2VyLnVzdWFyaW8uYWRkcmVzcyB8fCBwcm9wcy51c3VhcmlvUmVkdWNlci51c3VhcmlvLmFkZHJlc3M9PT0nJykgcmV0dXJuIHNldEVycm9yKCdFcyBvYmxpZ2F0b3JpbyBjb21wbGV0YXIgdHUgdWJpY2FjacOzbi4nKTtcclxuICAgICAgICBpZih6b25hRW52aW89PT0nJykgcmV0dXJuIHNldEVycm9yKCdFcyBvYmxpZ2F0b3JpbyBjb21wbGV0YXIgbGEgem9uYSBkZSBlbnbDrW8uJyk7XHJcbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICBsZXQgdGlwb0RlRW52aW9BY3Rpdm87XHJcbiAgICAgICAgaWYodGlwb0VudmlvLmxvY2FsKXt0aXBvRGVFbnZpb0FjdGl2bz0nTG9jYWwnfTtcclxuICAgICAgICBpZih0aXBvRW52aW8ubm9ybWFsKXt0aXBvRGVFbnZpb0FjdGl2bz0nRG9taWNpbGlvJ31cclxuICAgICAgICBpZih0aXBvRW52aW8uZXhwcmVzcyl7dGlwb0RlRW52aW9BY3Rpdm89J0V4cHJlc3MnfVxyXG4gICAgICAgIGxldCBkYXRhRW52aW8gPSB7XHJcbiAgICAgICAgICAgIHRpcG86dGlwb0RlRW52aW9BY3Rpdm8sXHJcbiAgICAgICAgICAgIHpvbmE6em9uYUVudmlvLFxyXG4gICAgICAgICAgICBhZGRyZXNzOnByb3BzLnVzdWFyaW9SZWR1Y2VyLnVzdWFyaW8uYWRkcmVzc1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2d1YXJkbyBkYXRhIGRlIGVudmlvIHBhcmEgbHVlZ28gZGUgaGFjZXIgZWwgY2hlY2tvdXQgZGUgbWVyY2FkbyBwYWdvLCBlbnZpbyBsb3MgZGF0b3MgYWwgc2Vydmlkb3IgcGFyYSByZWdpc3RyYXIgbGEgdmVudGEgY29uIGVsIGVudmlvIGNvcnJlc3BvbmRpZW50ZS5cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGF0YUVudmlvJyxKU09OLnN0cmluZ2lmeShkYXRhRW52aW8pKTtcclxuXHJcbiAgICAgICAgY29uc3Qge3Rva2VufSA9IHByb3BzLnVzdWFyaW9SZWR1Y2VyLnVzdWFyaW87XHJcbiAgICAgICAgY29uc3Qge3Byb2R1Y3Rvczpwcm9kdWN0b3NDYXJyaXRvfSA9IHByb3BzLmNhcnJpdG9SZWR1Y2VyO1xyXG4gICAgICAgIGxldCBwcm9kdWN0b3MgPSBbXTtcclxuICAgICAgICBwcm9kdWN0b3NDYXJyaXRvLmZvckVhY2gocHJkID0+IHtcclxuICAgICAgICAgICAgcHJvZHVjdG9zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6cHJkLnN1YlByb2R1Y3RvLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246cHJkLnRhbWHDsW8sXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eTpwcmQuY2FudGlkYWQsXHJcbiAgICAgICAgICAgICAgICB1bml0X3ByaWNlOnByZC5wcmVjaW9VbmlkYWRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XHJcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3Rva2VuJyx0b2tlbik7XHJcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgIGZldGNoKGAke0FQSX0vbWVyY2Fkb3BhZ29gLHtcclxuICAgICAgICAgICAgbWV0aG9kOidQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTpKU09OLnN0cmluZ2lmeShwcm9kdWN0b3MpXHJcbiAgICAgICAgfSkudGhlbihyZXM9PnJlcy5qc29uKCkpLnRoZW4oZGF0YW1wPT57XHJcbiAgICAgICAgICAgIGNvbnN0IHtyZXNwb25zZX0gPSBkYXRhbXAuaW5mbztcclxuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24ocmVzcG9uc2UuaW5pdF9wb2ludCk7XHJcbiAgICAgICAgfSkuY2F0Y2goZXJyPT57XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICAoIXByb3BzLnVzdWFyaW9SZWR1Y2VyLmxvZ3VlYWRvKT88ZGl2IGNsYXNzTmFtZT1cIm10LTNcIj48RXJyb3IgbWVzc2FnZT1cIk5vIHB1ZWRlcyByZWFsaXphciB1bmEgY29tcHJhIHNpbiB0ZW5lciB1bmEgc2VzacOzbiBhY3RpdmEuXCIvPjwvZGl2PjpcclxuICAgICAgICA8PlxyXG4gICAgICAgICAgICB7KHByb3BzLmNhcnJpdG9SZWR1Y2VyLnByb2R1Y3Rvcy5sZW5ndGg9PT0wKT88ZGl2IGNsYXNzTmFtZT1cIm10LTNcIj48RXJyb3IgbWVzc2FnZT1cIk5vIGhheSBwcm9kdWN0b3MgcGFyYSBmaW5hbGl6YXIgbGEgY29tcHJhLlwiLz48L2Rpdj46XHJcbiAgICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgICAgIHsobG9hZGluZyk/PGRpdiBjbGFzc05hbWU9XCJjb250YWluZXItbG9hZGVyXCI+PExvYWRlci8+PC9kaXY+Om51bGx9ICAgXHJcbiAgICAgICAgICAgICAgICAgICAgPEhlYWQgdGl0bGU9XCJPbGl2ZXIgUGV0IFNob3BcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXIgbWItNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtMTIgY29sLW1kLTggcHQtNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMj7Dmmx0aW1vcyBwYXNvcyBwYXJhIHRlcm1pbmFyIHR1IGNvbXByYTwvaDI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyhlcnJvcik/PEVycm9yIG1lc3NhZ2U9e2Vycm9yfS8+Om51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhcmRVYmljYWNpb24gZGF0YVVzZXI9e3Byb3BzLnVzdWFyaW9SZWR1Y2VyLnVzdWFyaW99Lz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Wm9uYUVudmlvIHNldFpvbmFFbnZpbz17aW5zZXJ0YXJab25hRGVFbnZpb30vPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJtdC01XCI+U2VsZWNjaW9uYSB1biBtZWRpbyBkZSBwYWdvPC9oMj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWVkaW9zRGVQYWdvIG1lZGlvRGVQYWdvPXttZWRpb0RlUGFnb30gY2FtYmlhck1lZGlvRGVQYWdvPXtjYW1iaWFyTWVkaW9EZVBhZ299Lz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwibXQtNVwiPk9wY2lvbmVzIGRlIGVudsOtbzwvaDI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE9wY2lvbmVzRW52aW8gdGlwb0VudmlvPXt0aXBvRW52aW99IGNhbWJpYXJUaXBvRGVFbnZpbz17Y2FtYmlhclRpcG9EZUVudmlvfS8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1wcmltYXJ5XCIgb25DbGljaz17aGFuZGxlQ2xpY2t9IGlkPVwiYnRuLWNvbnRpbnVhclwiPkNvbnRpbnVhcjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2VG90YWxNb2JpbGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJ0b3RhbFwiPiR7cHJvcHMuY2Fycml0b1JlZHVjZXIuc3VidG90YWx9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnlcIiBvbkNsaWNrPXtoYW5kbGVDbGlja30+Q29udGludWFyPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIGNvbC1tZC00IGRldGFsbGVQcm9kdWN0b3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGV0YWxsZVByb2R1Y3RvcyBkYXRhPXtwcm9wcy5jYXJyaXRvUmVkdWNlcn0vPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoMntmb250LXNpemU6MjVweH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbiNidG4tY29udGludWFye1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6MjBweFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRpdlRvdGFsTW9iaWxle2Rpc3BsYXk6bm9uZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBtZWRpYShtYXgtd2lkdGg6NzY4cHgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNidG4tY29udGludWFye2Rpc3BsYXk6bm9uZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGl2VG90YWxNb2JpbGV7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ZmxleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDowO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDowcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjdmN2Y3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIC0ycHggOHB4IDJweCByZ2JhKDAsMCwwLC4xNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogMCAxcHggMXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1F1aWNrc2FuZCcsIHNhbnMtc2VyaWY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGV0YWxsZVByb2R1Y3Rvc3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgPC8+XHJcbiAgICApO1xyXG59XHJcbiBcclxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHtjYXJyaXRvUmVkdWNlcix1c3VhcmlvUmVkdWNlcn0pPT57XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNhcnJpdG9SZWR1Y2VyLFxyXG4gICAgICAgIHVzdWFyaW9SZWR1Y2VyXHJcbiAgICB9O1xyXG59XHJcblxyXG5jb25zdCBtYXBEaXNwYXRjaFRvUHJvcHMgPSB7XHJcbiAgICBjYXJyaXRvVHJhZXJQcm9kdWN0b3MsXHJcbiAgICB2ZXJpZmljYXJTZXNpb25cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLG1hcERpc3BhdGNoVG9Qcm9wcykoQ2hlY2tvdXQpOyJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\franc\\\\\\\\Documents\\\\\\\\oliver-2\\\\\\\\sitio-desa\\\\\\\\pages\\\\\\\\checkout\\\\\\\\index.js */\"))));\n};\n\nconst mapStateToProps = ({\n  carritoReducer,\n  usuarioReducer\n}) => {\n  return {\n    carritoReducer,\n    usuarioReducer\n  };\n};\n\nconst mapDispatchToProps = {\n  carritoTraerProductos,\n  verificarSesion\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Checkout);","map":{"version":3,"sources":["C:/Users/franc/Documents/oliver-2/sitio-desa/pages/checkout/index.js"],"names":["useEffect","useState","CardUbicacion","OpcionesEnvio","ZonaEnvio","Head","DetalleProductos","Error","connect","carritoActions","usuarioActions","API","Loader","MediosDePago","traerProductos","carritoTraerProductos","verificarSesion","Checkout","props","tipoEnvio","setTipoEnvio","normal","express","local","medioDePago","setMedioDePago","zonaEnvio","setZonaEnvio","error","setError","loading","setLoading","console","log","carritoReducer","productos","cambiarTipoDeEnvio","tipoDeEnvio","insertarZonaDeEnvio","zona","cambiarMedioDePago","event","target","value","handleClick","usuarioReducer","usuario","address","tipoDeEnvioActivo","dataEnvio","tipo","localStorage","setItem","JSON","stringify","token","productosCarrito","forEach","prd","push","title","subProducto","description","tamaño","quantity","cantidad","unit_price","precioUnidad","headers","Headers","append","fetch","method","body","then","res","json","datamp","response","info","window","location","assign","init_point","catch","err","message","logueado","length","subtotal","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport CardUbicacion from '../../src/components/CardUbicacion/index'; \r\nimport OpcionesEnvio from '../../src/components/OpcionesEnvio';\r\nimport ZonaEnvio from '../../src/components/ZonaEnvio';\r\nimport Head from '../../src/components/Head';\r\nimport DetalleProductos from '../../src/components/DetalleProductos';\r\nimport Error from '../../src/components/Error';\r\nimport { connect } from 'react-redux';\r\nimport * as carritoActions from '../../store/actions/carritoActions';\r\nimport * as usuarioActions from '../../store/actions/usuarioActions';\r\nimport {API} from '../../config/index';\r\nimport Loader from '../../src/components/Loader/index';\r\nimport MediosDePago from '../../src/components/MediosDePago';\r\n\r\nconst {traerProductos:carritoTraerProductos} = carritoActions;\r\nconst {verificarSesion} = usuarioActions;\r\n\r\nconst Checkout = (props) => {\r\n    const [tipoEnvio, setTipoEnvio] = useState({\r\n        normal:true,\r\n        express:false,\r\n        local:false\r\n    });\r\n\r\n    const [medioDePago, setMedioDePago] = useState('');\r\n\r\n    const [zonaEnvio, setZonaEnvio] = useState('');\r\n    const [error, setError] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        props.carritoTraerProductos();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        console.log(props.carritoReducer.productos);\r\n    }, [props.carritoReducer.productos])\r\n\r\n    const cambiarTipoDeEnvio = tipoDeEnvio=>{\r\n        if(tipoDeEnvio==='normal'){\r\n            return setTipoEnvio({\r\n                normal:true,\r\n                express:false,\r\n                local:false\r\n            })\r\n        }\r\n        if(tipoDeEnvio==='express'){\r\n            return setTipoEnvio({\r\n                normal:false,\r\n                express:true,\r\n                local:false\r\n            })\r\n        }\r\n        return setTipoEnvio({\r\n            normal:false,\r\n            express:false,\r\n            local:true\r\n        })\r\n    }\r\n\r\n    const insertarZonaDeEnvio = zona=>{\r\n        setZonaEnvio(zona);\r\n    }\r\n\r\n    const cambiarMedioDePago = event=>setMedioDePago(event.target.value);\r\n\r\n    const handleClick = ()=>{\r\n        if(!props.usuarioReducer.usuario.address || props.usuarioReducer.usuario.address==='') return setError('Es obligatorio completar tu ubicación.');\r\n        if(zonaEnvio==='') return setError('Es obligatorio completar la zona de envío.');\r\n        setLoading(true);\r\n        let tipoDeEnvioActivo;\r\n        if(tipoEnvio.local){tipoDeEnvioActivo='Local'};\r\n        if(tipoEnvio.normal){tipoDeEnvioActivo='Domicilio'}\r\n        if(tipoEnvio.express){tipoDeEnvioActivo='Express'}\r\n        let dataEnvio = {\r\n            tipo:tipoDeEnvioActivo,\r\n            zona:zonaEnvio,\r\n            address:props.usuarioReducer.usuario.address\r\n        }\r\n        //guardo data de envio para luego de hacer el checkout de mercado pago, envio los datos al servidor para registrar la venta con el envio correspondiente.\r\n        localStorage.setItem('dataEnvio',JSON.stringify(dataEnvio));\r\n\r\n        const {token} = props.usuarioReducer.usuario;\r\n        const {productos:productosCarrito} = props.carritoReducer;\r\n        let productos = [];\r\n        productosCarrito.forEach(prd => {\r\n            productos.push({\r\n                title:prd.subProducto,\r\n                description:prd.tamaño,\r\n                quantity:prd.cantidad,\r\n                unit_price:prd.precioUnidad\r\n            })\r\n        });\r\n        let headers = new Headers();\r\n        headers.append('token',token);\r\n        headers.append(\"Content-Type\", \"application/json\");\r\n        fetch(`${API}/mercadopago`,{\r\n            method:'POST',\r\n            headers,\r\n            body:JSON.stringify(productos)\r\n        }).then(res=>res.json()).then(datamp=>{\r\n            const {response} = datamp.info;\r\n            setLoading(false);\r\n            window.location.assign(response.init_point);\r\n        }).catch(err=>{\r\n            console.log(err);\r\n            setLoading(false);\r\n            setError(err.message);\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        (!props.usuarioReducer.logueado)?<div className=\"mt-3\"><Error message=\"No puedes realizar una compra sin tener una sesión activa.\"/></div>:\r\n        <>\r\n            {(props.carritoReducer.productos.length===0)?<div className=\"mt-3\"><Error message=\"No hay productos para finalizar la compra.\"/></div>:\r\n                <>\r\n                    {(loading)?<div className=\"container-loader\"><Loader/></div>:null}   \r\n                    <Head title=\"Oliver Pet Shop\"/>\r\n                    <div className=\"container mb-4\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-12 col-md-8 pt-4\">\r\n                                <h2>Últimos pasos para terminar tu compra</h2>\r\n                                {(error)?<Error message={error}/>:null}\r\n                                <CardUbicacion dataUser={props.usuarioReducer.usuario}/>\r\n                                <ZonaEnvio setZonaEnvio={insertarZonaDeEnvio}/>\r\n                                <h2 className=\"mt-5\">Selecciona un medio de pago</h2>\r\n                                <MediosDePago medioDePago={medioDePago} cambiarMedioDePago={cambiarMedioDePago}/>\r\n                                <h2 className=\"mt-5\">Opciones de envío</h2>\r\n                                <OpcionesEnvio tipoEnvio={tipoEnvio} cambiarTipoDeEnvio={cambiarTipoDeEnvio}/>\r\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={handleClick} id=\"btn-continuar\">Continuar</button>\r\n                                <div className=\"divTotalMobile\">\r\n                                    <span id=\"total\">${props.carritoReducer.subtotal}</span>\r\n                                    <button type=\"button\" className=\"btn btn-primary\" onClick={handleClick}>Continuar</button>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-12 col-md-4 detalleProductos\">\r\n                                <DetalleProductos data={props.carritoReducer}/>\r\n                            </div>\r\n                        </div>\r\n                        <style jsx>{`\r\n                            h2{font-size:25px}\r\n                            button#btn-continuar{\r\n                                float:right;\r\n                                margin-top:20px\r\n                            }\r\n                            .divTotalMobile{display:none}\r\n                            @media(max-width:768px){\r\n                                #btn-continuar{display:none}\r\n                                .divTotalMobile{\r\n                                    display:flex;\r\n                                    justify-content:space-between;\r\n                                    position: fixed;\r\n                                    left:0;\r\n                                    right:0px;\r\n                                    bottom: 0px;\r\n                                    background-color: #f7f7f7;\r\n                                    padding: 16px;\r\n                                    box-shadow: 0 -2px 8px 2px rgba(0,0,0,.15);\r\n                                    border-width: 0 1px 1px;\r\n                                    font-family: 'Quicksand', sans-serif;\r\n                                } \r\n                                .detalleProductos{\r\n                                    display:none\r\n                                }           \r\n                            }\r\n                        `}</style>\r\n                    </div>\r\n                </>\r\n            }\r\n        </>\r\n    );\r\n}\r\n \r\nconst mapStateToProps = ({carritoReducer,usuarioReducer})=>{\r\n    return {\r\n        carritoReducer,\r\n        usuarioReducer\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    carritoTraerProductos,\r\n    verificarSesion\r\n};\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Checkout);"]},"metadata":{},"sourceType":"module"}