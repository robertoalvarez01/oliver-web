{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/checkout/index.js\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport CardUbicacion from '../../src/components/CardUbicacion/index';\nimport OpcionesEnvio from '../../src/components/OpcionesEnvio';\nimport ZonaEnvio from '../../src/components/ZonaEnvio';\nimport Head from '../../src/components/Head';\nimport DetalleProductos from '../../src/components/DetalleProductos';\nimport Error from '../../src/components/Error';\nimport { connect } from 'react-redux';\nimport * as usuarioActions from '../../store/actions/usuarioActions';\nimport { API } from '../../config/index';\nimport Loader from '../../src/components/Loader/index';\nimport MediosDePago from '../../src/components/MediosDePago';\n\nvar Swal = require('sweetalert2');\n\nvar verificarSesion = usuarioActions.verificarSesion;\n\nvar Checkout = function Checkout(props) {\n  _s();\n\n  var _useState = useState(false),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  useEffect(function () {\n    props.verificarSesion();\n    document.getElementsByTagName('body')[0].style.overflowY = 'scroll';\n  }, []);\n\n  var handleClick = function handleClick() {\n    var usuario = props.usuarioReducer.usuario;\n    var envio = props.enviosReducer.tipos;\n    var zona = props.zonasReducer.zona;\n    var _props$ventaReducer = props.ventaReducer,\n        tipoEnvio = _props$ventaReducer.tipoEnvio,\n        idZona = _props$ventaReducer.idZona,\n        idMedioPago = _props$ventaReducer.idMedioPago,\n        total = _props$ventaReducer.total,\n        subtotal = _props$ventaReducer.subtotal,\n        productos = _props$ventaReducer.productos,\n        porcentaje_descuento = _props$ventaReducer.porcentaje_descuento,\n        descuento = _props$ventaReducer.descuento;\n\n    if (!envio.local) {\n      if (!usuario.address || usuario.address === '') return setError('Es obligatorio completar tu ubicación.');\n      if (!zona) return setError('En caso de no retirarlo por nuestro local, es obligatorio completar la zona de envío.');\n    }\n\n    setLoading(true);\n    setError(false);\n\n    if (idMedioPago == '1') {\n      //guardo data de envio para luego de hacer el checkout de mercado pago, envio los datos al servidor para registrar la venta con el envio correspondiente.\n      localStorage.setItem('dataEnvio', JSON.stringify({\n        tipo: tipoEnvio,\n        zona: idZona\n      }));\n      var token = usuario.token; //SOLUCION TEMPORAL PARA QUE SE SUME AL PAGO LO DEL ENVIO\n\n      var data = [{\n        title: 'Nueva compra en Oliver PetShop',\n        description: 'Compra de uno o mas productos',\n        quantity: 1,\n        unit_price: total\n      }];\n      window.location.assign('/procesarVenta'); // let headers = new Headers();\n      // headers.append('token',token);\n      // headers.append(\"Content-Type\", \"application/json\");\n      // fetch(`${API}/mercadopago`,{\n      //     method:'POST',\n      //     headers,\n      //     body:JSON.stringify(data)\n      // }).then(res=>res.json()).then(datamp=>{\n      //     // console.log(datamp);\n      //     const {response} = datamp.info;\n      //     setLoading(false);\n      //     window.location.assign(response.init_point);\n      // }).catch(err=>{\n      //     console.log(err);\n      //     setLoading(false);\n      //     setError(err.message);\n      // })\n    } else {\n      var idUsuario = usuario.idUsuario;\n      var f = new Date();\n      var mes = f.getMonth() < 10 ? \"0\".concat(f.getMonth() + 1) : \"\".concat(f.getMonth());\n      var dia = f.getDate() < 10 ? \"0\".concat(f.getDate()) : \"\".concat(f.getDate());\n      var fecha = \"\".concat(f.getFullYear(), \"-\").concat(mes, \"-\").concat(dia);\n      var dataToRequest = {\n        envio: {\n          idZona: idZona,\n          tipo: tipoEnvio\n        },\n        venta: {\n          subtotal: subtotal,\n          porcentaje_descuento: porcentaje_descuento,\n          descuento: descuento,\n          total: total,\n          idUsuario: idUsuario,\n          productos: productos,\n          fecha: fecha,\n          operacion_id: null,\n          idMedioPago: idMedioPago\n        }\n      };\n      return registrarVenta(dataToRequest);\n    }\n\n    ;\n  };\n\n  var registrarVenta = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var headers, url, reqVenta;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              headers = new Headers();\n              headers.append('token', props.usuarioReducer.usuario.token);\n              headers.append(\"Content-Type\", \"application/json\");\n              url = !data.venta.operacion_id ? \"\".concat(API, \"/registrarVenta?mercadoPago=false\") : \"\".concat(API, \"/registrarVenta?mercadoPago=true\");\n              _context.next = 7;\n              return fetch(url, {\n                headers: headers,\n                method: 'POST',\n                body: JSON.stringify(data)\n              });\n\n            case 7:\n              reqVenta = _context.sent;\n\n              if (reqVenta.status == 200) {\n                localStorage.removeItem('dataEnvio');\n                localStorage.removeItem('carrito');\n                Swal.fire('Listo', 'Su compra se ha registrado con éxito, solo resta que se dirija a nuestro local para hacerse con su producto.', 'success').then(function () {\n                  return window.location.assign('/');\n                });\n              } else {\n                setLoading(false);\n                Swal.fire('Error', 'Ha ocurrido un error al momento de registrar la venta, intentalo más tarde', 'error');\n              }\n\n              _context.next = 16;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              setLoading(false);\n              Swal.fire('Error', 'Ha ocurrido un error al momento de registrar la venta, intentalo más tarde', 'error');\n              console.log(_context.t0.message);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 11]]);\n    }));\n\n    return function registrarVenta(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  if (error) {\n    Swal.fire('Atención', error, 'warning').then(function () {\n      return setError(false);\n    });\n  }\n\n  return !props.usuarioReducer.logueado ? __jsx(\"div\", {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 42\n    }\n  }, __jsx(Error, {\n    message: \"No puedes realizar una compra sin tener una sesi\\xF3n activa.\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 64\n    }\n  })) : __jsx(React.Fragment, null, loading ? __jsx(\"div\", {\n    className: \"container-loader\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 24\n    }\n  }, __jsx(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 58\n    }\n  })) : null, __jsx(Head, {\n    title: \"Oliver Pet Shop\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-2581472546\" + \" \" + \"container mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2581472546\" + \" \" + \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2581472546\" + \" \" + \"col-12 col-md-8 pt-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }, __jsx(\"h2\", {\n    className: \"jsx-2581472546\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, \"\\xDAltimos pasos para terminar tu compra\"), __jsx(CardUbicacion, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-2581472546\" + \" \" + \"alert alert-warning mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, __jsx(\"b\", {\n    className: \"jsx-2581472546\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 67\n    }\n  }, \"Atenci\\xF3n:\"), \" S\\xED desea retirar su compra en nuestro local, no es necesario que seleccione una zona de env\\xEDo\"), __jsx(ZonaEnvio, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 25\n    }\n  }), __jsx(\"h2\", {\n    className: \"jsx-2581472546\" + \" \" + \"mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  }, \"Opciones de env\\xEDo\"), __jsx(OpcionesEnvio, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 25\n    }\n  }), __jsx(\"h2\", {\n    className: \"jsx-2581472546\" + \" \" + \"mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 25\n    }\n  }, \"Selecciona un medio de pago\"), __jsx(MediosDePago, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 25\n    }\n  }), __jsx(\"button\", {\n    type: \"button\",\n    onClick: handleClick,\n    id: \"btn-continuar\",\n    className: \"jsx-2581472546\" + \" \" + \"btn btn-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 25\n    }\n  }, \"Continuar\"), __jsx(\"div\", {\n    className: \"jsx-2581472546\" + \" \" + \"divTotalMobile\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }, __jsx(\"span\", {\n    id: \"total\",\n    className: \"jsx-2581472546\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 29\n    }\n  }, \"$\", props.ventaReducer.total), __jsx(\"button\", {\n    type: \"button\",\n    onClick: handleClick,\n    className: \"jsx-2581472546\" + \" \" + \"btn btn-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 29\n    }\n  }, \"Continuar\"))), __jsx(\"div\", {\n    className: \"jsx-2581472546\" + \" \" + \"col-12 col-md-4 detalleProductos\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  }, __jsx(DetalleProductos, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }))), __jsx(_JSXStyle, {\n    id: \"2581472546\",\n    __self: _this\n  }, \"h2.jsx-2581472546{font-size:25px;}button#btn-continuar.jsx-2581472546{float:right;margin-top:20px;}.divTotalMobile.jsx-2581472546{display:none;}@media(max-width:768px){#btn-continuar.jsx-2581472546{display:none;}.divTotalMobile.jsx-2581472546{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:fixed;left:0;right:0px;bottom:0px;background-color:#f7f7f7;padding:16px;box-shadow:0 -2px 8px 2px rgba(0,0,0,.15);border-width:0 1px 1px;font-family:'Quicksand',sans-serif;}.detalleProductos.jsx-2581472546{display:none;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2ZyYW5jby9kZXNhcnJvbGxvL3Byb3llY3RvX29saXZlci9vbGl2ZXItd2ViLW5leHQvcGFnZXMvY2hlY2tvdXQvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNks0QixBQUVvQyxBQUVBLEFBR1csQUFFRyxBQUVULEFBY2pCLFlBbkJKLENBQzRCLEFBRUcsQUFnQjFCLEVBdkJZLGFBSWhCLDhDQU1xQyxtSEFDZCxlQUNULE9BQ0csVUFDRSxXQUNjLHlCQUNaLGFBQzZCLDBDQUNuQix1QkFDYSxtQ0FDeEMiLCJmaWxlIjoiL2hvbWUvZnJhbmNvL2Rlc2Fycm9sbG8vcHJveWVjdG9fb2xpdmVyL29saXZlci13ZWItbmV4dC9wYWdlcy9jaGVja291dC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ2FyZFViaWNhY2lvbiBmcm9tICcuLi8uLi9zcmMvY29tcG9uZW50cy9DYXJkVWJpY2FjaW9uL2luZGV4JzsgXG5pbXBvcnQgT3BjaW9uZXNFbnZpbyBmcm9tICcuLi8uLi9zcmMvY29tcG9uZW50cy9PcGNpb25lc0VudmlvJztcbmltcG9ydCBab25hRW52aW8gZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvWm9uYUVudmlvJztcbmltcG9ydCBIZWFkIGZyb20gJy4uLy4uL3NyYy9jb21wb25lbnRzL0hlYWQnO1xuaW1wb3J0IERldGFsbGVQcm9kdWN0b3MgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvRGV0YWxsZVByb2R1Y3Rvcyc7XG5pbXBvcnQgRXJyb3IgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvRXJyb3InO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCAqIGFzIHVzdWFyaW9BY3Rpb25zIGZyb20gJy4uLy4uL3N0b3JlL2FjdGlvbnMvdXN1YXJpb0FjdGlvbnMnO1xuaW1wb3J0IHtBUEl9IGZyb20gJy4uLy4uL2NvbmZpZy9pbmRleCc7XG5pbXBvcnQgTG9hZGVyIGZyb20gJy4uLy4uL3NyYy9jb21wb25lbnRzL0xvYWRlci9pbmRleCc7XG5pbXBvcnQgTWVkaW9zRGVQYWdvIGZyb20gJy4uLy4uL3NyYy9jb21wb25lbnRzL01lZGlvc0RlUGFnbyc7XG5jb25zdCBTd2FsID0gcmVxdWlyZSgnc3dlZXRhbGVydDInKTtcblxuY29uc3Qge3ZlcmlmaWNhclNlc2lvbn0gPSB1c3VhcmlvQWN0aW9ucztcblxuY29uc3QgQ2hlY2tvdXQgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBwcm9wcy52ZXJpZmljYXJTZXNpb24oKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXS5zdHlsZS5vdmVyZmxvd1kgPSAnc2Nyb2xsJztcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBoYW5kbGVDbGljayA9ICgpPT57XG4gICAgICAgIGNvbnN0IHt1c3VhcmlvfSA9IHByb3BzLnVzdWFyaW9SZWR1Y2VyO1xuICAgICAgICBjb25zdCB7dGlwb3M6ZW52aW99ID0gcHJvcHMuZW52aW9zUmVkdWNlcjtcbiAgICAgICAgY29uc3Qge3pvbmF9ID0gcHJvcHMuem9uYXNSZWR1Y2VyO1xuICAgICAgICBjb25zdCB7dGlwb0VudmlvLGlkWm9uYSxpZE1lZGlvUGFnbyx0b3RhbCxzdWJ0b3RhbCxwcm9kdWN0b3MscG9yY2VudGFqZV9kZXNjdWVudG8sZGVzY3VlbnRvfSA9IHByb3BzLnZlbnRhUmVkdWNlcjtcblxuICAgICAgICBpZighZW52aW8ubG9jYWwpe1xuICAgICAgICAgICAgaWYoIXVzdWFyaW8uYWRkcmVzcyB8fCB1c3VhcmlvLmFkZHJlc3M9PT0nJykgcmV0dXJuIHNldEVycm9yKCdFcyBvYmxpZ2F0b3JpbyBjb21wbGV0YXIgdHUgdWJpY2FjacOzbi4nKTtcbiAgICAgICAgICAgIGlmKCF6b25hKSByZXR1cm4gc2V0RXJyb3IoJ0VuIGNhc28gZGUgbm8gcmV0aXJhcmxvIHBvciBudWVzdHJvIGxvY2FsLCBlcyBvYmxpZ2F0b3JpbyBjb21wbGV0YXIgbGEgem9uYSBkZSBlbnbDrW8uJyk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0RXJyb3IoZmFsc2UpO1xuXG4gICAgICAgIGlmKGlkTWVkaW9QYWdvID09ICcxJyl7XG4gICAgICAgICAgICAvL2d1YXJkbyBkYXRhIGRlIGVudmlvIHBhcmEgbHVlZ28gZGUgaGFjZXIgZWwgY2hlY2tvdXQgZGUgbWVyY2FkbyBwYWdvLCBlbnZpbyBsb3MgZGF0b3MgYWwgc2Vydmlkb3IgcGFyYSByZWdpc3RyYXIgbGEgdmVudGEgY29uIGVsIGVudmlvIGNvcnJlc3BvbmRpZW50ZS5cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkYXRhRW52aW8nLEpTT04uc3RyaW5naWZ5KHt0aXBvOnRpcG9FbnZpbyx6b25hOmlkWm9uYX0pKTtcblxuICAgICAgICAgICAgY29uc3Qge3Rva2VufSA9IHVzdWFyaW87XG5cbiAgICAgICAgICAgIC8vU09MVUNJT04gVEVNUE9SQUwgUEFSQSBRVUUgU0UgU1VNRSBBTCBQQUdPIExPIERFTCBFTlZJT1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBbe1xuICAgICAgICAgICAgICAgIHRpdGxlOidOdWV2YSBjb21wcmEgZW4gT2xpdmVyIFBldFNob3AnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOidDb21wcmEgZGUgdW5vIG8gbWFzIHByb2R1Y3RvcycsXG4gICAgICAgICAgICAgICAgcXVhbnRpdHk6MSxcbiAgICAgICAgICAgICAgICB1bml0X3ByaWNlOnRvdGFsXG4gICAgICAgICAgICB9XTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24oJy9wcm9jZXNhclZlbnRhJyk7XG4gICAgICAgICAgICAvLyBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgICAgICAvLyBoZWFkZXJzLmFwcGVuZCgndG9rZW4nLHRva2VuKTtcbiAgICAgICAgICAgIC8vIGhlYWRlcnMuYXBwZW5kKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgICAgICAgIC8vIGZldGNoKGAke0FQSX0vbWVyY2Fkb3BhZ29gLHtcbiAgICAgICAgICAgIC8vICAgICBtZXRob2Q6J1BPU1QnLFxuICAgICAgICAgICAgLy8gICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAvLyAgICAgYm9keTpKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgICAgICAgLy8gfSkudGhlbihyZXM9PnJlcy5qc29uKCkpLnRoZW4oZGF0YW1wPT57XG4gICAgICAgICAgICAvLyAgICAgLy8gY29uc29sZS5sb2coZGF0YW1wKTtcbiAgICAgICAgICAgIC8vICAgICBjb25zdCB7cmVzcG9uc2V9ID0gZGF0YW1wLmluZm87XG4gICAgICAgICAgICAvLyAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAvLyAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihyZXNwb25zZS5pbml0X3BvaW50KTtcbiAgICAgICAgICAgIC8vIH0pLmNhdGNoKGVycj0+e1xuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAvLyAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAvLyAgICAgc2V0RXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBjb25zdCB7aWRVc3VhcmlvfSA9IHVzdWFyaW87XG4gICAgICAgICAgICBsZXQgZiA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBsZXQgbWVzID0gKChmLmdldE1vbnRoKCkpPDEwKT9gMCR7Zi5nZXRNb250aCgpKzF9YDpgJHtmLmdldE1vbnRoKCl9YDtcbiAgICAgICAgICAgIGxldCBkaWEgPSAoKGYuZ2V0RGF0ZSgpKTwxMCk/YDAke2YuZ2V0RGF0ZSgpfWA6YCR7Zi5nZXREYXRlKCl9YDtcbiAgICAgICAgICAgIGxldCBmZWNoYSA9IGAke2YuZ2V0RnVsbFllYXIoKX0tJHttZXN9LSR7ZGlhfWA7XG4gICAgICAgICAgICBsZXQgZGF0YVRvUmVxdWVzdCA9IHtcbiAgICAgICAgICAgICAgICBlbnZpbzp7XG4gICAgICAgICAgICAgICAgICAgIGlkWm9uYSxcbiAgICAgICAgICAgICAgICAgICAgdGlwbzp0aXBvRW52aW9cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZlbnRhOntcbiAgICAgICAgICAgICAgICAgICAgc3VidG90YWwsXG4gICAgICAgICAgICAgICAgICAgIHBvcmNlbnRhamVfZGVzY3VlbnRvLFxuICAgICAgICAgICAgICAgICAgICBkZXNjdWVudG8sXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgICAgICAgICAgICBpZFVzdWFyaW8sXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RvcyxcbiAgICAgICAgICAgICAgICAgICAgZmVjaGEsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhY2lvbl9pZDpudWxsLFxuICAgICAgICAgICAgICAgICAgICBpZE1lZGlvUGFnb1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWdpc3RyYXJWZW50YShkYXRhVG9SZXF1ZXN0KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVnaXN0cmFyVmVudGEgPSBhc3luYyBkYXRhPT57XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKCd0b2tlbicscHJvcHMudXN1YXJpb1JlZHVjZXIudXN1YXJpby50b2tlbik7XG4gICAgICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgICAgICBsZXQgdXJsID0gKCFkYXRhLnZlbnRhLm9wZXJhY2lvbl9pZCk/YCR7QVBJfS9yZWdpc3RyYXJWZW50YT9tZXJjYWRvUGFnbz1mYWxzZWA6YCR7QVBJfS9yZWdpc3RyYXJWZW50YT9tZXJjYWRvUGFnbz10cnVlYDtcbiAgICAgICAgICAgIGNvbnN0IHJlcVZlbnRhID0gYXdhaXQgZmV0Y2godXJsLHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG1ldGhvZDonUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTpKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZihyZXFWZW50YS5zdGF0dXMgPT0gMjAwKXtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZGF0YUVudmlvJyk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NhcnJpdG8nKTtcbiAgICAgICAgICAgICAgICBTd2FsLmZpcmUoXG4gICAgICAgICAgICAgICAgICAgICdMaXN0bycsXG4gICAgICAgICAgICAgICAgICAgICdTdSBjb21wcmEgc2UgaGEgcmVnaXN0cmFkbyBjb24gw6l4aXRvLCBzb2xvIHJlc3RhIHF1ZSBzZSBkaXJpamEgYSBudWVzdHJvIGxvY2FsIHBhcmEgaGFjZXJzZSBjb24gc3UgcHJvZHVjdG8uJyxcbiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnXG4gICAgICAgICAgICAgICAgKS50aGVuKCgpPT53aW5kb3cubG9jYXRpb24uYXNzaWduKCcvJykpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgU3dhbC5maXJlKFxuICAgICAgICAgICAgICAgICAgICAnRXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAnSGEgb2N1cnJpZG8gdW4gZXJyb3IgYWwgbW9tZW50byBkZSByZWdpc3RyYXIgbGEgdmVudGEsIGludGVudGFsbyBtw6FzIHRhcmRlJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIFN3YWwuZmlyZShcbiAgICAgICAgICAgICAgICAnRXJyb3InLFxuICAgICAgICAgICAgICAgICdIYSBvY3VycmlkbyB1biBlcnJvciBhbCBtb21lbnRvIGRlIHJlZ2lzdHJhciBsYSB2ZW50YSwgaW50ZW50YWxvIG3DoXMgdGFyZGUnLFxuICAgICAgICAgICAgICAgICdlcnJvcidcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmKGVycm9yKXtcbiAgICAgICAgU3dhbC5maXJlKFxuICAgICAgICAgICAgJ0F0ZW5jacOzbicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICd3YXJuaW5nJ1xuICAgICAgICApLnRoZW4oKCk9PnNldEVycm9yKGZhbHNlKSlcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAoIXByb3BzLnVzdWFyaW9SZWR1Y2VyLmxvZ3VlYWRvKT88ZGl2IGNsYXNzTmFtZT1cIm10LTNcIj48RXJyb3IgbWVzc2FnZT1cIk5vIHB1ZWRlcyByZWFsaXphciB1bmEgY29tcHJhIHNpbiB0ZW5lciB1bmEgc2VzacOzbiBhY3RpdmEuXCIvPjwvZGl2PjpcbiAgICAgICAgPD5cbiAgICAgICAgICAgIHsobG9hZGluZyk/PGRpdiBjbGFzc05hbWU9XCJjb250YWluZXItbG9hZGVyXCI+PExvYWRlci8+PC9kaXY+Om51bGx9ICAgXG4gICAgICAgICAgICA8SGVhZCB0aXRsZT1cIk9saXZlciBQZXQgU2hvcFwiLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyIG1iLTRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC0xMiBjb2wtbWQtOCBwdC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDI+w5psdGltb3MgcGFzb3MgcGFyYSB0ZXJtaW5hciB0dSBjb21wcmE8L2gyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENhcmRVYmljYWNpb24vPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsZXJ0IGFsZXJ0LXdhcm5pbmcgbXQtM1wiPjxiPkF0ZW5jacOzbjo8L2I+IFPDrSBkZXNlYSByZXRpcmFyIHN1IGNvbXByYSBlbiBudWVzdHJvIGxvY2FsLCBubyBlcyBuZWNlc2FyaW8gcXVlIHNlbGVjY2lvbmUgdW5hIHpvbmEgZGUgZW52w61vPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxab25hRW52aW8vPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwibXQtNVwiPk9wY2lvbmVzIGRlIGVudsOtbzwvaDI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8T3BjaW9uZXNFbnZpby8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJtdC01XCI+U2VsZWNjaW9uYSB1biBtZWRpbyBkZSBwYWdvPC9oMj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxNZWRpb3NEZVBhZ28vPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnlcIiBvbkNsaWNrPXtoYW5kbGVDbGlja30gaWQ9XCJidG4tY29udGludWFyXCI+Q29udGludWFyPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdlRvdGFsTW9iaWxlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJ0b3RhbFwiPiR7cHJvcHMudmVudGFSZWR1Y2VyLnRvdGFsfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnlcIiBvbkNsaWNrPXtoYW5kbGVDbGlja30+Q29udGludWFyPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIGNvbC1tZC00IGRldGFsbGVQcm9kdWN0b3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEZXRhbGxlUHJvZHVjdG9zLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAgICAgICAgICAgICBoMntmb250LXNpemU6MjVweH1cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uI2J0bi1jb250aW51YXJ7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDpyaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6MjBweFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC5kaXZUb3RhbE1vYmlsZXtkaXNwbGF5Om5vbmV9XG4gICAgICAgICAgICAgICAgICAgIEBtZWRpYShtYXgtd2lkdGg6NzY4cHgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgI2J0bi1jb250aW51YXJ7ZGlzcGxheTpub25lfVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRpdlRvdGFsTW9iaWxle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ZmxleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDowO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OjBweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDBweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjdmN2Y3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAtMnB4IDhweCAycHggcmdiYSgwLDAsMCwuMTUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogMCAxcHggMXB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnUXVpY2tzYW5kJywgc2Fucy1zZXJpZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGV0YWxsZVByb2R1Y3Rvc3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYH08L3N0eWxlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvPlxuICAgICk7XG59XG4gXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoe3VzdWFyaW9SZWR1Y2VyLGVudmlvc1JlZHVjZXIsdmVudGFSZWR1Y2VyLHpvbmFzUmVkdWNlcn0pPT57XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmVudGFSZWR1Y2VyLFxuICAgICAgICB1c3VhcmlvUmVkdWNlcixcbiAgICAgICAgZW52aW9zUmVkdWNlcixcbiAgICAgICAgem9uYXNSZWR1Y2VyXG4gICAgfTtcbn1cblxuY29uc3QgbWFwRGlzcGF0Y2hUb1Byb3BzID0ge1xuICAgIHZlcmlmaWNhclNlc2lvblxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsbWFwRGlzcGF0Y2hUb1Byb3BzKShDaGVja291dCk7Il19 */\\n/*@ sourceURL=/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/checkout/index.js */\")));\n};\n\n_s(Checkout, \"yg89KIxI8hajknXrNJw6HBMlNlk=\");\n\n_c = Checkout;\n\nvar mapStateToProps = function mapStateToProps(_ref2) {\n  var usuarioReducer = _ref2.usuarioReducer,\n      enviosReducer = _ref2.enviosReducer,\n      ventaReducer = _ref2.ventaReducer,\n      zonasReducer = _ref2.zonasReducer;\n  return {\n    ventaReducer: ventaReducer,\n    usuarioReducer: usuarioReducer,\n    enviosReducer: enviosReducer,\n    zonasReducer: zonasReducer\n  };\n};\n\nvar mapDispatchToProps = {\n  verificarSesion: verificarSesion\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Checkout);\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/checkout/index.js"],"names":["useEffect","useState","CardUbicacion","OpcionesEnvio","ZonaEnvio","Head","DetalleProductos","Error","connect","usuarioActions","API","Loader","MediosDePago","Swal","require","verificarSesion","Checkout","props","error","setError","loading","setLoading","document","getElementsByTagName","style","overflowY","handleClick","usuario","usuarioReducer","envio","enviosReducer","tipos","zona","zonasReducer","ventaReducer","tipoEnvio","idZona","idMedioPago","total","subtotal","productos","porcentaje_descuento","descuento","local","address","localStorage","setItem","JSON","stringify","tipo","token","data","title","description","quantity","unit_price","window","location","assign","idUsuario","f","Date","mes","getMonth","dia","getDate","fecha","getFullYear","dataToRequest","venta","operacion_id","registrarVenta","headers","Headers","append","url","fetch","method","body","reqVenta","status","removeItem","fire","then","console","log","message","logueado","mapStateToProps","mapDispatchToProps"],"mappings":";;;;;;;;;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,aAAP,MAA0B,0CAA1B;AACA,OAAOC,aAAP,MAA0B,oCAA1B;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAOC,IAAP,MAAiB,2BAAjB;AACA,OAAOC,gBAAP,MAA6B,uCAA7B;AACA,OAAOC,KAAP,MAAkB,4BAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,KAAKC,cAAZ,MAAgC,oCAAhC;AACA,SAAQC,GAAR,QAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,mCAAnB;AACA,OAAOC,YAAP,MAAyB,mCAAzB;;AACA,IAAMC,IAAI,GAAGC,OAAO,CAAC,aAAD,CAApB;;IAEOC,e,GAAmBN,c,CAAnBM,e;;AAEP,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;AAAA;;AAAA,kBACEhB,QAAQ,CAAC,KAAD,CADV;AAAA,MACjBiB,KADiB;AAAA,MACVC,QADU;;AAAA,mBAEMlB,QAAQ,CAAC,KAAD,CAFd;AAAA,MAEjBmB,OAFiB;AAAA,MAERC,UAFQ;;AAIxBrB,EAAAA,SAAS,CAAC,YAAM;AACZiB,IAAAA,KAAK,CAACF,eAAN;AACAO,IAAAA,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,KAAzC,CAA+CC,SAA/C,GAA2D,QAA3D;AACH,GAHQ,EAGN,EAHM,CAAT;;AAKA,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAI;AAAA,QACbC,OADa,GACFV,KAAK,CAACW,cADJ,CACbD,OADa;AAAA,QAEPE,KAFO,GAEEZ,KAAK,CAACa,aAFR,CAEbC,KAFa;AAAA,QAGbC,IAHa,GAGLf,KAAK,CAACgB,YAHD,CAGbD,IAHa;AAAA,8BAI2Ef,KAAK,CAACiB,YAJjF;AAAA,QAIbC,SAJa,uBAIbA,SAJa;AAAA,QAIHC,MAJG,uBAIHA,MAJG;AAAA,QAIIC,WAJJ,uBAIIA,WAJJ;AAAA,QAIgBC,KAJhB,uBAIgBA,KAJhB;AAAA,QAIsBC,QAJtB,uBAIsBA,QAJtB;AAAA,QAI+BC,SAJ/B,uBAI+BA,SAJ/B;AAAA,QAIyCC,oBAJzC,uBAIyCA,oBAJzC;AAAA,QAI8DC,SAJ9D,uBAI8DA,SAJ9D;;AAMpB,QAAG,CAACb,KAAK,CAACc,KAAV,EAAgB;AACZ,UAAG,CAAChB,OAAO,CAACiB,OAAT,IAAoBjB,OAAO,CAACiB,OAAR,KAAkB,EAAzC,EAA6C,OAAOzB,QAAQ,CAAC,wCAAD,CAAf;AAC7C,UAAG,CAACa,IAAJ,EAAU,OAAOb,QAAQ,CAAC,uFAAD,CAAf;AACb;;AACDE,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAF,IAAAA,QAAQ,CAAC,KAAD,CAAR;;AAEA,QAAGkB,WAAW,IAAI,GAAlB,EAAsB;AAClB;AACAQ,MAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAiCC,IAAI,CAACC,SAAL,CAAe;AAACC,QAAAA,IAAI,EAACd,SAAN;AAAgBH,QAAAA,IAAI,EAACI;AAArB,OAAf,CAAjC;AAFkB,UAIXc,KAJW,GAIFvB,OAJE,CAIXuB,KAJW,EAMlB;;AACA,UAAIC,IAAI,GAAG,CAAC;AACRC,QAAAA,KAAK,EAAC,gCADE;AAERC,QAAAA,WAAW,EAAC,+BAFJ;AAGRC,QAAAA,QAAQ,EAAC,CAHD;AAIRC,QAAAA,UAAU,EAACjB;AAJH,OAAD,CAAX;AAMAkB,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,gBAAvB,EAbkB,CAclB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KA/BD,MA+BK;AAAA,UACMC,SADN,GACmBhC,OADnB,CACMgC,SADN;AAED,UAAIC,CAAC,GAAG,IAAIC,IAAJ,EAAR;AACA,UAAIC,GAAG,GAAKF,CAAC,CAACG,QAAF,EAAD,GAAe,EAAhB,cAAwBH,CAAC,CAACG,QAAF,KAAa,CAArC,cAA4CH,CAAC,CAACG,QAAF,EAA5C,CAAV;AACA,UAAIC,GAAG,GAAKJ,CAAC,CAACK,OAAF,EAAD,GAAc,EAAf,cAAuBL,CAAC,CAACK,OAAF,EAAvB,cAAwCL,CAAC,CAACK,OAAF,EAAxC,CAAV;AACA,UAAIC,KAAK,aAAMN,CAAC,CAACO,WAAF,EAAN,cAAyBL,GAAzB,cAAgCE,GAAhC,CAAT;AACA,UAAII,aAAa,GAAG;AAChBvC,QAAAA,KAAK,EAAC;AACFO,UAAAA,MAAM,EAANA,MADE;AAEFa,UAAAA,IAAI,EAACd;AAFH,SADU;AAKhBkC,QAAAA,KAAK,EAAC;AACF9B,UAAAA,QAAQ,EAARA,QADE;AAEFE,UAAAA,oBAAoB,EAApBA,oBAFE;AAGFC,UAAAA,SAAS,EAATA,SAHE;AAIFJ,UAAAA,KAAK,EAALA,KAJE;AAKFqB,UAAAA,SAAS,EAATA,SALE;AAMFnB,UAAAA,SAAS,EAATA,SANE;AAOF0B,UAAAA,KAAK,EAALA,KAPE;AAQFI,UAAAA,YAAY,EAAC,IARX;AASFjC,UAAAA,WAAW,EAAXA;AATE;AALU,OAApB;AAiBA,aAAOkC,cAAc,CAACH,aAAD,CAArB;AACH;;AAAA;AACJ,GArED;;AAuEA,MAAMG,cAAc;AAAA,wEAAG,iBAAMpB,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAETqB,cAAAA,OAFS,GAEC,IAAIC,OAAJ,EAFD;AAGfD,cAAAA,OAAO,CAACE,MAAR,CAAe,OAAf,EAAuBzD,KAAK,CAACW,cAAN,CAAqBD,OAArB,CAA6BuB,KAApD;AACAsB,cAAAA,OAAO,CAACE,MAAR,CAAe,cAAf,EAA+B,kBAA/B;AACIC,cAAAA,GALW,GAKJ,CAACxB,IAAI,CAACkB,KAAL,CAAWC,YAAb,aAA8B5D,GAA9B,mDAAwEA,GAAxE,qCALK;AAAA;AAAA,qBAMQkE,KAAK,CAACD,GAAD,EAAK;AAC7BH,gBAAAA,OAAO,EAAPA,OAD6B;AAE7BK,gBAAAA,MAAM,EAAC,MAFsB;AAG7BC,gBAAAA,IAAI,EAAC/B,IAAI,CAACC,SAAL,CAAeG,IAAf;AAHwB,eAAL,CANb;;AAAA;AAMT4B,cAAAA,QANS;;AAWf,kBAAGA,QAAQ,CAACC,MAAT,IAAmB,GAAtB,EAA0B;AACtBnC,gBAAAA,YAAY,CAACoC,UAAb,CAAwB,WAAxB;AACApC,gBAAAA,YAAY,CAACoC,UAAb,CAAwB,SAAxB;AACApE,gBAAAA,IAAI,CAACqE,IAAL,CACI,OADJ,EAEI,8GAFJ,EAGI,SAHJ,EAIEC,IAJF,CAIO;AAAA,yBAAI3B,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,GAAvB,CAAJ;AAAA,iBAJP;AAKH,eARD,MAQK;AACDrC,gBAAAA,UAAU,CAAC,KAAD,CAAV;AACAR,gBAAAA,IAAI,CAACqE,IAAL,CACI,OADJ,EAEI,4EAFJ,EAGI,OAHJ;AAKH;;AA1Bc;AAAA;;AAAA;AAAA;AAAA;AA4Bf7D,cAAAA,UAAU,CAAC,KAAD,CAAV;AACAR,cAAAA,IAAI,CAACqE,IAAL,CACI,OADJ,EAEI,4EAFJ,EAGI,OAHJ;AAKAE,cAAAA,OAAO,CAACC,GAAR,CAAY,YAAMC,OAAlB;;AAlCe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAdf,cAAc;AAAA;AAAA;AAAA,KAApB;;AAsCA,MAAGrD,KAAH,EAAS;AACLL,IAAAA,IAAI,CAACqE,IAAL,CACI,UADJ,EAEIhE,KAFJ,EAGI,SAHJ,EAIEiE,IAJF,CAIO;AAAA,aAAIhE,QAAQ,CAAC,KAAD,CAAZ;AAAA,KAJP;AAKH;;AAED,SACK,CAACF,KAAK,CAACW,cAAN,CAAqB2D,QAAvB,GAAiC;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAsB,MAAC,KAAD;AAAO,IAAA,OAAO,EAAC,+DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAtB,CAAjC,GACA,4BACMnE,OAAD,GAAU;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkC,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAlC,CAAV,GAA4D,IADjE,EAEI,MAAC,IAAD;AAAM,IAAA,KAAK,EAAC,iBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI;AAAA,wCAAe,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA,wCAAe,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA,wCAAe,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDADJ,EAEI,MAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAII;AAAA,wCAAe,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA1C,yGAJJ,EAMI,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ,EAQI;AAAA,wCAAc,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BARJ,EASI,MAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATJ,EAWI;AAAA,wCAAc,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAXJ,EAYI,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZJ,EAcI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAkD,IAAA,OAAO,EAAEM,WAA3D;AAAwE,IAAA,EAAE,EAAC,eAA3E;AAAA,wCAAgC,iBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAdJ,EAeI;AAAA,wCAAe,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAM,IAAA,EAAE,EAAC,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAmBT,KAAK,CAACiB,YAAN,CAAmBI,KAAtC,CADJ,EAEI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAkD,IAAA,OAAO,EAAEZ,WAA3D;AAAA,wCAAgC,iBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFJ,CAfJ,CADJ,EAqBI;AAAA,wCAAe,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CArBJ,CADJ;AAAA;AAAA;AAAA,0/ZAHJ,CAFJ;AA6DH,CA3LD;;GAAMV,Q;;KAAAA,Q;;AA6LN,IAAMwE,eAAe,GAAG,SAAlBA,eAAkB,QAA4D;AAAA,MAA1D5D,cAA0D,SAA1DA,cAA0D;AAAA,MAA3CE,aAA2C,SAA3CA,aAA2C;AAAA,MAA7BI,YAA6B,SAA7BA,YAA6B;AAAA,MAAhBD,YAAgB,SAAhBA,YAAgB;AAChF,SAAO;AACHC,IAAAA,YAAY,EAAZA,YADG;AAEHN,IAAAA,cAAc,EAAdA,cAFG;AAGHE,IAAAA,aAAa,EAAbA,aAHG;AAIHG,IAAAA,YAAY,EAAZA;AAJG,GAAP;AAMH,CAPD;;AASA,IAAMwD,kBAAkB,GAAG;AACvB1E,EAAAA,eAAe,EAAfA;AADuB,CAA3B;AAIA,eAAeP,OAAO,CAACgF,eAAD,EAAiBC,kBAAjB,CAAP,CAA4CzE,QAA5C,CAAf","sourcesContent":["import { useEffect, useState } from 'react';\nimport CardUbicacion from '../../src/components/CardUbicacion/index'; \nimport OpcionesEnvio from '../../src/components/OpcionesEnvio';\nimport ZonaEnvio from '../../src/components/ZonaEnvio';\nimport Head from '../../src/components/Head';\nimport DetalleProductos from '../../src/components/DetalleProductos';\nimport Error from '../../src/components/Error';\nimport { connect } from 'react-redux';\nimport * as usuarioActions from '../../store/actions/usuarioActions';\nimport {API} from '../../config/index';\nimport Loader from '../../src/components/Loader/index';\nimport MediosDePago from '../../src/components/MediosDePago';\nconst Swal = require('sweetalert2');\n\nconst {verificarSesion} = usuarioActions;\n\nconst Checkout = (props) => {\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        props.verificarSesion();\n        document.getElementsByTagName('body')[0].style.overflowY = 'scroll';\n    }, []);\n\n    const handleClick = ()=>{\n        const {usuario} = props.usuarioReducer;\n        const {tipos:envio} = props.enviosReducer;\n        const {zona} = props.zonasReducer;\n        const {tipoEnvio,idZona,idMedioPago,total,subtotal,productos,porcentaje_descuento,descuento} = props.ventaReducer;\n\n        if(!envio.local){\n            if(!usuario.address || usuario.address==='') return setError('Es obligatorio completar tu ubicación.');\n            if(!zona) return setError('En caso de no retirarlo por nuestro local, es obligatorio completar la zona de envío.');\n        }\n        setLoading(true);\n        setError(false);\n\n        if(idMedioPago == '1'){\n            //guardo data de envio para luego de hacer el checkout de mercado pago, envio los datos al servidor para registrar la venta con el envio correspondiente.\n            localStorage.setItem('dataEnvio',JSON.stringify({tipo:tipoEnvio,zona:idZona}));\n\n            const {token} = usuario;\n\n            //SOLUCION TEMPORAL PARA QUE SE SUME AL PAGO LO DEL ENVIO\n            let data = [{\n                title:'Nueva compra en Oliver PetShop',\n                description:'Compra de uno o mas productos',\n                quantity:1,\n                unit_price:total\n            }];\n            window.location.assign('/procesarVenta');\n            // let headers = new Headers();\n            // headers.append('token',token);\n            // headers.append(\"Content-Type\", \"application/json\");\n            // fetch(`${API}/mercadopago`,{\n            //     method:'POST',\n            //     headers,\n            //     body:JSON.stringify(data)\n            // }).then(res=>res.json()).then(datamp=>{\n            //     // console.log(datamp);\n            //     const {response} = datamp.info;\n            //     setLoading(false);\n            //     window.location.assign(response.init_point);\n            // }).catch(err=>{\n            //     console.log(err);\n            //     setLoading(false);\n            //     setError(err.message);\n            // })\n        }else{\n            const {idUsuario} = usuario;\n            let f = new Date();\n            let mes = ((f.getMonth())<10)?`0${f.getMonth()+1}`:`${f.getMonth()}`;\n            let dia = ((f.getDate())<10)?`0${f.getDate()}`:`${f.getDate()}`;\n            let fecha = `${f.getFullYear()}-${mes}-${dia}`;\n            let dataToRequest = {\n                envio:{\n                    idZona,\n                    tipo:tipoEnvio\n                },\n                venta:{\n                    subtotal,\n                    porcentaje_descuento,\n                    descuento,\n                    total,\n                    idUsuario,\n                    productos,\n                    fecha,\n                    operacion_id:null,\n                    idMedioPago\n                }\n            }\n            return registrarVenta(dataToRequest);\n        };\n    }\n    \n    const registrarVenta = async data=>{\n        try {\n            const headers = new Headers();\n            headers.append('token',props.usuarioReducer.usuario.token);\n            headers.append(\"Content-Type\", \"application/json\");\n            let url = (!data.venta.operacion_id)?`${API}/registrarVenta?mercadoPago=false`:`${API}/registrarVenta?mercadoPago=true`;\n            const reqVenta = await fetch(url,{\n                headers,\n                method:'POST',\n                body:JSON.stringify(data)\n            });\n            if(reqVenta.status == 200){\n                localStorage.removeItem('dataEnvio');\n                localStorage.removeItem('carrito');\n                Swal.fire(\n                    'Listo',\n                    'Su compra se ha registrado con éxito, solo resta que se dirija a nuestro local para hacerse con su producto.',\n                    'success'\n                ).then(()=>window.location.assign('/'));\n            }else{\n                setLoading(false);\n                Swal.fire(\n                    'Error',\n                    'Ha ocurrido un error al momento de registrar la venta, intentalo más tarde',\n                    'error'\n                );\n            }\n        } catch (error) {\n            setLoading(false);\n            Swal.fire(\n                'Error',\n                'Ha ocurrido un error al momento de registrar la venta, intentalo más tarde',\n                'error'\n            );\n            console.log(error.message);\n        }\n    }\n\n    if(error){\n        Swal.fire(\n            'Atención',\n            error,\n            'warning'\n        ).then(()=>setError(false))\n    }\n\n    return (\n        (!props.usuarioReducer.logueado)?<div className=\"mt-3\"><Error message=\"No puedes realizar una compra sin tener una sesión activa.\"/></div>:\n        <>\n            {(loading)?<div className=\"container-loader\"><Loader/></div>:null}   \n            <Head title=\"Oliver Pet Shop\"/>\n            <div className=\"container mb-4\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-md-8 pt-4\">\n                        <h2>Últimos pasos para terminar tu compra</h2>\n                        <CardUbicacion/>\n\n                        <div className=\"alert alert-warning mt-3\"><b>Atención:</b> Sí desea retirar su compra en nuestro local, no es necesario que seleccione una zona de envío</div>\n\n                        <ZonaEnvio/>\n\n                        <h2 className=\"mt-5\">Opciones de envío</h2>\n                        <OpcionesEnvio/>\n\n                        <h2 className=\"mt-5\">Selecciona un medio de pago</h2>\n                        <MediosDePago/>\n\n                        <button type=\"button\" className=\"btn btn-primary\" onClick={handleClick} id=\"btn-continuar\">Continuar</button>\n                        <div className=\"divTotalMobile\">\n                            <span id=\"total\">${props.ventaReducer.total}</span>\n                            <button type=\"button\" className=\"btn btn-primary\" onClick={handleClick}>Continuar</button>\n                        </div>\n                    </div>\n                    <div className=\"col-12 col-md-4 detalleProductos\">\n                        <DetalleProductos/>\n                    </div>\n                </div>\n                <style jsx>{`\n                    h2{font-size:25px}\n                    button#btn-continuar{\n                        float:right;\n                        margin-top:20px\n                    }\n                    .divTotalMobile{display:none}\n                    @media(max-width:768px){\n                        #btn-continuar{display:none}\n                        .divTotalMobile{\n                            display:flex;\n                            justify-content:space-between;\n                            position: fixed;\n                            left:0;\n                            right:0px;\n                            bottom: 0px;\n                            background-color: #f7f7f7;\n                            padding: 16px;\n                            box-shadow: 0 -2px 8px 2px rgba(0,0,0,.15);\n                            border-width: 0 1px 1px;\n                            font-family: 'Quicksand', sans-serif;\n                        } \n                        .detalleProductos{\n                            display:none\n                        }           \n                    }\n                `}</style>\n            </div>\n        </>\n    );\n}\n \nconst mapStateToProps = ({usuarioReducer,enviosReducer,ventaReducer,zonasReducer})=>{\n    return {\n        ventaReducer,\n        usuarioReducer,\n        enviosReducer,\n        zonasReducer\n    };\n}\n\nconst mapDispatchToProps = {\n    verificarSesion\n};\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Checkout);"]},"metadata":{},"sourceType":"module"}