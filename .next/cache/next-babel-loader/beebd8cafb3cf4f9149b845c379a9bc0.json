{"ast":null,"code":"import { API } from '../../config/index';\nimport { isMobile } from '../../helpers/index';\nimport { TRAER_TODOS, TRAER_UNO, LOADING, ERROR, TRAER_PROMOCIONES, ORDENAR_PRODUCTOS, FILTRANDO, LOADING_MAS, TRAER_MAS } from '../types/productosTypes';\nexport const traerTodos = ({\n  desde,\n  limiteDesktop,\n  limiteMobile\n}) => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    let url = `${API}/producto?desde=${desde}&limite=${limiteDesktop}`;\n\n    if (isMobile()) {\n      url = `${API}/producto?desde=${desde}&limite=${limiteMobile}`;\n    }\n\n    return fetch(url).then(res => res.json()).then(data => {\n      dispatch({\n        type: TRAER_TODOS,\n        payload: data.data\n      });\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const traerMas = (rangoProducto, prevProductos) => async dispatch => {\n  dispatch({\n    type: LOADING_MAS\n  });\n\n  try {\n    let url = `${API}/producto?desde=${rangoProducto.desde}&limite=${rangoProducto.limiteDesktop}`;\n\n    if (isMobile()) {\n      url = `${API}/producto?desde=${rangoProducto.desde}&limite=${rangoProducto.limiteMobile}`;\n    }\n\n    return fetch(url).then(res => res.json()).then(data => {\n      let updateproductos = [...prevProductos, ...data.data];\n      dispatch({\n        type: TRAER_MAS,\n        payload: updateproductos\n      });\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const traerPorId = id => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    return fetch(`${API}/producto/${id}`).then(res => res.json()).then(data => {\n      dispatch({\n        type: TRAER_UNO,\n        payload: data\n      });\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const traerPromociones = () => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    let url = `${API}/producto?desde=1&limite=8`;\n\n    if (isMobile()) {\n      url = `${API}/producto?desde=1&limite=4`;\n    }\n\n    return fetch(url).then(res => res.json()).then(data => {\n      dispatch({\n        type: TRAER_PROMOCIONES,\n        payload: data.data\n      });\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const ordenarProductos = productosOrdenados => async dispatch => {\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    dispatch({\n      type: ORDENAR_PRODUCTOS,\n      payload: productosOrdenados\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};\nexport const filtrarProductos = url => async dispatch => {\n  //console.log('filtrando');\n  //console.log(url);\n  dispatch({\n    type: LOADING\n  });\n\n  try {\n    let urlFiltro = url.includes('buscar?busqueda') ? `productos/${url}` : `productos/filtro/${url}`;\n    return fetch(`${API}/${urlFiltro}`).then(res => res.json()).then(data => {\n      dispatch({\n        type: FILTRANDO,\n        payload: data.data\n      });\n    });\n  } catch (error) {\n    dispatch({\n      type: ERROR,\n      payload: error\n    });\n  }\n};","map":null,"metadata":{},"sourceType":"module"}