{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport CardProducto from '../CardProducto';\nimport { connect } from 'react-redux';\nimport * as productosActions from '../../../store/actions/productosActions';\nimport ProductosStyle from './Productos.module.css';\nimport Loader from '../Loader';\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport FiltroStyle from '../Filtro/Filtro.module.css';\nimport { isMobile } from '../../../helpers';\nimport NavbarStyle from '../Navbar/Navbar.module.css';\n\nconst Swal = require('sweetalert2');\n\nconst Productos = props => {\n  const {\n    filtros,\n    paginacion,\n    filtrando\n  } = props;\n  const {\n    0: filtro,\n    1: setFiltro\n  } = useState(''); //loop para mostrar filtro en pantalla\n\n  useEffect(() => {\n    if (props.location !== '/productos') {\n      if (props.query.search) {\n        mostrarSolapaFiltro(props.query.search);\n      } else {\n        mostrarSolapaFiltro(props.query.index[0]);\n      }\n    } else {\n      getProductos();\n    }\n  }, []); //loop para paginacion\n\n  useEffect(() => {\n    if (paginacion.desde > 0) {\n      props.traerMas();\n    }\n  }, [paginacion]);\n  useEffect(() => {\n    // veo si se esta filtrando para no hacer request innecesarios\n    if (filtrando) {\n      getProductos();\n      return;\n    }\n  }, [filtros]);\n\n  const getProductos = async () => {\n    try {\n      await props.traerProductos();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const cargarMas = () => {\n    props.updatePaginacion();\n  };\n\n  const showFiltrosMobile = () => {\n    if (document.getElementsByClassName(NavbarStyle.menu__collapsed)[0].classList.contains(NavbarStyle.showCollapsed)) {\n      document.getElementsByClassName(NavbarStyle.menu__collapsed)[0].classList.remove(NavbarStyle.showCollapsed);\n    }\n\n    document.getElementsByClassName('Filtro_filtros__contanier__3knXf')[0].classList.add(FiltroStyle.show_filtros);\n  };\n\n  const mostrarSolapaFiltro = filtro => {\n    setFiltro(filtro);\n  };\n\n  const handleChangeOrdenProductos = event => {\n    if (event.target.value === 'asc') {\n      props.productos.sort((a, b) => {\n        if (a.precioUnidad > b.precioUnidad) return 1;\n        if (a.precioUnidad < b.precioUnidad) return -1;\n        return 0;\n      });\n    } else {\n      props.productos.sort((a, b) => {\n        if (a.precioUnidad < b.precioUnidad) return 1;\n        if (a.precioUnidad > b.precioUnidad) return -1;\n        return 0;\n      });\n    }\n\n    ;\n    return props.ordenarProductos(props.productos);\n  }; //ocultar la chapita que indica el nombre del filtro activo cuando se restablecen los filtros.\n\n\n  if (props.location == '/productos' && filtro != '') {\n    setFiltro('');\n  }\n\n  const renderBotonCargarMas = () => {\n    if (isMobile()) {\n      return __jsx(\"button\", {\n        className: `boton bg-yellow btn-vermas ${props.productos.length < paginacion.limiteMobile ? 'd-none' : ''}`,\n        onClick: cargarMas\n      }, props.loading_mas ? 'Obteniendo productos...' : 'Cargar más');\n    }\n\n    return __jsx(\"button\", {\n      className: `boton bg-yellow btn-vermas ${props.productos.length < paginacion.limiteDesktop ? 'd-none' : ''}`,\n      onClick: cargarMas\n    }, props.loading_mas ? 'Obteniendo productos...' : 'Cargar más');\n  };\n\n  return __jsx(React.Fragment, null, props.loading || !props.productos ? __jsx(\"div\", {\n    className: \"jsx-3898475978\" + \" \" + \"col-12 text-center\"\n  }, __jsx(Loader, null)) : __jsx(React.Fragment, null, filtro !== '' && props.filtrando ? __jsx(\"span\", {\n    id: \"label__filtro-busqueda\",\n    className: \"jsx-3898475978\" + \" \" + (ProductosStyle.label__filtro_busqueda || \"\")\n  }, __jsx(FontAwesomeIcon, {\n    icon: faSearch\n  }), __jsx(\"span\", {\n    className: \"jsx-3898475978\" + \" \" + (ProductosStyle.item_filtro_busqueda || \"\")\n  }, __jsx(\"span\", {\n    id: \"valor-busqueda\",\n    className: \"jsx-3898475978\" + \" \" + \"text-mutedd\"\n  }, filtro))) : null, __jsx(\"div\", {\n    style: {\n      padding: '0px 15px'\n    },\n    className: \"jsx-3898475978\" + \" \" + \"row justify-content-between my-2 align-items-center\"\n  }, __jsx(\"span\", {\n    className: \"jsx-3898475978\" + \" \" + \"text-muted\"\n  }, __jsx(\"b\", {\n    className: \"jsx-3898475978\" + \" \" + \"txt-yellow\"\n  }, props.productos.length), \" productos encontrados\"), __jsx(\"div\", {\n    className: \"jsx-3898475978\" + \" \" + (ProductosStyle.ordenarProductos + ' ' + `d-flex align-items-center` || \"\")\n  }, __jsx(\"span\", {\n    className: \"jsx-3898475978\" + \" \" + \"txt-yellow text-bold mr-2\"\n  }, \"Ordenar por: \"), __jsx(\"select\", {\n    onChange: handleChangeOrdenProductos,\n    className: \"jsx-3898475978\" + \" \" + (ProductosStyle.select_ordenar || \"\")\n  }, __jsx(\"option\", {\n    value: \"desc\",\n    className: \"jsx-3898475978\"\n  }, \"Mayor precio\"), __jsx(\"option\", {\n    value: \"asc\",\n    className: \"jsx-3898475978\"\n  }, \"Menor precio\"))), __jsx(\"button\", {\n    onClick: showFiltrosMobile,\n    className: \"jsx-3898475978\" + \" \" + (`boton bg-yellow mt-3 d-none` + ' ' + ProductosStyle.boton_filtrar_mobile || \"\")\n  }, \"Filtrar\")), __jsx(\"div\", {\n    className: \"jsx-3898475978\" + \" \" + \"row feedProductos\"\n  }, !props.productos ? null : props.productos.map(prd => __jsx(\"div\", {\n    key: prd.idProducto,\n    className: \"jsx-3898475978\" + \" \" + \"col-6 col-md-3\"\n  }, __jsx(CardProducto, {\n    imagen: prd.foto,\n    prd: prd\n  }))), props.sinResultados ? __jsx(\"div\", {\n    style: {\n      height: '50px'\n    },\n    className: \"jsx-3898475978\" + \" \" + \"alert alert-warning text-center w-100\"\n  }, \"No se encontraron m\\xE1s resultados\") : renderBotonCargarMas())), __jsx(_JSXStyle, {\n    id: \"3898475978\"\n  }, [\".feedProductos.jsx-3898475978{height:75vh;overflow-y:scroll;}\", \".btn-vermas.jsx-3898475978{position:relative;height:40px;}\", \".feedProductos.jsx-3898475978::-webkit-scrollbar{width:8px;height:5px;}\", \".feedProductos.jsx-3898475978::-webkit-scrollbar-thumb{background:#FFB347;border-radius:4px;}\", \".feedProductos.jsx-3898475978::-webkit-scrollbar-thumb.jsx-3898475978:hover{background:#b3b3b3;box-shadow:0 0 2px 1px rgba(0,0,0,0.2);}\", \"@media(max-width:768px){.feedProductos.jsx-3898475978{height:68vh;overflow-y:scroll;}.feedProductos.jsx-3898475978::-webkit-scrollbar{width:8px;height:10px;}}\"]));\n};\n\nconst mapStateToProps = reducers => {\n  return reducers.productosReducer;\n};\n\nexport default connect(mapStateToProps, productosActions)(Productos);","map":null,"metadata":{},"sourceType":"module"}