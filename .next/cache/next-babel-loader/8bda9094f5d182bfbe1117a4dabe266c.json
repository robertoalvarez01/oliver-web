{"ast":null,"code":"var _jsxFileName = \"/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/venta/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useEffect, useState } from \"react\";\nimport Header from \"../../src/components/Head\";\n\nconst Venta = props => {\n  const {\n    0: formValues,\n    1: setFormValues\n  } = useState({\n    email: '',\n    docType: '',\n    docNumber: '',\n    cardTitular: '',\n    cardNumber: '',\n    cvc: '',\n    vencimiento: '',\n    bancoEmisor: '',\n    cuotas: '',\n    total: 120,\n    paymentMethodId: null,\n    descripcion: ''\n  });\n  const {\n    0: vencimientosValues,\n    1: setVencimientosValues\n  } = useState({\n    cardExpirationMonth: '',\n    cardExpirationYear: ''\n  });\n  const {\n    0: issuers,\n    1: setIssuers\n  } = useState([]);\n  const {\n    0: payerCosts,\n    1: setPayerCosts\n  } = useState([]);\n  useEffect(function mount() {\n    window.Mercadopago.setPublishableKey(\"TEST-1f5f55a0-b128-49c4-9217-110a8d9fba43\");\n    window.Mercadopago.getIdentificationTypes();\n  });\n  useEffect(() => {\n    if (formValues.paymentMethodId) {\n      getIssuers();\n    }\n  }, [formValues.paymentMethodId]);\n  useEffect(() => {\n    if (issuers.length > 0) {\n      getInstallments();\n    }\n  }, [issuers]);\n\n  const handleChange = e => {\n    if (e.target.id == \"cardNumber\") {\n      guessPaymentMethod(e);\n      return;\n    }\n\n    setFormValues(_objectSpread(_objectSpread({}, formValues), {}, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleChangeVencimiento = e => {\n    setVencimientosValues(_objectSpread(_objectSpread({}, vencimientosValues), {}, {\n      [e.target.id]: e.target.value\n    }));\n  };\n\n  const guessPaymentMethod = event => {\n    let cardnumber = event.value;\n\n    if (cardnumber.length >= 6) {\n      let bin = cardnumber.substring(0, 6);\n      window.Mercadopago.getPaymentMethod({\n        \"bin\": bin\n      }, (status, response) => {\n        if (status == 200) {\n          let paymentMethod = response[0];\n          return setFormValues(_objectSpread(_objectSpread({}, formValues), {}, {\n            paymentMethodId: paymentMethod\n          }));\n        }\n\n        return alert('Error en la busqueda de payment');\n      });\n    }\n  };\n\n  const getIssuers = () => {\n    window.Mercadopago.getIssuers(formValues.paymentMethodId, (status, response) => {\n      if (status != 200) return alert(`issuers method info error: ${response}`);\n      setIssuers(response);\n    });\n  };\n\n  const getInstallments = () => {\n    window.Mercadopago.getInstallments({\n      \"payment_method_id\": formValues.paymentMethodId,\n      \"amount\": parseFloat(formValues.total),\n      \"issuer_id\": parseInt(issuers[0].value)\n    }, (status, response) => {\n      if (status != 200) return alert(`installments method info error: ${response}`);\n      setPayerCosts(response[0]);\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"px-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, __jsx(Header, {\n    title: \"Oliver PetShop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }), __jsx(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, \"Detalles del comprador\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, \"E-mail\"), __jsx(\"input\", {\n    id: \"email\",\n    name: \"email\",\n    type: \"text\",\n    value: formValues.email,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"docType\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, \"Tipo de documento\"), __jsx(\"select\", {\n    id: \"docType\",\n    name: \"docType\",\n    \"data-checkout\": \"docType\",\n    type: \"text\",\n    value: formValues.docType,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"docNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }, \"N\\xFAmero de documento\"), __jsx(\"input\", {\n    id: \"docNumber\",\n    name: \"docNumber\",\n    \"data-checkout\": \"docNumber\",\n    value: formValues.docNumber,\n    type: \"text\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }))), __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, \"Detalles de la tarjeta\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"cardholderName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }, \"Titular de la tarjeta\"), __jsx(\"input\", {\n    id: \"cardholderName\",\n    \"data-checkout\": \"cardholderName\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, \"Fecha de vencimiento\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"MM\",\n    id: \"cardExpirationMonth\",\n    \"data-checkout\": \"cardExpirationMonth\",\n    onselectstart: \"return false\",\n    onPaste: () => false,\n    onCopy: () => false,\n    onCut: () => false,\n    onDrag: () => false,\n    onDrop: () => false,\n    autoComplete: \"off\",\n    onChange: handleChangeVencimiento,\n    value: vencimientosValues.cardExpirationMonth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }), __jsx(\"span\", {\n    className: \"date-separator\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, \"/\"), __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"YY\",\n    id: \"cardExpirationYear\",\n    \"data-checkout\": \"cardExpirationYear\",\n    oonselectstart: \"return false\",\n    onPaste: () => false,\n    onCopy: () => false,\n    onCut: () => false,\n    onDrag: () => false,\n    onDrop: () => false,\n    autoComplete: \"off\",\n    onChange: handleChangeVencimiento,\n    value: vencimientosValues.cardExpirationYear,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 29\n    }\n  }))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"cardNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, \"N\\xFAmero de la tarjeta\"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"cardNumber\",\n    \"data-checkout\": \"cardNumber\",\n    onselectstart: \"return false\",\n    onPaste: () => false,\n    onCopy: () => false,\n    onCut: () => false,\n    onDrag: () => false,\n    onDrop: () => false,\n    autoComplete: \"off\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"securityCode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, \"C\\xF3digo de seguridad\"), __jsx(\"input\", {\n    id: \"securityCode\",\n    \"data-checkout\": \"securityCode\",\n    type: \"text\",\n    onselectstart: \"return false\",\n    onPaste: () => false,\n    onCopy: () => false,\n    onCut: () => false,\n    onDrag: () => false,\n    onDrop: () => false,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    id: \"issuerInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"issuer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }, \"Banco emisor\"), __jsx(\"select\", {\n    id: \"issuer\",\n    name: \"issuer\",\n    \"data-checkout\": \"issuer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 25\n    }\n  }, issuers.map((issuer, key) => __jsx(\"option\", {\n    value: issuer.id,\n    key: key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 33\n    }\n  }, issuer.text)))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"installments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 25\n    }\n  }, \"Cuotas\"), __jsx(\"select\", {\n    type: \"text\",\n    id: \"installments\",\n    name: \"installments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 25\n    }\n  }, payerCosts.map((installment, key) => __jsx(\"option\", {\n    value: installment.installments,\n    key: key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 33\n    }\n  }, installment.recommended_message)))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  }, __jsx(\"input\", {\n    type: \"hidden\",\n    name: \"transactionAmount\",\n    id: \"transactionAmount\",\n    value: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }), __jsx(\"input\", {\n    type: \"hidden\",\n    name: \"paymentMethodId\",\n    id: \"paymentMethodId\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 25\n    }\n  }), __jsx(\"input\", {\n    type: \"hidden\",\n    name: \"description\",\n    id: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 25\n    }\n  }, \"Pagar\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  })))));\n};\n\nexport default Venta;","map":{"version":3,"sources":["/home/franco/desarrollo/proyecto_oliver/oliver-web-next/pages/venta/index.js"],"names":["useEffect","useState","Header","Venta","props","formValues","setFormValues","email","docType","docNumber","cardTitular","cardNumber","cvc","vencimiento","bancoEmisor","cuotas","total","paymentMethodId","descripcion","vencimientosValues","setVencimientosValues","cardExpirationMonth","cardExpirationYear","issuers","setIssuers","payerCosts","setPayerCosts","mount","window","Mercadopago","setPublishableKey","getIdentificationTypes","getIssuers","length","getInstallments","handleChange","e","target","id","guessPaymentMethod","name","value","handleChangeVencimiento","event","cardnumber","bin","substring","getPaymentMethod","status","response","paymentMethod","alert","parseFloat","parseInt","map","issuer","key","text","installment","installments","recommended_message"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport Header from \"../../src/components/Head\";\n\nconst Venta = (props) => {\n    const [formValues, setFormValues] = useState({\n        email:'',\n        docType:'',\n        docNumber:'',\n        cardTitular:'',\n        cardNumber:'',\n        cvc:'',\n        vencimiento:'',\n        bancoEmisor:'',\n        cuotas:'',\n        total:120,\n        paymentMethodId:null,\n        descripcion:''\n    });\n\n    const [vencimientosValues, setVencimientosValues] = useState({\n        cardExpirationMonth:'',\n        cardExpirationYear:''\n    });\n\n    const [issuers, setIssuers] = useState([]);\n    const [payerCosts, setPayerCosts] = useState([]);\n\n    useEffect(function mount() {\n        window.Mercadopago.setPublishableKey(\"TEST-1f5f55a0-b128-49c4-9217-110a8d9fba43\");\n        window.Mercadopago.getIdentificationTypes();\n    });\n\n    useEffect(() => {\n        if(formValues.paymentMethodId){\n            getIssuers();\n        }\n    }, [formValues.paymentMethodId]);\n\n    useEffect(() => {\n        if(issuers.length>0){\n            getInstallments();\n        }\n    }, [issuers])\n\n    const handleChange = e=>{\n        if(e.target.id == \"cardNumber\"){\n            guessPaymentMethod(e);\n            return;\n        }\n        setFormValues({\n            ...formValues,\n            [e.target.name]:e.target.value\n        })\n    }\n\n    const handleChangeVencimiento = e=>{\n        setVencimientosValues({\n            ...vencimientosValues,\n            [e.target.id]:e.target.value\n        })\n    };\n\n    const guessPaymentMethod = (event)=>{\n        let cardnumber = event.value;\n        if (cardnumber.length >= 6) {\n            let bin = cardnumber.substring(0,6);\n            window.Mercadopago.getPaymentMethod({\n                \"bin\": bin\n            }, (status,response)=>{\n                if(status == 200){\n                    let paymentMethod = response[0];\n                    return setFormValues({\n                        ...formValues,\n                        paymentMethodId:paymentMethod\n                    });\n                }\n                return alert('Error en la busqueda de payment');\n            });\n        }\n     };\n\n    const getIssuers = ()=>{\n        window.Mercadopago.getIssuers(formValues.paymentMethodId,(status,response)=>{\n            if(status != 200) return alert(`issuers method info error: ${response}`);\n            setIssuers(response);\n        });\n    }\n\n    const getInstallments = ()=>{\n        window.Mercadopago.getInstallments({\n            \"payment_method_id\": formValues.paymentMethodId,\n            \"amount\": parseFloat(formValues.total),\n            \"issuer_id\": parseInt(issuers[0].value)\n        }, (status,response)=>{\n            if(status != 200) return alert(`installments method info error: ${response}`);\n            setPayerCosts(response[0]);\n        });\n    }\n\n    return (\n        <div className=\"px-5\">\n            <Header title=\"Oliver PetShop\"/>\n            <form>\n                <h3>Detalles del comprador</h3>\n                <div>\n                    <div>\n                        <label htmlFor=\"email\">E-mail</label>\n                        <input id=\"email\" name=\"email\" type=\"text\" value={formValues.email} onChange={handleChange}/>\n                    </div>\n                    <div>\n                        <label htmlFor=\"docType\">Tipo de documento</label>\n                        <select id=\"docType\" name=\"docType\" data-checkout=\"docType\" type=\"text\" value={formValues.docType} onChange={handleChange}>\n                        </select>\n                    </div>\n                    <div>\n                        <label htmlFor=\"docNumber\">Número de documento</label>\n                        <input id=\"docNumber\" name=\"docNumber\" data-checkout=\"docNumber\" value={formValues.docNumber} type=\"text\" onChange={handleChange}/>\n                    </div>\n                </div>\n                <h3>Detalles de la tarjeta</h3>\n                <div>\n                    <div>\n                        <label htmlFor=\"cardholderName\">Titular de la tarjeta</label>\n                        <input id=\"cardholderName\" data-checkout=\"cardholderName\" type=\"text\"/>\n                    </div>\n                    <div>\n                        <label htmlFor=\"\">Fecha de vencimiento</label>\n                        <div>\n                            <input type=\"text\" placeholder=\"MM\" id=\"cardExpirationMonth\" data-checkout=\"cardExpirationMonth\"\n                                onselectstart=\"return false\" onPaste={()=>false}\n                                onCopy={()=>false} onCut={()=>false}\n                                onDrag={()=>false} onDrop={()=>false} autoComplete=\"off\" onChange={handleChangeVencimiento} value={vencimientosValues.cardExpirationMonth}/>\n                            <span className=\"date-separator\">/</span>\n                            <input type=\"text\" placeholder=\"YY\" id=\"cardExpirationYear\" data-checkout=\"cardExpirationYear\"\n                                oonselectstart=\"return false\" onPaste={()=>false}\n                                onCopy={()=>false} onCut={()=>false}\n                                onDrag={()=>false} onDrop={()=>false} autoComplete=\"off\" onChange={handleChangeVencimiento} value={vencimientosValues.cardExpirationYear}/>\n                        </div>\n                    </div>\n                    <div>\n                        <label htmlFor=\"cardNumber\">Número de la tarjeta</label>\n                        <input type=\"text\" id=\"cardNumber\" data-checkout=\"cardNumber\"\n                        onselectstart=\"return false\" onPaste={()=>false}\n                        onCopy={()=>false} onCut={()=>false}\n                        onDrag={()=>false} onDrop={()=>false} autoComplete=\"off\" onChange={handleChange}/>\n                    </div>\n                    <div>\n                        <label htmlFor=\"securityCode\">Código de seguridad</label>\n                        <input id=\"securityCode\" data-checkout=\"securityCode\" type=\"text\"\n                        onselectstart=\"return false\" onPaste={()=>false}\n                        onCopy={()=>false} onCut={()=>false}\n                        onDrag={()=>false} onDrop={()=>false} autoComplete=\"off\"/>\n                    </div>\n                    <div id=\"issuerInput\">\n                        <label htmlFor=\"issuer\">Banco emisor</label>\n                        <select id=\"issuer\" name=\"issuer\" data-checkout=\"issuer\">\n                            {issuers.map((issuer,key)=>(\n                                <option value={issuer.id} key={key}>{issuer.text}</option>\n                            ))}\n                        </select>\n                    </div>\n                    <div>\n                        <label htmlFor=\"installments\">Cuotas</label>\n                        <select type=\"text\" id=\"installments\" name=\"installments\">\n                            {payerCosts.map((installment,key)=>(\n                                <option value={installment.installments} key={key}>{installment.recommended_message}</option>\n                            ))}\n                        </select>\n                    </div>\n                    <div>\n                        <input type=\"hidden\" name=\"transactionAmount\" id=\"transactionAmount\" value=\"100\" />\n                        <input type=\"hidden\" name=\"paymentMethodId\" id=\"paymentMethodId\" />\n                        <input type=\"hidden\" name=\"description\" id=\"description\" />\n                        <br/>\n                        <button type=\"submit\">Pagar</button>\n                        <br/>\n                    </div>\n                </div>\n            </form>\n        </div>\n    );\n}\n \nexport default Venta;"]},"metadata":{},"sourceType":"module"}