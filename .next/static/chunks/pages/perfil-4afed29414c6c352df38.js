_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{"6Jgp":function(e,a,t){"use strict";var r=t("o0o1"),n=t.n(r),o=t("HaE+"),s=t("MX0m"),i=t.n(s),c=t("q1tI"),u=t.n(c),l=t("/MKj"),d=t("XOuL"),m=t("rOcY"),f=u.a.createElement;a.a=Object(l.b)((function(e){return{usuarioReducer:e.usuarioReducer}}),null)((function(e){var a=Object(c.useState)(!1),t=a[0],r=a[1],s=Object(c.useState)(null),u=s[0],l=s[1],b=Object(c.useState)(null),p=b[0],x=b[1],j=Object(c.useState)(""),g=j[0],v=j[1],y=function(){var a=Object(o.a)(n.a.mark((function a(){var t,o,s,i,c,u,d;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=new Headers,!e.usuarioReducer.logueado){a.next=9;break}if(s=e.usuarioReducer.usuario,i=s.idUsuario,c=s.token){a.next=5;break}return a.abrupt("return",l("Ups.. ha ocurrido un error."));case 5:t.append("token",c),o={idUsuario:i},a.next=12;break;case 9:if(""!=g){a.next=11;break}return a.abrupt("return",l("Ups.. ha ocurrido un error."));case 11:o={email:g};case 12:return r(!0),t.append("Content-Type","application/json"),console.log(o),a.next=17,fetch("".concat(m.a,"/resetPassword"),{method:"POST",headers:t,body:JSON.stringify(o)});case 17:if(200==(u=a.sent).status){a.next=21;break}return r(!1),a.abrupt("return",l("Ups.. ha ocurrido un error."));case 21:return a.next=23,u.json();case 23:if(d=a.sent,r(!1),!d.ok){a.next=27;break}return a.abrupt("return",x(d.info));case 27:return a.abrupt("return",l("Ups.. ha ocurrido un error."));case 28:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return f("div",{className:"jsx-204570501 containerResetPass"},f("div",{className:"jsx-204570501 text-center"},u?f("div",{className:"jsx-204570501 alert alert-danger text-center"},u):null),f("div",{className:"jsx-204570501 "+"alert alert-".concat(p?"info":"warning"," text-center")},p?f("b",{className:"jsx-204570501"},p):"Estaremos enviando un email con los pasos para poder realizar el proceso de modificaci\xf3n de contrase\xf1a"),f("div",{className:"jsx-204570501 col-12 text-center"},t?f(d.a,null):null,e.withEmail?f("input",{type:"email",value:g,onChange:function(e){v(e.target.value)},required:!0,placeholder:"Ingrese su email",className:"jsx-204570501 form-control mb-3"}):null,p||t?null:f("button",{onClick:y,type:"button",className:"jsx-204570501 boton bg-yellow"},"Enviar email")),f(i.a,{id:"204570501"},[".containerResetPass.jsx-204570501{font-family:'Quicksand',sans-serif!important;}"]))}))},lVdJ:function(e,a,t){"use strict";t.r(a);var r=t("BsWD");function n(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var t=[],r=!0,n=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(t.push(s.value),!a||t.length!==a);r=!0);}catch(c){n=!0,o=c}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}}(e,a)||Object(r.a)(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=t("MX0m"),s=t.n(o),i=t("k2JI"),c=t("q1tI"),u=t.n(c),l=u.a.createElement,d=function(e){var a=e.usuario,t=e.abrirModalFoto;return l("div",{className:"jsx-2182704935 row"},l("div",{className:"jsx-2182704935 col-12 col-md-6 text-center"},l("img",{src:a.foto,alt:a.nombre,className:"jsx-2182704935"})),l("div",{className:"jsx-2182704935 col-12 col-md-6 text-center"},l("h3",{className:"jsx-2182704935"},a.nombre),l("button",{type:"button",onClick:t,className:"jsx-2182704935 boton bg-yellow"},"Cambiar Foto")),l(s.a,{id:"2182704935"},["img.jsx-2182704935{border-radius:30px;width:60px;height:60px;}"]))},m=u.a.createElement,f=function(){return m("div",{className:"jsx-3392845155 estadisticas_usuario"},m("div",{className:"jsx-3392845155 col-6 text-center"},m("h2",{className:"jsx-3392845155"},"0"),m("span",{className:"jsx-3392845155"},"Compras")),m("div",{className:"jsx-3392845155 col-6 text-center"},m("h2",{className:"jsx-3392845155"},"0"),m("span",{className:"jsx-3392845155"},"Puntos")),m(s.a,{id:"3392845155"},[".estadisticas_usuario.jsx-3392845155{background-color:#fff;width:50%;float:right;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:10px 20px;border-radius:5px;}","h2.jsx-3392845155{font-weight:bold;}","@media(max-width:768px){.estadisticas_usuario.jsx-3392845155{float:initial;width:100%;margin-top:10px;}}"]))},b=t("/MKj"),p=t("HdXA"),x=u.a.createElement,j=Object(b.b)((function(e){return{usuarioReducer:e.usuarioReducer}}),p)((function(e){var a=e.usuarioReducer.usuario;return a?x("section",{className:"jsx-3269591714 banner_usuario"},x("div",{className:"jsx-3269591714 row"},x("div",{className:"jsx-3269591714 col-12 col-md-6"},x(d,{usuario:a,abrirModalFoto:e.abrirModalFoto})),x("div",{className:"jsx-3269591714 col-12 col-md-6"},x(f,null))),x(s.a,{id:"3269591714"},["section.jsx-3269591714{height:200px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}","@media(max-width:768px){section.jsx-3269591714{margin:50px 0px;}}"])):null})),g=t("9a8N"),v=t("F66N"),y=t("arvA"),N=t("TSYQ"),w=t.n(N),h=u.a.createElement,k=function(e){return h(g.a,{tabs:!0},e.solapas.map((function(a,t){return h(v.a,{key:t},h(y.a,{className:w()({active:e.activeTab==="".concat(t+1)}),onClick:function(){e.toggle("".concat(t+1))}},a.nombre))})))},O=t("wx14"),S=t("o0o1"),R=t.n(S),E=t("HaE+"),P=t("rePB"),C=t("wHSu"),I=t("IP2g"),_=t("bItr"),M=t.n(_),D=t("XOuL"),F=u.a.createElement;function T(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?T(Object(t),!0).forEach((function(a){Object(P.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var H=Object(b.b)((function(e){return{usuarioReducer:e.usuarioReducer}}),p)((function(e){Object(c.useEffect)((function(){if(e.usuarioReducer.usuario&&!e.usuarioReducer.loading){var a=e.usuarioReducer.usuario;i({nombre:a.nombre,telefono:a.telefono,email:a.email,address:a.address,lat:a.lat,lon:a.lon})}}),[e.usuarioReducer]);var a=Object(c.useState)({nombre:!0,telefono:!0,email:!0,address:!0}),t=a[0],r=a[1],n=Object(c.useState)({nombre:"",telefono:"",email:"",address:"",lat:0,lon:0}),o=n[0],i=n[1],u=Object(c.useState)(""),l=u[0],d=u[1],m=function(e){var a=t[e];return r(U(U({},t),{},Object(P.a)({},e,!a)))},f=function(e){return i(U(U({},o),{},Object(P.a)({},e.target.name,e.target.value)))};return F("form",{onSubmit:function(){var a=Object(E.a)(R.a.mark((function a(t){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.next=3,e.actualizarUsuario(o,e.usuarioReducer.usuario.idUsuario);case 3:if(e.usuarioReducer.error||e.usuarioReducer.loading){a.next=5;break}return a.abrupt("return",d("Tus datos se han modificado de manera exitosa"));case 5:return a.abrupt("return",d(""));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),className:"jsx-2483563024 form-group"},""==l||e.usuarioReducer.error?null:F("div",{className:"jsx-2483563024 alert alert-success text-center"},F("b",{className:"jsx-2483563024"},l)),e.usuarioReducer.error?F("div",{className:"jsx-2483563024 alert alert-danger text-center"},F("b",{className:"jsx-2483563024"},e.usuarioReducer.error)):null,F("div",{className:"jsx-2483563024 row"},F("div",{className:"jsx-2483563024 col-12 col-md-6 my-4 d-flex align-items-center"},F("input",{disabled:t.nombre,onChange:f,value:o.nombre,type:"text",name:"nombre",id:"nombre",placeholder:"Nombre",className:"jsx-2483563024 form-control mr-auto"}),F(I.a,{className:"iconoHabilitarInput",icon:t.nombre?C.i:C.p,onClick:function(){return m("nombre")},required:!0})),F("div",{className:"jsx-2483563024 col-12 col-md-6 my-4 d-flex align-items-center"},F("input",{disabled:t.telefono,onChange:f,value:o.telefono,type:"text",name:"telefono",id:"telefono",placeholder:"Telefono",className:"jsx-2483563024 form-control mr-auto"}),F(I.a,{className:"iconoHabilitarInput",icon:t.telefono?C.i:C.p,onClick:function(){return m("telefono")}})),F("div",{className:"jsx-2483563024 col-12 col-md-6 my-4 d-flex align-items-center"},F("input",{disabled:t.email,onChange:f,value:o.email,type:"email",name:"email",id:"email",className:"jsx-2483563024 form-control mr-auto"})),F("div",{className:"jsx-2483563024 col-12 col-md-6 my-4 d-flex align-items-center"},F(M.a,{value:o.address,onChange:function(e){return i(U(U({},o),{},{address:e}))},onSelect:function(e){Object(_.geocodeByAddress)(e).then((function(e){return Object(_.getLatLng)(e[0])})).then((function(a){i(U(U({},o),{},{address:e,lat:a.lat,lon:a.lng}))})).catch((function(e){return console.error("Error",e)}))}},(function(e){var a=e.getInputProps,r=e.suggestions,n=e.getSuggestionItemProps,s=e.loading;return F("div",{className:"jsx-2483563024 mr-auto w-100"},F("input",Object(O.a)({name:"address",id:"address"},a({placeholder:o.address}),{disabled:t.address,placeholder:"Direcci\xf3n",className:"jsx-2483563024 form-control"})),F("div",{style:{position:"fixed",zIndex:"1000",backgroundColor:"#fff"},className:"jsx-2483563024 autocomplete-dropdown-container"},s&&F("div",{className:"jsx-2483563024"},"Cargando ubicaciones..."),r.map((function(e,a){var t=e.active?"suggestion-item--active":"suggestion-item",r=e.active?{backgroundColor:"#fafafa",cursor:"pointer",margin:"10px",padding:"5px"}:{backgroundColor:"#ffffff",cursor:"pointer",margin:"10px",padding:"5px"};return F("div",Object(O.a)({},n(e,{className:t,style:r,key:a}),{className:"jsx-2483563024"}),F("span",{className:"jsx-2483563024"},e.description))}))))})),F(I.a,{className:"iconoHabilitarInput",icon:t.address?C.i:C.p,onClick:function(){return m("address")}})),F("div",{className:"jsx-2483563024 col-12 mb-4 text-right"},F("button",{type:"button",onClick:e.abrirModalPw,className:"jsx-2483563024 btn btn-warning"},F(I.a,{icon:C.f})," Cambiar contrase\xf1a")),F("div",{className:"jsx-2483563024 col-12 text-center"},e.usuarioReducer.loading?F(D.a,null):F("input",{type:"submit",value:"Guardar cambios",className:"jsx-2483563024 boton bg-yellow"}))),F(s.a,{id:"2483563024"},[".form-control.jsx-2483563024{width:92%;}",".iconoHabilitarInput.jsx-2483563024{cursor:pointer!important;}","button.jsx-2483563024{color:#fff !important;}"]))})),J=t("Czwy"),q=t("EzvR"),A=t("ok1R"),X=t("rhny"),z=t("Mnxd"),V=u.a.createElement,B=function(e){var a=function(){return console.log("eliminar")};return[1,2,3,4,5,6,7,8,9].map((function(e){return V(z.a,{key:e,idSubProducto:"1",producto:"Dog pron Adulto",peso:"5",total:"1500",foto:"https://storage.googleapis.com/web-oliver/-VitalCrops-DogPro-Adulto-15k.jpg",cantidad:"1",eliminarProducto:a})}))},L=t("/Q2I"),Q=t("t0wy"),G=u.a.createElement,K=Object(b.b)((function(e){return{usuarioReducer:e.usuarioReducer}}),p)((function(e){var a=e.usuarioReducer,t=a.usuario,r=a.error,n=a.loading;return G("form",{className:"form-group",id:"formModificarFotoUsuario",onSubmit:function(a){a.preventDefault();var r=document.getElementById("formModificarFotoUsuario"),n=new FormData(r);""!==n.get("foto").name&&e.actualizarFoto(n,t.idUsuario)}},r?G(Q.a,{message:r.message}):null,G("label",null,"Seleccione la nueva imagen de perfil"),G("input",{type:"file",required:!0,className:"form-control",name:"foto"}),n?G("div",{className:"text-center mt-2"},G(D.a,null)):G("input",{type:"submit",className:"boton bg-yellow mt-3",value:"Subir"}))})),Y=t("6Jgp"),W=u.a.createElement;a.default=function(){var e=n(u.a.useState("1"),2),a=e[0],t=e[1],r=n(u.a.useState(!1),2),o=r[0],c=r[1],l=n(u.a.useState(!1),2),d=l[0],m=l[1],f=n(u.a.useState(!1),2),b=(f[0],f[1]),p=function(){c(!o)};return W(u.a.Fragment,null,W(i.a,{title:"Oliver Petshop - Mi perfil"}),W("div",{className:"jsx-53771273 container"},W(j,{abrirModalFoto:function(){m(!0),b(!1),p()}}),W(k,{toggle:function(e){a!==e&&t(e)},activeTab:a,solapas:[{nombre:"General"}]})),W("div",{className:"jsx-53771273 container-form"},W("div",{className:"jsx-53771273 container pt-3"},W(J.a,{activeTab:a},W(q.a,{tabId:"1"},W(A.a,null,W(X.a,{sm:"12"},W(H,{abrirModalPw:function(){b(!0),m(!1),p()}})))),W(q.a,{tabId:"2",className:"tab-productos"},W(A.a,null,W(X.a,{sm:"12"},W(B,null))))))),o?W(L.a,{closeModal:p},W(d?K:Y.a,null)):null,W(s.a,{id:"53771273"},[".container-form.jsx-53771273{background-color:#fff;}","@media(min-width:768px){.container-form.jsx-53771273{height:55vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}"]))}},qV4O:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/perfil",function(){return t("lVdJ")}])}},[["qV4O",1,2,5,0,3,4,7,9,12]]]);